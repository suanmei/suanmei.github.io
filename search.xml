<?xml version="1.0" encoding="utf-8"?>
<search>
  
    
    <entry>
      <title><![CDATA[H5å”¤èµ·APPæŒ‡å—]]></title>
      <url>%2F2018%2F08%2F23%2Fh5_call_app%2F</url>
      <content type="text"><![CDATA[å‰ä¸€æ®µæ—¶é—´åœ¨åšç”µæµApp H5é¡µé¢ï¼Œéœ€æ±‚ä¸­è½åœ°é¡µå æ¯”è¾ƒå¤§ï¼Œè½åœ°é¡µæ‰¿æ‹…çš„èŒè´£å°±æ˜¯å¼•æµã€‚å¼•æµæœ‰ä¸¤ç§å½¢å¼ï¼ŒåŒæ—¶ä¹Ÿæ˜¯æˆ‘ä»¬å¯¹å”¤ç«¯çš„å®šä¹‰ï¼šå¼•å¯¼å·²ä¸‹è½½ç”¨æˆ·æ‰“å¼€APPï¼Œå¼•å¯¼æœªä¸‹è½½ç”¨æˆ·ä¸‹è½½APPã€‚ å¼•å¯¼å·²ä¸‹è½½ç”¨æˆ·æ‰“å¼€APPï¼Œä»Žæ•°æ®ä¸Šè¯´ç”¨æˆ·åœç•™åœ¨APPä¸­çš„æ—¶é—´æ›´å¤šäº†ï¼Œæ˜¯åœ¨æé«˜ç”¨æˆ·ç²˜æ€§ï¼›ä»Žä½“éªŒä¸Šè¯´ï¼ŒAPPä½“éªŒæ˜¯è¦æ¯”H5å¥½çš„ã€‚å¼•å¯¼æœªä¸‹è½½ç”¨æˆ·ä¸‹è½½APPï¼Œå¯ä»¥å¢žåŠ æˆ‘ä»¬çš„ç”¨æˆ·é‡ã€‚ ä¸Šé¢å…¶å®žåˆ†åˆ«è§£é‡Šäº† ä»€ä¹ˆæ˜¯å”¤ç«¯ ä»¥åŠ ä¸ºä»€ä¹ˆè¦å”¤ç«¯ï¼Œä¹Ÿå°±æ˜¯ 3Wæ³•åˆ™ ä¸­çš„ What å’Œ Whyï¼Œé‚£ä¹ˆæŽ¥ä¸‹æ¥æˆ‘ä»¬å°±è¦èŠä¸€èŠ How äº†ï¼Œä¹Ÿå°±æ˜¯ å¦‚ä½•å”¤ç«¯ ã€‚ æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹å¸¸è§çš„å”¤ç«¯æ–¹å¼ä»¥åŠä»–ä»¬é€‚ç”¨çš„åœºæ™¯ï¼š å”¤ç«¯åª’ä»‹URL Schemeæ¥æºæˆ‘ä»¬çš„æ‰‹æœºä¸Šæœ‰è®¸å¤šç§å¯†ä¿¡æ¯ï¼Œè”ç³»æ–¹å¼ã€ç…§ç‰‡ã€é“¶è¡Œå¡ä¿¡æ¯â€¦æˆ‘ä»¬ä¸å¸Œæœ›è¿™äº›ä¿¡æ¯å¯ä»¥è¢«æ‰‹æœºåº”ç”¨éšæ„èŽ·å–åˆ°ï¼Œä¿¡æ¯æ³„éœ²çš„å±å®³ç”šå¤§ã€‚æ‰€ä»¥ï¼Œå¦‚ä½•ä¿è¯ä¸ªäººä¿¡æ¯åœ¨è®¾å¤‡æ‰€æœ‰è€…çŸ¥æƒ…å¹¶å…è®¸çš„æƒ…å†µä¸‹è¢«ä½¿ç”¨ï¼Œæ˜¯æ™ºèƒ½è®¾å¤‡çš„æ ¸å¿ƒå®‰å…¨é—®é¢˜ã€‚ å¯¹æ­¤ï¼Œè‹¹æžœä½¿ç”¨äº†åä¸º æ²™ç›’ çš„æœºåˆ¶ï¼šåº”ç”¨åªèƒ½è®¿é—®å®ƒå£°æ˜Žå¯èƒ½è®¿é—®çš„èµ„æºã€‚ä½†æ²™ç›’ä¹Ÿé˜»ç¢äº†åº”ç”¨é—´åˆç†çš„ä¿¡æ¯å…±äº«ï¼ŒæŸç§ç¨‹åº¦ä¸Šé™åˆ¶äº†åº”ç”¨çš„èƒ½åŠ›ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬æ€¥éœ€è¦ä¸€ä¸ªè¾…åŠ©å·¥å…·æ¥å¸®åŠ©æˆ‘ä»¬å®žçŽ°åº”ç”¨é€šä¿¡ï¼Œ URL Scheme å°±æ˜¯è¿™ä¸ªå·¥å…·ã€‚ URL Scheme æ˜¯ä»€ä¹ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ URL çš„ç»„æˆï¼š 1[scheme:][//authority][path][?query][#fragment] æˆ‘ä»¬æ‹¿ https://www.baidu.com æ¥ä¸¾ä¾‹ï¼Œscheme è‡ªç„¶å°±æ˜¯ https äº†ã€‚ å°±åƒç»™æœåŠ¡å™¨èµ„æºåˆ†é…ä¸€ä¸ª URLï¼Œä»¥ä¾¿æˆ‘ä»¬åŽ»è®¿é—®å®ƒä¸€æ ·ï¼Œæˆ‘ä»¬åŒæ ·ä¹Ÿå¯ä»¥ç»™æ‰‹æœºAPPåˆ†é…ä¸€ä¸ªç‰¹æ®Šæ ¼å¼çš„ URLï¼Œç”¨æ¥è®¿é—®è¿™ä¸ªAPPæˆ–è€…è¿™ä¸ªAPPä¸­çš„æŸä¸ªåŠŸèƒ½(æ¥å®žçŽ°é€šä¿¡)ã€‚APPå¾—æœ‰ä¸€ä¸ªæ ‡è¯†ï¼Œå¥½è®©æˆ‘ä»¬å¯ä»¥å®šä½åˆ°å®ƒï¼Œå®ƒå°±æ˜¯ URL çš„ Scheme éƒ¨åˆ†ã€‚ å¸¸ç”¨APPçš„ URL Scheme APP å¾®ä¿¡ æ”¯ä»˜å® æ·˜å® å¾®åš QQ çŸ¥ä¹Ž çŸ­ä¿¡ URL Scheme weixin:// alipay:// taobao:// sinaweibo:// mqq:// zhihu:// sms:// URL Scheme è¯­æ³•ä¸Šé¢è¡¨æ ¼ä¸­éƒ½æ˜¯æœ€ç®€å•çš„ç”¨äºŽæ‰“å¼€ APP çš„ URL Schemeï¼Œä¸‹é¢æ‰æ˜¯æˆ‘ä»¬å¸¸ç”¨çš„ URL Scheme æ ¼å¼ï¼š 12345 è¡Œä¸º(åº”ç”¨çš„æŸä¸ªåŠŸèƒ½) |scheme://[path][?query] | |åº”ç”¨æ ‡è¯† åŠŸèƒ½éœ€è¦çš„å‚æ•° Intentå®‰å“çš„åŽŸç”Ÿè°·æ­Œæµè§ˆå™¨è‡ªä»Ž chrome25 ç‰ˆæœ¬å¼€å§‹å¯¹äºŽå”¤ç«¯åŠŸèƒ½åšäº†ä¸€äº›å˜åŒ–ï¼ŒURL Scheme æ— æ³•å†å¯åŠ¨Androidåº”ç”¨ã€‚ ä¾‹å¦‚ï¼Œé€šè¿‡ iframe æŒ‡å‘ weixin://ï¼Œå³ä½¿ç”¨æˆ·å®‰è£…äº†å¾®ä¿¡ä¹Ÿæ— æ³•æ‰“å¼€ã€‚æ‰€ä»¥ï¼ŒAPPéœ€è¦å®žçŽ°è°·æ­Œå®˜æ–¹æä¾›çš„ intent: è¯­æ³•ï¼Œæˆ–è€…å®žçŽ°è®©ç”¨æˆ·é€šè¿‡è‡ªå®šä¹‰æ‰‹åŠ¿æ¥æ‰“å¼€APPï¼Œå½“ç„¶è¿™å°±æ˜¯é¢˜å¤–è¯äº†ã€‚ Intent è¯­æ³•123456789intent: HOST/URI-path // Optional host #Intent; package=[string]; action=[string]; category=[string]; component=[string]; scheme=[string]; end; å¦‚æžœç”¨æˆ·æœªå®‰è£… APPï¼Œåˆ™ä¼šè·³è½¬åˆ°ç³»ç»Ÿé»˜è®¤å•†åº—ã€‚å½“ç„¶ï¼Œå¦‚æžœä½ æƒ³è¦æŒ‡å®šä¸€ä¸ªå”¤èµ·å¤±è´¥çš„è·³è½¬åœ°å€ï¼Œæ·»åŠ ä¸‹é¢çš„å­—ç¬¦ä¸²åœ¨ end; å‰å°±å¯ä»¥äº†: 1S.browser_fallback_url=[encoded_full_url] ç¤ºä¾‹ä¸‹é¢æ˜¯æ‰“å¼€ Zxing äºŒç»´ç æ‰«æ APP çš„ intentã€‚ 123456intent: //scan/ #Intent; package=com.google.zxing.client.android; scheme=zxing; end; æ‰“å¼€è¿™ä¸ª APP ï¼Œå¯ä»¥é€šè¿‡å¦‚ä¸‹çš„æ–¹å¼ï¼š 1&lt;a href="intent://scan/#Intent;scheme=zxing;package=com.google.zxing.client.android;S.browser_fallback_url=http%3A%2F%2Fzxing.org;end"&gt; Take a QR code &lt;/a&gt; Universal LinkUniversal Link æ˜¯ä»€ä¹ˆUniversal Link æ˜¯è‹¹æžœåœ¨ WWDC2015 ä¸Šä¸º iOS9 å¼•å…¥çš„æ–°åŠŸèƒ½ï¼Œé€šè¿‡ä¼ ç»Ÿçš„ HTTP é“¾æŽ¥å³å¯æ‰“å¼€ APPã€‚å¦‚æžœç”¨æˆ·æœªå®‰è£… APPï¼Œåˆ™ä¼šè·³è½¬åˆ°è¯¥é“¾æŽ¥æ‰€å¯¹åº”çš„é¡µé¢ã€‚ ä¸ºä»€ä¹ˆè¦ä½¿ç”¨ Universal Linkä¼ ç»Ÿçš„ Scheme é“¾æŽ¥æœ‰ä»¥ä¸‹å‡ ä¸ªç—›ç‚¹ï¼š åœ¨ ios ä¸Šä¼šæœ‰ç¡®è®¤å¼¹çª—æç¤ºç”¨æˆ·æ˜¯å¦æ‰“å¼€ï¼Œå¯¹äºŽç”¨æˆ·æ¥è¯´å”¤ç«¯ï¼Œå¤šå‡ºäº†ä¸€æ­¥æ“ä½œã€‚è‹¥ç”¨æˆ·æœªå®‰è£… APP ï¼Œä¹Ÿä¼šæœ‰ä¸€ä¸ªæç¤ºçª—ï¼Œå‘ŠçŸ¥æˆ‘ä»¬ â€œæ‰“ä¸å¼€è¯¥ç½‘é¡µï¼Œå› ä¸ºç½‘å€æ— æ•ˆâ€ ä¼ ç»Ÿ Scheme è·³è½¬æ— æ³•å¾—çŸ¥å”¤ç«¯æ˜¯å¦æˆåŠŸï¼ŒUniversal Link å”¤ç«¯å¤±è´¥å¯ä»¥ç›´æŽ¥æ‰“å¼€æ­¤é“¾æŽ¥å¯¹åº”çš„é¡µé¢ Scheme åœ¨å¾®ä¿¡ã€å¾®åšã€QQæµè§ˆå™¨ã€æ‰‹ç™¾ä¸­éƒ½å·²ç»è¢«ç¦æ­¢ä½¿ç”¨ï¼Œä½¿ç”¨ Universal Link å¯ä»¥é¿å¼€å®ƒä»¬çš„å±è”½ï¼ˆ æˆªæ­¢åˆ° 18å¹´8æœˆ21æ—¥ï¼Œå¾®ä¿¡å’ŒQQæµè§ˆå™¨å·²ç»ç¦æ­¢äº† Universal Linkï¼Œå…¶ä»–ä¸»æµAPPæœªå‘çŽ°æœ‰ç¦æ­¢ ï¼‰ å¦‚ä½•è®© APP æ”¯æŒ Universal Linkæœ‰å¤§é‡çš„æ–‡ç« ä¼šè¯¦ç»†çš„å‘Šè¯‰æˆ‘ä»¬å¦‚ä½•é…ç½®ï¼Œä½ ä¹Ÿå¯ä»¥åŽ»çœ‹å®˜æ–¹æ–‡æ¡£ï¼Œæˆ‘è¿™é‡Œç®€å•çš„å†™ä¸€ä¸ª12345ã€‚ æ‹¥æœ‰ä¸€ä¸ªæ”¯æŒ https çš„åŸŸå åœ¨ å¼€å‘è€…ä¸­å¿ƒ ï¼ŒIdentifiers ä¸‹ AppIDs æ‰¾åˆ°è‡ªå·±çš„ App IDï¼Œç¼–è¾‘æ‰“å¼€ Associated Domains æœåŠ¡ã€‚ æ‰“å¼€å·¥ç¨‹é…ç½®ä¸­çš„ Associated Domains ï¼Œåœ¨å…¶ä¸­çš„ Domains ä¸­å¡«å…¥ä½ æƒ³æ”¯æŒçš„åŸŸåï¼Œå¿…é¡»ä»¥ applinks: ä¸ºå‰ç¼€ é…ç½® apple-app-site-association æ–‡ä»¶ï¼Œæ–‡ä»¶åå¿…é¡»ä¸º apple-app-site-association ï¼Œä¸å¸¦ä»»ä½•åŽç¼€ ä¸Šä¼ è¯¥æ–‡ä»¶åˆ°ä½ çš„ HTTPS æœåŠ¡å™¨çš„ æ ¹ç›®å½• æˆ–è€… .well-known ç›®å½•ä¸‹ Universal Link é…ç½®ä¸­çš„å‘è¿™é‡Œæ”¾ä¸€ä¸‹æˆ‘ä»¬åœ¨é…ç½®è¿‡ç¨‹ä¸­é‡åˆ°çš„å‘ï¼Œå½“ç„¶é¦–å…ˆä½ åœ¨é…ç½®è¿‡ç¨‹ä¸­å¿…é¡»å¾—ä¸¥æ ¼æŒ‰ç…§ä¸Šé¢çš„è¦æ±‚åŽ»åšï¼Œå°¤å…¶æ˜¯åŠ ç²—çš„åœ°æ–¹ã€‚ åŸŸåé—®é¢˜ Universal Link æ”¯æŒçš„åŸŸåæœ€å¤šåªèƒ½æ”¯æŒåˆ°äºŒçº§åŸŸåï¼Œå¦‚æžœä½ ç”¨åˆ°äº†ä¸‰çº§åŸŸåï¼ŒUniversal Link å”¤ç«¯æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚ è·¨åŸŸé—®é¢˜ IOS 9.2 ä»¥åŽï¼Œå¿…é¡»è¦è§¦å‘è·¨åŸŸæ‰èƒ½æ”¯æŒ Universal Link å”¤ç«¯ã€‚ IOS é‚£è¾¹æœ‰è¿™æ ·ä¸€ä¸ªåˆ¤æ–­ï¼Œå¦‚æžœä½ è¦æ‰“å¼€çš„ Universal Link å’Œ å½“å‰é¡µé¢æ˜¯åŒä¸€åŸŸåï¼Œios å°Šé‡ç”¨æˆ·æœ€å¯èƒ½çš„æ„å›¾ï¼Œç›´æŽ¥æ‰“å¼€é“¾æŽ¥æ‰€å¯¹åº”çš„é¡µé¢ã€‚å¦‚æžœä¸åœ¨åŒä¸€åŸŸåä¸‹ï¼Œåˆ™åœ¨ä½ çš„ APP ä¸­æ‰“å¼€é“¾æŽ¥ï¼Œä¹Ÿå°±æ˜¯æ‰§è¡Œå…·ä½“çš„å”¤ç«¯æ“ä½œã€‚ Universal Link æ˜¯ç©ºé¡µé¢ Universal Link æœ¬è´¨ä¸Šæ˜¯ä¸ªç©ºé¡µé¢ï¼Œå¦‚æžœæœªå®‰è£… APPï¼ŒUniversal Link è¢«å½“åšæ™®é€šçš„é¡µé¢é“¾æŽ¥ï¼Œè‡ªç„¶ä¼šè·³åˆ° 404 é¡µé¢ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦å°†å®ƒç»‘å®šåˆ°æˆ‘ä»¬çš„ä¸­è½¬é¡µæˆ–è€…ä¸‹è½½é¡µã€‚ å¦‚ä½•è°ƒç”¨ä¸‰ç§å”¤ç«¯åª’ä»‹é€šè¿‡å‰é¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬å¯ä»¥å‘çŽ°ï¼Œæ— è®ºæ˜¯ URL Scheme è¿˜æ˜¯ Intent æˆ–è€… Universal Link ï¼Œä»–ä»¬éƒ½ç®—æ˜¯ URL ï¼Œåªæ˜¯ URL Scheme å’Œ Intent ç®—æ˜¯ç‰¹æ®Šçš„ URLã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ‹¿ä½¿ç”¨ URL çš„æ–¹æ³•æ¥ä½¿ç”¨å®ƒä»¬ã€‚ iframe1&lt;iframe src="sinaweibo://qrcode"&gt; åœ¨åªæœ‰ URL Scheme çš„æ—¥å­é‡Œï¼Œiframe æ˜¯ä½¿ç”¨æœ€å¤šçš„äº†ã€‚å› ä¸ºåœ¨æœªå®‰è£… app çš„æƒ…å†µä¸‹ï¼Œä¸ä¼šåŽ»è·³è½¬é”™è¯¯é¡µé¢ã€‚ä½†æ˜¯ iframe åœ¨å„ä¸ªç³»ç»Ÿä»¥åŠå„ä¸ªåº”ç”¨ä¸­çš„å…¼å®¹é—®é¢˜è¿˜æ˜¯æŒºå¤šçš„ï¼Œä¸èƒ½å…¨éƒ¨ä½¿ç”¨ URL Schemeã€‚ a æ ‡ç­¾1&lt;a href="intent://scan/#Intent;scheme=zxing;package=com.google.zxing.client.android;end""&gt;æ‰«ä¸€æ‰«&lt;/a&gt; å‰é¢æˆ‘ä»¬æåˆ° Intent åè®®ï¼Œå®˜æ–¹ç»™å‡ºçš„ç”¨ä¾‹ä½¿ç”¨çš„å°±æ˜¯ä½¿ç”¨çš„ a æ ‡ç­¾ï¼Œæ‰€ä»¥æˆ‘ä»¬è·Ÿç€ä¸€èµ·ç”¨å°±å¯ä»¥äº†ã€‚ window.location1window.location.href = 'sinaweibo://qrcode'; URL Scheme åœ¨ ios 9+ ä¸Šè¯¸å¦‚ safariã€UCã€QQæµè§ˆå™¨ä¸­ï¼Œ iframe å‡æ— æ³•æˆåŠŸå”¤èµ· APPï¼Œåªèƒ½é€šè¿‡ window.location æ‰èƒ½æˆåŠŸå”¤ç«¯ã€‚ å½“ç„¶ï¼Œå¦‚æžœæˆ‘ä»¬çš„ app æ”¯æŒ Universal Linkï¼Œios 9+ å°±ç”¨ä¸åˆ° URL Scheme äº†ã€‚è€Œ Universal Link åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œæˆ‘å‘çŽ°åœ¨ qq ä¸­ï¼Œæ— è®ºæ˜¯ iframe å¯¼èˆª è¿˜æ˜¯ a æ ‡ç­¾æ‰“å¼€ åˆæˆ–è€… window.location éƒ½æ— æ³•æˆåŠŸå”¤ç«¯ï¼Œä¸€å¼€å§‹æˆ‘ä»¥ä¸ºæ˜¯ qq å’Œå¾®ä¿¡ä¸€æ ·ç¦æ­¢äº† Universal Link å”¤ç«¯çš„åŠŸèƒ½ï¼Œå…¶å®žä¸ç„¶ï¼Œç™¾èˆ¬è¯•éªŒä¸‹ï¼Œé€šè¿‡ top.location å”¤ç«¯æˆåŠŸäº†ã€‚ åˆ¤æ–­å”¤ç«¯æ˜¯å¦æˆåŠŸå¦‚æžœå”¤ç«¯å¤±è´¥ï¼ˆAPP æœªå®‰è£…ï¼‰ï¼Œæˆ‘ä»¬æ€»æ˜¯è¦åšä¸€äº›å¤„ç†çš„ï¼Œå¯ä»¥æ˜¯è·³è½¬ä¸‹è½½é¡µï¼Œå¯ä»¥æ˜¯ ios ä¸‹è·³è½¬ App Storeâ€¦ ä½†æ˜¯Js å¹¶ä¸èƒ½æä¾›ç»™æˆ‘ä»¬èŽ·å– APP å”¤èµ·çŠ¶æ€çš„èƒ½åŠ›ï¼ŒAndroid Intent ä»¥åŠ Universal Link å€’æ˜¯ä¸ç”¨æ‹…å¿ƒï¼Œå®ƒä»¬ä¿©çš„è‡ªèº«æœºåˆ¶å…è®¸å®ƒä»¬å”¤ç«¯å¤±è´¥åŽç›´æŽ¥å¯¼èˆªè‡³ç›¸åº”çš„é¡µé¢ï¼Œä½†æ˜¯ URL Scheme å¹¶ä¸å…·å¤‡è¿™æ ·çš„èƒ½åŠ›ï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½é€šè¿‡ä¸€äº›å¾ˆ hack çš„æ–¹å¼æ¥å®žçŽ° APP å”¤èµ·æ£€æµ‹åŠŸèƒ½ã€‚ 123456789101112131415161718192021const initialTime = new Date();let counter = 0;let waitTime = 0;const checkOpen = setInterval(() =&gt; &#123; count++; waitTime = new Date() - initialTime; if (waitTime &gt; 2500) &#123; clearInterval(checkOpen); cb(); &#125; if (counter &lt; 100) return; const hide = document.hidden || document.webkitHidden; if (!hide) &#123; cb(); // å”¤ç«¯å¤±è´¥çš„å›žè°ƒå‡½æ•° &#125;&#125;, 20); APP å¦‚æžœè¢«å”¤èµ·çš„è¯ï¼Œé¡µé¢å°±ä¼šè¿›å…¥åŽå°è¿è¡Œï¼ŒsetInterval åœ¨ ios ä¸­ä¸ä¼šåœæ­¢è¿è¡Œï¼Œåœ¨ android ä¸­åœæ­¢è¿è¡Œã€‚ æ¯ 20ms æ‰§è¡Œä¸€æ¬¡ï¼Œæ‰§è¡Œ 100æ¬¡ åœ¨é¡µé¢ä¸­å®žé™…è€—è´¹ä¸Ž 2000 ms ä¸ä¼šç›¸å·®å¤šå°‘ã€‚ æˆ‘ä»¬çš„åˆ¤æ–­æ¡ä»¶æ¯”é¢„æœŸæ—¶é—´å¤šè®¾ç½®äº† 500msï¼Œæ‰€ä»¥å¦‚æžœå®‰å“ä¸­ setInterval å†…çš„å‡½æ•°æ‰§è¡Œ 100 æ¬¡ä»¥å†…æ‰€è´¹æ—¶é—´è¶…è¿‡ 2500msï¼Œåˆ™è¯´æ˜Ž APP å”¤èµ·æˆåŠŸï¼Œåä¹‹åˆ™ä»£è¡¨å¤±è´¥ã€‚ æˆ‘ä»¬é€šè¿‡ document.hidden å’Œ document.webkitHidden å±žæ€§æ¥åˆ¤æ–­ APP åœ¨ ios ä¸­æ˜¯å¦è¢«æ­£å¸¸å”¤èµ·ï¼Œ2000ms å†…ï¼Œé¡µé¢è½¬å…¥åŽå°è¿è¡Œï¼Œdocument.hidden ä¼šè¿”å›ž trueï¼Œä»£è¡¨å”¤ç«¯æˆåŠŸï¼Œåä¹‹åˆ™ä»£è¡¨å¤±è´¥ã€‚ æ²¡æœ‰å®Œç¾Žçš„æ–¹æ¡ˆé€è¿‡ä¸Šé¢çš„å‡ ä¸ªç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥å‘çŽ°ï¼Œæ— è®ºæ˜¯ å”¤ç«¯åª’ä»‹ ã€ è°ƒç”¨å”¤ç«¯åª’ä»‹ è¿˜æ˜¯ åˆ¤æ–­å”¤ç«¯ç»“æžœ éƒ½æ²¡æœ‰ä¸€ä¸ªåå…¨åç¾Žçš„æ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨ä»£ç å±‚ä¸Šèƒ½åšçš„åªæ˜¯åœ¨ç¡®ä¿æœ€å¸¸ç”¨çš„åœºæ™¯ï¼ˆæ¯”å¦‚ å¾®ä¿¡ã€å¾®åšã€UC ç­‰ï¼‰å”¤ç«¯æ— è¯¯çš„æƒ…å†µä¸‹ï¼Œæœ€å¤§åŒ–çš„å…¼å®¹å‰©ä½™çš„åœºæ™¯ã€‚ å¥½çš„ï¼Œæˆ‘ä»¬æŽ¥ä¸‹æ¥æ‰¯ä¸€äº›ä»£ç ä»¥å¤–çš„ï¼Œè®©æˆ‘ä»¬çš„ APP èƒ½å¤Ÿåœ¨æ›´å¤šçš„å¹³å°å”¤èµ·ã€‚ å¾®ä¿¡ã€å¾®åšã€æ‰‹ç™¾ã€QQæµè§ˆå™¨ç­‰ã€‚ è¿™äº›åº”ç”¨èƒ½é˜»æ­¢å”¤ç«¯æ˜¯å› ä¸ºå®ƒä»¬ç›´æŽ¥å±è”½æŽ‰äº† URL Scheme ã€‚æŽ¥ä¸‹æ¥å¯èƒ½å°±æœ‰çœ‹å®˜ç–‘æƒ‘äº†ï¼Œå¾®ä¿¡ä¸­æ˜¯å¯ä»¥æ‰“å¼€å¤§ä¼—ç‚¹è¯„çš„å‘€ï¼Œå¾®åšé‡Œé¢å¯ä»¥æ‰“å¼€ä¼˜é…·å‘€ï¼Œé‚£æ˜¯å¦‚ä½•å®žçŽ°çš„å‘¢ï¼Ÿ å®ƒä»¬éƒ½å„è‡ªç»´æŠ¤ç€ä¸€ä¸ªç™½åå•ï¼Œå¦‚æžœä½ çš„åŸŸååœ¨ç™½åå•å†…ï¼Œé‚£è¿™ä¸ªåŸŸåä¸‹æ‰€æœ‰çš„é¡µé¢å‘èµ·çš„ URL Scheme å°±éƒ½ä¼šè¢«å…è®¸ã€‚å°±åƒå¾®ä¿¡ï¼Œå¦‚æžœä½ æ˜¯è…¾è®¯çš„â€œå®¶å±žâ€ï¼Œä½ å°±å¯ä»¥åŠ å…¥ç™½åå•äº†ï¼Œå¾®ä¿¡çš„ç™½åå•ä¸€èˆ¬åªåŒ…å«ç€â€œå®¶å±žâ€ï¼Œé™¤æ­¤å¤–å¾ˆéš¾ç”³è¯·åˆ°ç™½åå•èµ„è´¨ã€‚ä½†æ˜¯å¾®åšä¹‹ç±»çš„éƒ½æ˜¯å¯ä»¥è”ç³»ä»–ä»¬çš„æ¸ é“ç«¥éž‹è¿›è¡Œç”³è¯·çš„ï¼Œåªæ˜¯æ¡ä»¶å„ä¸ç›¸åŒï¼Œæ¯”å¦‚å¾®åšçš„å°±æ˜¯åœ¨ä½ çš„ APP ä¸­æ·»åŠ æ‰“å¼€å¾®åšçš„å…¥å£ï¼Œä¸‰ä¸ªæœˆå†…å”¤èµ·è¶…è¿‡ 100w æ¬¡ï¼Œå°±å¯ä»¥åŠ å…¥ç™½åå•äº†ã€‚ è…¾è®¯åº”ç”¨å®ç›´æŽ¥æ‰“å¼€ APP çš„æŸä¸ªåŠŸèƒ½ åˆšåˆšæˆ‘ä»¬è¯´åˆ°ï¼Œå¦‚æžœä½ ä¸æ˜¯å¾®ä¿¡çš„å®¶å±žï¼Œé‚£ä½ æ˜¯å¾ˆéš¾è¿›å…¥ç™½åå•çš„ï¼Œæ‰€ä»¥åœ¨å®‰å“ä¸­æˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯ç›´æŽ¥æ‰“å¼€è…¾è®¯åº”ç”¨å®ï¼Œios ä¸­ ç›´æŽ¥æ‰“å¼€ App Storeã€‚ç‚¹å‡»è…¾è®¯åº”ç”¨å®ä¸­çš„â€œæ‰“å¼€â€æŒ‰é’®ï¼Œå¯ä»¥ç›´æŽ¥å”¤èµ·æˆ‘ä»¬çš„ APPï¼Œä½†æ˜¯æ— æ³•æ‰“å¼€ APP ä¸­çš„æŸä¸ªåŠŸèƒ½ï¼ˆå°±æ˜¯æ— æ³•æ‰“å¼€æŒ‡å®šé¡µé¢ï¼‰ã€‚ è…¾è®¯åº”ç”¨å®å¯¹å¤–å¼€æ”¾äº†ä¸€ä¸ªå«åš APP Link çš„ç”³è¯·ï¼Œåªè¦ä½ ç”³è¯·äº† APP Linkï¼Œå°±å¯ä»¥é€šè¿‡åœ¨æ‰“å¼€åº”ç”¨å®çš„æ—¶å€™åœ¨åº”ç”¨å®åœ°å€åŽé¢æ·»åŠ ä¸Š &amp;android_schema={your_scheme} ï¼Œæ¥æ‰“å¼€æŒ‡å®šçš„é¡µé¢äº†ã€‚ å¼€ç®±å³ç”¨çš„callapp-libä¿¡æ¯é‡å¾ˆå¤§ï¼å„ç§é—®é¢˜å¾—è‡ªå·±è¶Ÿå‘éªŒè¯ï¼å†…å¿ƒå¾ˆå´©æºƒï¼ ä¸ç”¨æ„ï¼Œå·²ç»ä¸ºä½ å‡†å¤‡å¥½äº†è¯æ–¹ï¼Œåªéœ€ç…§æ–¹æŠ“è¯å³å¯ðŸ˜ â€”â€” npm åŒ… callapp-lib å®ƒèƒ½åœ¨å¤§éƒ¨åˆ†çš„çŽ¯å¢ƒä¸­æˆåŠŸå”¤ç«¯ï¼Œè€Œä¸”ç‚’é¸¡ç®€å•å•Šï¼Œæ‹¿è¿‡åŽ»å°±å¯ä»¥ç”¨å•Šï¼Œè¿˜æ”¯æŒå¾ˆå¤šæ‰©å±•åŠŸèƒ½å•Šï¼Œå¿«æ¥çž…çž…å®ƒçš„ æ–‡æ¡£ å•Š~~~ å‚è€ƒæ–‡ç«  æµè§ˆå™¨ä¸­å”¤èµ· native appï¼Œå¦åˆ™è·³è½¬åˆ°åº”ç”¨å•†åŸŽä¸‹è½½ h5å”¤èµ·app URL Schemes ä½¿ç”¨è¯¦è§£ Android Intents with Chrome å¸¸ç”¨URL Scheme Universal Link å‰ç«¯éƒ¨ç½²é‡‡å‘è®° Support Universal Links Universal Linkæ˜¯ä¸ªéª—å­]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Stream æ‰‹å†Œ[è¯‘]]]></title>
      <url>%2F2017%2F10%2F15%2FStream-handbook%2F</url>
      <content type="text"><![CDATA[åŽŸæ–‡é“¾æŽ¥ï¼šhttps://github.com/substack/stream-handbook#duplex ç®€ä»‹ â€œWe should have some ways of connecting programs like garden hoseâ€“screw inanother segment when it becomes necessary to massage data inanother way. This is the way of IO also.â€â€” Doug McIlroy. October 11, 1964 Streamsåœ¨Unixæ—©æœŸå°±æ¥åˆ°æˆ‘ä»¬èº«è¾¹ï¼Œå¹¶ä¸”åœ¨è¿‡åŽ»çš„å‡ åå¹´å·²ç»è¯æ˜Žäº†å®ƒä»¬æ˜¯ä¸€ä¸ªå¯ä¿¡çš„æ–¹å¼â€“é€šè¿‡å°éƒ¨ä»¶æ¥ç»„æˆå¤§ç³»ç»Ÿï¼Œå°éƒ¨ä»¶åªéœ€è¦åšå¥½æŸä¸€ä»¶äº‹ã€‚åœ¨Unixä¸­ï¼ŒStreamsç”±shellç”¨|ç®¡é“å®žçŽ°ã€‚åœ¨nodeä¸­ï¼Œå†…ç½®çš„streamæ¨¡å—ç”±æ ¸å¿ƒåº“ä½¿ç”¨å¹¶ä¸”å¯ä»¥ä¾›user-spaceæ¨¡å—ä½¿ç”¨ã€‚å’ŒUnixç±»ä¼¼ï¼Œnodeä¸­Streamæ¨¡å—çš„ä¸»è¦ç»„æˆè¿ç®—ç¬¦åä¸ºpipe(),ä½ ä¹Ÿå¯ä»¥å…è´¹èŽ·å¾—ä¸€ä¸ªèƒŒåŽ‹æœºåˆ¶æ¥èŠ‚æµå¯¹ä¸€ä¸ªç¼“æ…¢æŽ¥æ”¶è€…çš„å†™å…¥ã€‚ æµå¯ä»¥å¸®ä½ å…å—å›°æ‰°ï¼Œå› ä¸ºå®ƒä»¬å°†å®žçŽ°æ–¹å¼é™åˆ¶ä¸ºå¯ä»¥é‡å¤ä½¿ç”¨çš„ä¸€è‡´çš„æŽ¥å£ã€‚ç„¶åŽï¼Œæ‚¨å¯ä»¥å°†ä¸€ä¸ªæµçš„è¾“å‡ºæ’å…¥å¦ä¸€ä¸ªæµçš„è¾“å…¥ï¼Œå¹¶ä½¿ç”¨å¯¹æµè¿›è¡ŒæŠ½è±¡è¿ç®—çš„åº“æ¥è¿›è¡Œæ›´é«˜çº§åˆ«çš„æµæŽ§åˆ¶ã€‚ Streamæ˜¯å°ç¨‹åºè®¾è®¡å’Œunixå“²å­¦çš„é‡è¦ç»„æˆéƒ¨åˆ†ï¼Œä½†è¿˜æœ‰è®¸å¤šå…¶ä»–é‡è¦çš„æŠ½è±¡æ¦‚å¿µå€¼å¾—è€ƒè™‘ã€‚åªè¦è®°ä½ï¼ŒæŠ€æœ¯å€ºåŠ¡æ˜¯æ•Œäººï¼Œå¹¶å¯»æ±‚è§£å†³é—®é¢˜çš„æœ€ä½³æŠ½è±¡æ–¹æ³•ã€‚ ä¸ºä»€ä¹ˆä½ éœ€è¦ä½¿ç”¨ streamsnodeä¸­I/Oæ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥ä¸Žç£ç›˜å’Œç½‘ç»œäº¤äº’æ¶‰åŠå°†å›žè°ƒä¼ é€’ç»™å‡½æ•°ã€‚ 123456789var http = require('http');var fs = require('fs');var server = http.createServer(function (req, res) &#123; fs.readFile(__dirname + '/data.txt', function (err, data) &#123; res.end(data); &#125;);&#125;);server.listen(8000); è¿™æ®µä»£ç å¯ä»¥ç”Ÿæ•ˆä½†æ˜¯å¤ªç¬¨é‡äº†ï¼Œåœ¨å°†ç»“æžœå†™å›žå®¢æˆ·ç«¯ä¹‹å‰ï¼Œå®ƒä¼šä¸ºæ¯ä¸ªè¯·æ±‚ç¼“å­˜ data.txt åˆ°å†…å­˜ä¸­ã€‚å¦‚æžœ data.txt éžå¸¸å¤§ï¼Œä½ çš„ç¨‹åºå¯èƒ½ä¼šå¾ˆåƒå†…å­˜ï¼Œå› ä¸ºå®ƒåŒæ—¶æœåŠ¡äºŽå¤§é‡ç”¨æˆ·ï¼Œç‰¹åˆ«æ˜¯å¯¹äºŽæ…¢é€Ÿè¿žæŽ¥çš„ç”¨æˆ·ã€‚ è¿™æ ·çš„ç”¨æˆ·ä½“éªŒæžå…¶ç³Ÿç³•ï¼Œå› ä¸ºåœ¨ç”¨æˆ·å¯ä»¥æŽ¥æ”¶åˆ°ä»»ä½•å†…å®¹ä¹‹å‰ï¼Œéœ€è¦ç­‰å¾…æ•´ä¸ªæ–‡ä»¶ç¼“å­˜è‡³å†…å­˜ã€‚ å¹¸è¿çš„æ˜¯ï¼Œè¿™ä¸¤ä¸ªå‚æ•°(req,res)éƒ½æ˜¯æµï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ç”¨æ›´å¥½çš„æ–¹å¼æ¥ä¹¦å†™ä»£ç ï¼Œé€šè¿‡ä½¿ç”¨fs.createReadStream()ä»£æ›¿ fs.readFile(): 12345678var http = require('http');var fs = require('fs');var server = http.createServer(function (req, res) &#123; var stream = fs.createReadStream(__dirname + '/data.txt'); stream.pipe(res);&#125;);server.listen(8000); è¿™é‡Œpipe()å…³å¿ƒçš„æ˜¯ç›‘å¬fs.createReadStream()çš„dataå’Œendäº‹ä»¶ã€‚è¿™æ®µä»£ç ä¸ä»…æ›´å¹²å‡€ï¼Œè€Œä¸”çŽ°åœ¨data.txtæ–‡ä»¶å°†è¢«ä»Žç£ç›˜æŽ¥æ”¶ä¸€æ¬¡å†™å…¥å®¢æˆ·ç«¯ä¸€æ¬¡ã€‚ ä½¿ç”¨.pipe()ä¹Ÿå…·æœ‰å…¶ä»–å¥½å¤„ï¼Œä¾‹å¦‚è‡ªåŠ¨å¤„ç†èƒŒåŽ‹ï¼Œä»¥ä¾¿å½“è¿œç¨‹å®¢æˆ·ç«¯å¤„äºŽéžå¸¸æ…¢æˆ–é«˜å»¶è¿Ÿçš„è¿žæŽ¥æ—¶ï¼Œnodeä¸å¿…å°†å—ç¼“å­˜åˆ°å†…å­˜ä¸­ã€‚ æƒ³åŽ‹ç¼©ï¼Ÿè¿˜æœ‰æµæ¨¡å—å‘¢ï¼ 123456789var http = require('http');var fs = require('fs');var oppressor = require('oppressor');var server = http.createServer(function (req, res) &#123; var stream = fs.createReadStream(__dirname + '/data.txt'); stream.pipe(oppressor(req)).pipe(res);&#125;);server.listen(8000); çŽ°åœ¨æˆ‘ä»¬çš„æ–‡ä»¶å·²ç»ä¸ºæµè§ˆå™¨è¿›è¡ŒåŽ‹ç¼©äº†ï¼Œå®ƒæ”¯æŒgzipå’Œdeflateã€‚æˆ‘ä»¬å¯ä»¥è®©oppressorå¤„ç†æ‰€æœ‰å†…å®¹ç¼–ç çš„ä¸œè¥¿ã€‚ ä¸€æ—¦ä½ å­¦ä¹ äº† stream çš„ apiï¼Œä½ å°±èƒ½åƒæ‹¼æŽ¥ä¹é«˜ç§¯æœ¨å’Œæ©¡èƒ¶è½¯ç®¡ä¸€æ ·ç»„åˆè¿™äº›æµæ¨¡å—ï¼Œè€Œä¸æ˜¯è®°ä½å¦‚ä½•é€šè¿‡ä¸é è°±çš„éžæµå¼çš„è‡ªå®šä¹‰ API æ¥ä¼ é€’æ•°æ®ã€‚ Streams ä½¿å¾—åœ¨nodeä¸­å˜æˆæ›´ç®€å•ï¼Œä¼˜é›…ï¼Œå¯ç»„åˆ(è‡ªç”±)ã€‚ basicsè¿™é‡Œæœ‰5ç§æµï¼šå¯è¯»ï¼Œå¯å†™ï¼Œè½¬æ¢ï¼ŒåŒå·¥å’Œâ€œç»å…¸â€ã€‚ pipeæ‰€æœ‰çš„ä¸åŒç±»åž‹çš„æµéƒ½é€šè¿‡pipe()æ¥é…å¯¹è¾“å…¥ä¸Žè¾“å‡ºã€‚ pipe()åªæ˜¯ä¸€ä¸ªèŽ·å–å¯è¯»æºæµsrcå¹¶å°†è¾“å‡ºæŒ‚æŽ¥åˆ°ä¸€ä¸ªç›®æ ‡å¯å†™æµdstçš„å‡½æ•°ã€‚ 1src.pipe(dst) .pipe(dst)è¿”å›ždstä»¥ä¾¿ä½ å¯ä»¥å°†å¤šä¸ªpipe()è¿žæŽ¥åœ¨ä¸€èµ·ã€‚ 1a.pipe(b).pipe(c).pipe(d) å°±åƒè¿™æ ·ï¼š 123a.pipe(b);b.pipe(c);c.pipe(d); è¿™ä¸ªéžå¸¸åƒä½ å¯èƒ½ä¼šé€šè¿‡å‘½ä»¤è¡Œä¸€èµ·ç®¡ç†ç¨‹åºçš„æ–¹å¼: 1a | b | c | d node é™¤å¤–è€Œä¸æ˜¯shellï¼ å¯è¯»æµå¯è¯»æµæä¾›ä¸€ä¸ªå¯ä»¥é€šè¿‡è°ƒç”¨.pipe()è½¬æ¢æˆå¯å†™ï¼Œè½¬æ¢ï¼ŒåŒå·¥æµçš„æ•°æ®ã€‚ åˆ›å»ºä¸€ä¸ªå¯è¯»æµè®©æˆ‘ä»¬æ¥åˆ›é€ ä¸€ä¸ªå¯è¯»æµï¼ 12345678var Readable = require('stream').Readable;var rs = new Readable;rs.push('beep ');rs.push('boop\n');rs.push(null);rs.pipe(process.stdout); 12$ node read0.jsbeep boop rs.push(null)å‘Šè¯‰æŽ¥æ”¶è€…rså·²ç»å®Œæˆäº†æ•°æ®è¾“å‡ºã€‚ æ³¨æ„ï¼Œæˆ‘ä»¬åœ¨å°†å¯è¯»æµrsä¼ è¾“åˆ°process.stdoutå‰å°†å†…å®¹å†…å®¹æŽ¨é€åˆ°rsï¼Œä½†å®Œæ•´çš„æ¶ˆæ¯ä»èƒ½å†™å…¥ã€‚ è¿™æ˜¯å› ä¸ºå½“ä½ .push()åˆ°å¯è¯»æµæ—¶ï¼Œä½ æŽ¨é€çš„é‚£äº›å—éƒ½è¢«ç¼“å­˜äº†ï¼Œç›´åˆ°æŽ¥æ”¶è€…å‡†å¤‡å¥½è¯»å–å®ƒä»¬ã€‚ ä½†æ˜¯ï¼Œå¦‚æžœæˆ‘ä»¬èƒ½å¤Ÿé¿å…å°†æ•°æ®ä¸€èµ·ç¼“å­˜å¹¶ä¸”åªåœ¨æŽ¥æ”¶è€…éœ€è¦çš„æ—¶å€™å†ç”Ÿæˆæ•°æ®ï¼Œå¾ˆå¤šæ—¶å€™ä¼šæ›´å¥½ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡å®šä¹‰ä¸€ä¸ª._readå‡½æ•°æ¥æŒ‰éœ€æŽ¨é€å—ï¼š 12345678910var Readable = require('stream').Readable;var rs = Readable();var c = 97;rs._read = function () &#123; rs.push(String.fromCharCode(c++)); if (c &gt; 'z'.charCodeAt(0)) rs.push(null);&#125;;rs.pipe(process.stdout); 12$ node read1.jsabcdefghijklmnopqrstuvwxyz è¿™é‡Œæˆ‘ä»¬ä¼ é€’äº†å­—æ¯aåˆ°zï¼Œä½†æ˜¯åªåœ¨æŽ¥æ”¶è€…å‡†å¤‡æŽ¥å—å®ƒä»¬çš„æ—¶å€™ã€‚ _readå‡½æ•°åŒæ ·ä¼šæŽ¥æ‰‹ä¸€ä¸ªä¸´æ—¶çš„sizeå‚æ•°ä½œä¸ºä»–çš„ç¬¬ä¸€ä¸ªå…¥å‚æ¥æŒ‡å®šæŽ¥æ”¶è€…æƒ³è¦è¯»å–å¤šå°‘ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯ä½ çš„å¯è¯»æµå¯ä»¥å¿½ç•¥sizeï¼Œåªè¦å®ƒæƒ³ã€‚ æ³¨æ„ï¼Œä½ åŒæ ·å¯ä»¥ä½¿ç”¨util.inherits()å­ç±»åŒ–ä¸€ä¸ªå¯è¯»æµï¼Œä½†æ˜¯è¯¥æ–¹æ³•å¹¶æ²¡æœ‰ä¸€ä¸ªå¯ä»¥å¾ˆå¥½ç†è§£å®ƒçš„ä¾‹å­ã€‚ ä¸ºäº†å±•ç¤ºæˆ‘ä»¬çš„ _read å‡½æ•°åªåœ¨è¢«æŽ¥æ”¶è€…è¯·æ±‚æ—¶æ‰è°ƒç”¨ï¼Œæˆ‘ä»¬å¯ä»¥ç¨å¾®ä¿®æ”¹ä¸€ä¸‹æˆ‘ä»¬çš„å¯è¯»æµä»£ç æ¥æ·»åŠ ä¸€ä¸ªå»¶è¿Ÿï¼š 12345678910111213141516171819var Readable = require('stream').Readable;var rs = Readable();var c = 97 - 1;rs._read = function () &#123; if (c &gt;= 'z'.charCodeAt(0)) return rs.push(null); setTimeout(function () &#123; rs.push(String.fromCharCode(++c)); &#125;, 100);&#125;;rs.pipe(process.stdout);process.on('exit', function () &#123; console.error('\n_read() called ' + (c - 97) + ' times');&#125;);process.stdout.on('error', process.exit); è¿è¡Œè¿™ä¸ªç¨‹åºæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå½“æˆ‘ä»¬åªè¯·æ±‚5ä¸ªå­—èŠ‚çš„è¾“å‡ºæ—¶ï¼Œ_read()è¢«è°ƒç”¨äº†äº”æ¬¡ã€‚ 123$ node read2.js | head -c5abcde_read() called 5 times setTimeoutå»¶è¿Ÿæ˜¯å¿…é¡»çš„ï¼Œå› ä¸ºæ“ä½œç³»ç»Ÿéœ€è¦ä¸€ç‚¹æ—¶é—´æ¥å‘æˆ‘ä»¬å‘é€ä¸€äº›ç›¸å…³ä¿¡å·ä»¥å…³é—­ç®¡é“ã€‚ process.stdout.on(&#39;error&#39;, fn)å¤„ç†å™¨ä¹Ÿæ˜¯å¿…è¦çš„ï¼Œå› ä¸ºå½“headå¯¹æˆ‘ä»¬çš„ç¨‹åºè¾“å‡ºä¸å†æœ‰å…´è¶£æ—¶ï¼Œæ“ä½œç³»ç»Ÿå‘é€ä¸€ä¸ª SIGPIPE æˆ‘ä»¬çš„è¿›ç¨‹ï¼Œåœ¨process.stdoutä¸Šä½œä¸ºEPIPEé”™è¯¯è¢«å‘å‡º å½“ä¸Žå¤–éƒ¨æ“ä½œç³»ç»Ÿç®¡é“äº¤äº’æ—¶ï¼Œè¿™äº›é¢å¤–çš„å¤æ‚æ€§æ˜¯å¿…éœ€çš„ï¼Œä½†æ˜¯å½“æˆ‘ä»¬ä¸Žnodeæµç›´æŽ¥äº¤äº’æ—¶ï¼Œå®ƒä»¬æ˜¯è‡ªåŠ¨çš„ã€‚ å¦‚æžœè¦åˆ›å»ºä¸€ä¸ªå¯è¯»å–çš„æµï¼Œå¯ä»¥æŽ¨é€ä»»æ„å€¼è€Œä¸æ˜¯ä»…ä»…æ˜¯å­—ç¬¦ä¸²å’Œç¼“å­˜ï¼Œè¯·ç¡®ä¿ä½¿ç”¨Readable({ objectMode: true })æ¥åˆ›å»ºå¯è¯»æµ ã€‚ ä½¿ç”¨å¯è¯»æµå¤§å¤šæ•°æ—¶å€™ï¼Œä¼ è¾“ä¸€ä¸ªå¯è¯»æµè½¬æ¢æˆå…¶ä»–çš„æµæˆ–è€…ä¸€ä¸ªç”±ç±»ä¼¼ through or concat-stream çš„æ¨¡å—åˆ›å»ºçš„æµæ˜¯å¾ˆå®¹æ˜“çš„ï¼Œä½†æœ‰æ—¶å€™ç›´æŽ¥ä½¿ç”¨å¯è¯»æµæ˜¯æœ‰ç”¨çš„ã€‚ 1234process.stdin.on('readable', function () &#123; var buf = process.stdin.read(); console.dir(buf);&#125;); 12345$ (echo abc; sleep 1; echo def; sleep 1; echo ghi) | node consume0.js &lt;Buffer 61 62 63 0a&gt;&lt;Buffer 64 65 66 0a&gt;&lt;Buffer 67 68 69 0a&gt;null å½“æ•°æ®å¯ç”¨æ—¶ï¼Œâ€™readableâ€™äº‹ä»¶è§¦å‘ï¼Œä½ å¯ä»¥è°ƒç”¨.read() ä»Žç¼“å†²åŒºä¸­èŽ·å–ä¸€äº›æ•°æ®ã€‚ å½“æµå®ŒæˆåŽï¼Œ.read()è¿”å›žnullï¼Œå› ä¸ºæ²¡æœ‰æ›´å¤šçš„å­—èŠ‚å¯èŽ·å–äº†ã€‚ æ‚¨è¿˜å¯ä»¥å‘Šè¯‰.read(n)è¿”å›žnå­—èŠ‚çš„æ•°æ®ã€‚è¯»å–å¤šä¸ªå­—èŠ‚åªæ˜¯å»ºè®®ï¼Œå¯¹äºŽå¯¹è±¡æµä¸èµ·ä½œç”¨ï¼Œä½†æ‰€æœ‰æ ¸å¿ƒæµéƒ½æ”¯æŒå®ƒã€‚ ä»¥ä¸‹æ˜¯ä½¿ç”¨.read(n)å°†æ ‡å‡†è¾“å…¥ç¼“å­˜ä¸º3å­—èŠ‚å—çš„ç¤ºä¾‹ï¼š 1234process.stdin.on('readable', function () &#123; var buf = process.stdin.read(3); console.dir(buf);&#125;); è¿è¡Œè¿™ä¸ªä¾‹å­ï¼Œå®ƒä¼šç»™æˆ‘ä»¬æä¾›ä¸å®Œæ•´çš„æ•°æ®ã€‚ 1234$ (echo abc; sleep 1; echo def; sleep 1; echo ghi) | node consume1.js &lt;Buffer 61 62 63&gt;&lt;Buffer 0a 64 65&gt;&lt;Buffer 66 0a 67&gt; è¿™æ˜¯å› ä¸ºå†…éƒ¨ç¼“å­˜åŒºæœ‰é¢å¤–çš„æ•°æ®ç•™å­˜ã€‚æˆ‘ä»¬éœ€è¦ç»™èŠ‚ç‚¹ä¸€ä¸ªâ€œkickâ€æ¥å‘Šè¯‰å®ƒï¼Œæˆ‘ä»¬å¯¹å·²è¯»å–çš„3ä¸ªå­—èŠ‚ä»¥å¤–çš„æ›´å¤šæ•°æ®æ„Ÿå…´è¶£ã€‚ä¸€ä¸ªç®€å•çš„.read(0)å¯ä»¥è¾¾æˆï¼š12345process.stdin.on('readable', function () &#123; var buf = process.stdin.read(3); console.dir(buf); process.stdin.read(0);&#125;); çŽ°åœ¨æˆ‘ä»¬çš„ä»£ç å¦‚æˆ‘ä»¬é¢„æœŸçš„ä¸€æ ·ä»¥3å­—èŠ‚çš„å—åœ¨è¿è¡Œï¼ 12345$ (echo abc; sleep 1; echo def; sleep 1; echo ghi) | node consume2.js &lt;Buffer 61 62 63&gt;&lt;Buffer 0a 64 65&gt;&lt;Buffer 66 0a 67&gt;&lt;Buffer 68 69 0a&gt; ä½ åŒæ ·å¯ä»¥ä½¿ç”¨.unshift()æ”¾å›žæ•°æ®ï¼Œè¿™æ ·çš„è¯å½“.read()ç»™åˆ°æ›´å¤šä½ æƒ³è¦çš„æ•°æ®æ—¶ï¼Œç›¸åŒçš„è¯»å–é€»è¾‘å°±ä¼šè§¦å‘ã€‚ ä½¿ç”¨.unshift()ä½¿æˆ‘ä»¬é¿å…ç”Ÿæˆä¸å¿…è¦çš„ç¼“å†²åŒºå‰¯æœ¬ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥æž„å»ºä¸€ä¸ªå¯è¯»çš„è§£æžå™¨æ¥åˆ†å‰²æ¢è¡Œç¬¦ï¼š 12345678910111213141516var offset = 0;process.stdin.on('readable', function () &#123; var buf = process.stdin.read(); if (!buf) return; for (; offset &lt; buf.length; offset++) &#123; if (buf[offset] === 0x0a) &#123; console.dir(buf.slice(0, offset).toString()); buf = buf.slice(offset + 1); offset = 0; process.stdin.unshift(buf); return; &#125; &#125; process.stdin.unshift(buf);&#125;); 1234567891011$ tail -n +50000 /usr/share/dict/american-english | head -n10 | node lines.js 'hearties''heartiest''heartily''heartiness''heartiness\'s''heartland''heartland\'s''heartlands''heartless''heartlessly' ä½†æ˜¯ï¼Œä½ åº”è¯¥ä½¿ç”¨nodeä¸­è¯¸å¦‚ split æ­¤ç±»çš„æ¨¡å—è€Œä¸æ˜¯é©±åŠ¨ä½ è‡ªå·±çš„è¡Œè§£æžé€»è¾‘ã€‚ å¯å†™æµä¸€ä¸ªå¯å†™æµæ˜¯ä¸€ä¸ªä½ å¯ä»¥ä¼ è¾“è¿›çš„æµè€Œä¸æ˜¯ä¼ è¾“å‡ºåŽ»çš„æµï¼š 1src.pipe(writableStream) åˆ›å»ºä¸€ä¸ªå¯å†™æµåªéœ€å®šä¹‰ä¸€ä¸ª._write(chunk, enc, next)å‡½æ•°ï¼Œç„¶åŽæ‚¨å¯ä»¥ä¼ è¾“å¯è¯»æµè¿›æ¥ï¼š 12345678var Writable = require('stream').Writable;var ws = Writable();ws._write = function (chunk, enc, next) &#123; console.dir(chunk); next();&#125;;process.stdin.pipe(ws); 123$ (echo beep; sleep 1; echo boop) | node write0.js &lt;Buffer 62 65 65 70 0a&gt;&lt;Buffer 62 6f 6f 70 0a&gt; ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œchunk æ˜¯ä¸€ä¸ªè¢«æä¾›è€…å†™å…¥çš„æ•°æ®ã€‚ ç¬¬äºŒä¸ªå‚æ•°encæ˜¯ä¸€ä¸ªå¸¦æœ‰å­—ç¬¦ä¸²ç¼–ç çš„å­—ç¬¦ä¸²ï¼Œä½†åªæœ‰å½“ opts.decodeString æ˜¯ falseä¸”å·²ç»å†™å…¥äº†ä¸€ä¸ªå­—ç¬¦ä¸²æ—¶æ‰è¿™æ ·ã€‚ ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œnext(err) æ˜¯å‘Šè¯‰ä½¿ç”¨è€…ä»–ä»¬å¯ä»¥å†™å…¥æ›´å¤šæ•°æ®çš„å›žè°ƒã€‚ä½ å¯ä»¥é€‰æ‹©ä¼ å…¥ä¸€ä¸ªå¯ä»¥åœ¨æµçš„å®žä¾‹ä¸­è§¦å‘ error äº‹ä»¶çš„ error å¯¹è±¡errã€‚ å¦‚æžœä½ æ­£åœ¨ä¼ é€’çš„å¯è¯»æµåœ¨å†™å…¥å­—ç¬¦ä¸²ï¼Œå®ƒä»¬å°†è¢«è½¬æ¢ä¸ºç¼“å­˜ï¼Œé™¤éžä½ ä½¿ç”¨ Writable({ decodeStrings: false }) åˆ›å»ºäº†ä½ çš„å¯å†™æµã€‚ å¦‚æžœä½ æ­£åœ¨ä¼ é€’çš„å¯è¯»æµåœ¨å†™å…¥å¯¹è±¡ï¼Œè¯·ä½¿ç”¨ Writable({ objectMode: true }) åˆ›å»ºäº†ä½ çš„å¯å†™æµã€‚ å†™å…¥ä¸€ä¸ªå¯å†™æµå¦‚æžœä½ æƒ³å†™å…¥ä¸€ä¸ªå¯å†™æµï¼Œåªéœ€è¦ç”¨ä½ æƒ³å†™å…¥çš„ data è°ƒç”¨ .write(data) å°±è¡Œäº†ã€‚ To tell the destination writable stream that youâ€™re done writing, just call .end(). You can also give .end(data) some data to write before ending: process.stdout.write(&apos;beep boop\n&apos;); ä¸ºäº†å‘Šè¯‰ç›®æ ‡å¯å†™æµä½ å·²ç»å†™å…¥å®Œæˆï¼Œåªéœ€è°ƒç”¨ .end()ã€‚ä½ åŒæ ·å¯ä»¥ç»™ .end(data) ä¸€äº›æ•°æ®åœ¨ç»“æŸä¹‹å‰å†™å…¥ã€‚ 12345678var fs = require('fs');var ws = fs.createWriteStream('message.txt');ws.write('beep ');setTimeout(function () &#123; ws.end('boop\n');&#125;, 1000); 123$ node writing1.js $ cat message.txtbeep boop å¦‚æžœä½ å…³å¿ƒé«˜æ°´ä½å’Œç¼“å­˜åŒºï¼Œå½“åœ¨æŽ¥ä¸‹æ¥çš„ç¼“å­˜ä¸­æœ‰æ¯” pts.highWaterMark ä¼ é€’ç»™ Writable() è¿˜è¦å¤šçš„æ•°æ®æ—¶ï¼Œ .write() ä¼šè¿”å›ž falseã€‚ If you want to wait for the buffer to empty again, listen for a â€˜drainâ€™ event. å¦‚æžœä½ æƒ³ç­‰å¾…ç¼“å­˜å†æ¬¡æ¸…ç©ºï¼Œç›‘å¬ drain äº‹ä»¶å³å¯ã€‚ è½¬æ¢è½¬æ¢æµæ˜¯åŒå·¥æµçš„ä¸€ç§ç±»åž‹ï¼ˆå¯è¯»å¯å†™ï¼‰ã€‚åŒºåˆ«åœ¨äºŽï¼Œåœ¨è½¬æ¢æµä¸­ï¼Œè¾“å‡ºæ˜¯è¾“å…¥ä»¥æŸç§æ–¹å¼è®¡ç®—å¾—å‡ºçš„ã€‚ ä½ å¯èƒ½ä¹Ÿå¬è¿‡ç§°ä¸º â€œthrough streamsâ€ çš„è½¬æ¢æµã€‚ Through streams æ˜¯ä¸€ä¸ªç®€å•çš„è¯»å†™è¿‡æ»¤å™¨ï¼Œå¯ä»¥è½¬æ¢è¾“å…¥å¹¶äº§ç”Ÿè¾“å‡ºã€‚ åŒå·¥åŒå·¥æµæ˜¯å¯è¯»/å¯å†™çš„ï¼Œå¹¶ä¸”æµçš„ä¸¤ç«¯å‚ä¸ŽåŒå‘äº¤äº’ï¼Œæ¥å›žå‘é€è¯¸å¦‚ç”µè¯çš„æ¶ˆæ¯ã€‚rpcäº¤æ¢æ˜¯åŒå·¥æµçš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ã€‚ä»»ä½•æ—¶å€™ä½ çœ‹åˆ°åƒè¿™æ ·çš„ï¼š a.pipe(b).pipe(a) Nå¯èƒ½æ­£åœ¨å¤„ç†åŒå·¥æµã€‚ ç»å…¸æµç»å…¸æµæ˜¯ä¸€ä¸ªè€çš„æŽ¥å£ï¼Œé¦–æ¬¡å‡ºçŽ°åœ¨ node 0.4 ç‰ˆæœ¬ã€‚å¾ˆé•¿æ—¶é—´å†…ä½ éƒ½å¯èƒ½é‡åˆ°è¿™ç§é£Žæ ¼çš„æµï¼Œæ‰€ä»¥çŸ¥é“å®ƒä»¬æ˜¯å¦‚ä½•å·¥ä½œæ˜¯å¾ˆæ£’çš„ã€‚ ç»å…¸å¯è¯»æµç»å…¸å¯è¯»æµåªæ˜¯æ—¶é—´è§¦å‘å™¨ï¼Œå½“å®ƒä»¬æ‹¥æœ‰æ•°æ®ä¾›ä½¿ç”¨è€…ä½¿ç”¨æ—¶ï¼Œä¼šè§¦å‘ data äº‹ä»¶ï¼Œå½“å®ƒä»¬å·²ç»æä¾›å®Œæ•°æ®æ—¶è§¦å‘ end äº‹ä»¶ã€‚ .pipe() ä¼šé€šè¿‡æ£€æŸ¥ stream.readable çš„çœŸå®žæ€§æ¥æ£€æŸ¥ä¸€ä¸ªç»å…¸æµæ˜¯å¦æ˜¯ä¸€ä¸ªå¯è¯»æµã€‚ Here is a super simple readable stream that prints A through J, inclusive: è¿™é‡Œæœ‰ä¸€ä¸ªç‰¹åˆ«ç®€å•çš„æ‰“å° A åˆ° J çš„å¯è¯»æµï¼Œç¤ºä¾‹: 1234567891011121314var Stream = require('stream');var stream = new Stream;stream.readable = true;var c = 64;var iv = setInterval(function () &#123; if (++c &gt;= 75) &#123; clearInterval(iv); stream.emit('end'); &#125; else stream.emit('data', String.fromCharCode(c));&#125;, 100);stream.pipe(process.stdout); 12$ node classic0.jsABCDEFGHIJ è¦è¯»å–ä¸€ä¸ªç»å…¸å¯è¯»æµï¼Œä½ éœ€è¦æ³¨å†Œ &quot;data&quot; å’Œ &quot;end&quot; ç›‘å¬äº‹ä»¶ã€‚è¿™é‡Œæœ‰ä¸€ä¸ªä½¿ç”¨è€çš„å¯è¯»æµé£Žæ ¼ä»Ž process.stdin è¯»å–çš„ä¾‹å­ã€‚ 123456process.stdin.on('data', function (buf) &#123; console.log(buf);&#125;);process.stdin.on('end', function () &#123; console.log('__END__');&#125;); 1234$ (echo beep; sleep 1; echo boop) | node classic1.js &lt;Buffer 62 65 65 70 0a&gt;&lt;Buffer 62 6f 6f 70 0a&gt;__END__ è¯·æ³¨æ„ï¼Œæ— è®ºä½ ä½•æ—¶æ³¨å†Œä¸€ä¸ª &quot;data&quot; ç›‘å¬äº‹ä»¶ï¼Œä½ éƒ½å¯ä»¥è®©æµè¿›å…¥å…¼å®¹æ¨¡å¼ï¼Œä»¥å…ä¸¢å¤±æ–°çš„stream2 apiçš„å¥½å¤„ã€‚ ä½ è‡ªå·±åº”è¯¥å‡ ä¹Žä¸ä¼šæ³¨å†Œ &quot;data&quot; å’Œ &quot;end&quot; å¤„ç†å™¨äº†ã€‚å¦‚æžœæ‚¨éœ€è¦ä¸Žæ—§ç‰ˆæµäº’åŠ¨ï¼Œå°½å¯èƒ½ä½¿ç”¨å¯ä»¥ .pipe() åˆ°çš„åº“ã€‚ ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ through æ¥é¿å…æ˜¾å¼è®¾ç½® &quot;data&quot; å’Œ &quot;end&quot; ç›‘å¬å™¨ï¼š 123456789var through = require('through');process.stdin.pipe(through(write, end));function write (buf) &#123; console.log(buf);&#125;function end () &#123; console.log('__END__');&#125; 1234$ (echo beep; sleep 1; echo boop) | node through.js &lt;Buffer 62 65 65 70 0a&gt;&lt;Buffer 62 6f 6f 70 0a&gt;__END__ æˆ–è€…ä½¿ç”¨ concat-stream æ¥ç¼“å­˜æ•´ä¸ªæµçš„å†…å®¹ï¼š 1234var concat = require('concat-stream');process.stdin.pipe(concat(function (body) &#123; console.log(JSON.parse(body));&#125;)); 12$ echo '&#123;"beep":"boop"&#125;' | node concat.js &#123; beep: 'boop' &#125; ç»å…¸å¯è¯»æµå…·æœ‰ .pause() å’Œ .resume() ç”¨äºŽä¸´æ—¶æš‚åœæµï¼Œä½†æ˜¯è¿™ä»…ä»…æ˜¯å»ºè®®æ€§çš„ã€‚å¦‚æžœä½ è¦é€šè¿‡ç»å…¸å¯è¯»æµä½¿ç”¨ .pause() å’Œ .resume()ï¼Œåº”è¯¥ä½¿ç”¨ through æ¥å¤„ç†ç¼“å­˜è€Œä¸æ˜¯è‡ªå·±å†™ã€‚ ç»å…¸å¯å†™æµç»å…¸å¯å†™æµéžå¸¸ç®€å•ã€‚åªæœ‰ .write(buf), .end(buf)å’Œ.destroy()ä¸‰ä¸ªæ–¹æ³•ã€‚ .end(buf) æ–¹æ³•çš„bufå‚æ•°æ˜¯å¯é€‰çš„ï¼Œå¦‚æžœé€‰æ‹©è¯¥å‚æ•°ï¼Œç›¸å½“äºŽstream.write(buf); stream.end() è¿™æ ·çš„æ“ä½œï¼Œéœ€è¦æ³¨æ„çš„æ˜¯å½“æµçš„ç¼“å†²åŒºå†™æ»¡å³æµä¸å¯å†™æ—¶.write(buf)æ–¹æ³•ä¼šè¿”å›žfalseï¼Œå¦‚æžœæµå†æ¬¡å¯å†™æ—¶ï¼Œæµä¼šè§¦å‘drainäº‹ä»¶ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[å›žæµä¸Žé‡ç»˜åŠä¼˜åŒ–]]></title>
      <url>%2F2017%2F02%2F13%2Freflow-repaint%2F</url>
      <content type="text"><![CDATA[å‰æ–‡ ã€Šä»Žè¾“å…¥urlåˆ°æµè§ˆå™¨æ˜¾ç¤ºé¡µé¢ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿï¼ˆæµè§ˆå™¨æ¸²æŸ“ç¯‡ï¼‰ã€‹ ä¸­è®²åˆ°äº†ï¼Œé¡µé¢éœ€è¦æ ¹æ® Render Tree æ¥è¿›è¡Œå¸ƒå±€ä¸Žç»˜åˆ¶ã€‚ä»Šå¤©æˆ‘ä»¬å°±åŸºäºŽå®ƒæ¥ç†è§£ä¸€ä¸‹ä¸¤ä¸ªæ€§èƒ½æ€æ‰‹â€”â€” å›žæµ ä¸Ž é‡ç»˜ã€‚ å›žæµä¸Žé‡ç»˜ å½“render treeä¸­çš„ä¸€éƒ¨åˆ†(æˆ–å…¨éƒ¨)å› ä¸ºå…ƒç´ çš„è§„æ¨¡å°ºå¯¸ï¼Œå¸ƒå±€ï¼Œéšè—ç­‰æ”¹å˜è€Œéœ€è¦é‡æ–°æž„å»ºã€‚è¿™å°±ç§°ä¸ºå›žæµ(reflow)ã€‚æ¯ä¸ªé¡µé¢è‡³å°‘éœ€è¦ä¸€æ¬¡å›žæµï¼Œå°±æ˜¯åœ¨é¡µé¢ç¬¬ä¸€æ¬¡åŠ è½½çš„æ—¶å€™ã€‚åœ¨å›žæµçš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šä½¿æ¸²æŸ“æ ‘ä¸­å—åˆ°å½±å“çš„éƒ¨åˆ†å¤±æ•ˆï¼Œå¹¶é‡æ–°æž„é€ è¿™éƒ¨åˆ†æ¸²æŸ“æ ‘ï¼Œå®Œæˆå›žæµåŽï¼Œæµè§ˆå™¨ä¼šé‡æ–°ç»˜åˆ¶å—å½±å“çš„éƒ¨åˆ†åˆ°å±å¹•ä¸­ï¼Œè¯¥è¿‡ç¨‹æˆä¸ºé‡ç»˜ã€‚ å½“render treeä¸­çš„ä¸€äº›å…ƒç´ éœ€è¦æ›´æ–°å±žæ€§ï¼Œè€Œè¿™äº›å±žæ€§åªæ˜¯å½±å“å…ƒç´ çš„å¤–è§‚ï¼Œé£Žæ ¼ï¼Œè€Œä¸ä¼šå½±å“å¸ƒå±€çš„ï¼Œæ¯”å¦‚background-colorã€‚åˆ™å°±å«ç§°ä¸ºé‡ç»˜ã€‚ æ³¨æ„ï¼šå›žæµå¿…å°†å¼•èµ·é‡ç»˜ï¼Œè€Œé‡ç»˜ä¸ä»£è¡¨ä¸€å®šæœ‰å›žæµã€‚ å›žæµä½•æ—¶å‘ç”Ÿï¼šå½“é¡µé¢å¸ƒå±€å’Œå‡ ä½•å±žæ€§æ”¹å˜æ—¶å°±éœ€è¦å›žæµã€‚ä¸‹è¿°æƒ…å†µä¼šå‘ç”Ÿæµè§ˆå™¨å›žæµï¼š 1ã€æ·»åŠ æˆ–è€…åˆ é™¤å¯è§çš„DOMå…ƒç´ ï¼› 2ã€å…ƒç´ ä½ç½®æ”¹å˜ï¼› 3ã€å…ƒç´ å°ºå¯¸æ”¹å˜â€”â€”è¾¹è·ã€å¡«å……ã€è¾¹æ¡†ã€å®½åº¦å’Œé«˜åº¦ 4ã€å†…å®¹æ”¹å˜â€”â€”æ¯”å¦‚æ–‡æœ¬æ”¹å˜æˆ–è€…å›¾ç‰‡å¤§å°æ”¹å˜è€Œå¼•èµ·çš„è®¡ç®—å€¼å®½åº¦å’Œé«˜åº¦æ”¹å˜ï¼› 5ã€é¡µé¢æ¸²æŸ“åˆå§‹åŒ–ï¼› 6ã€æµè§ˆå™¨çª—å£å°ºå¯¸æ”¹å˜â€”â€”resizeäº‹ä»¶å‘ç”Ÿæ—¶ï¼› é˜Ÿåˆ—åˆ·æ–°ä»Žä¸Šä¸ªå®žä¾‹ä»£ç ä¸­å¯ä»¥çœ‹åˆ°å‡ è¡Œç®€å•çš„JSä»£ç å°±å¼•èµ·äº†6æ¬¡å·¦å³çš„å›žæµã€é‡ç»˜ã€‚è€Œä¸”æˆ‘ä»¬ä¹ŸçŸ¥é“å›žæµçš„èŠ±é”€ä¹Ÿä¸å°ï¼Œå¦‚æžœæ¯å¥JSæ“ä½œéƒ½åŽ»å›žæµé‡ç»˜çš„è¯ï¼Œæµè§ˆå™¨å¯èƒ½å°±ä¼šå—ä¸äº†ã€‚æ‰€ä»¥å¾ˆå¤šæµè§ˆå™¨éƒ½ä¼šä¼˜åŒ–è¿™äº›æ“ä½œï¼Œæµè§ˆå™¨ä¼šç»´æŠ¤1ä¸ªé˜Ÿåˆ—ï¼ŒæŠŠæ‰€æœ‰ä¼šå¼•èµ·å›žæµã€é‡ç»˜çš„æ“ä½œæ”¾å…¥è¿™ä¸ªé˜Ÿåˆ—ï¼Œç­‰é˜Ÿåˆ—ä¸­çš„æ“ä½œåˆ°äº†ä¸€å®šçš„æ•°é‡æˆ–è€…åˆ°äº†ä¸€å®šçš„æ—¶é—´é—´éš”ï¼Œæµè§ˆå™¨å°±ä¼šflushé˜Ÿåˆ—ï¼Œè¿›è¡Œä¸€ä¸ªæ‰¹å¤„ç†ã€‚è¿™æ ·å°±ä¼šè®©å¤šæ¬¡çš„å›žæµã€é‡ç»˜å˜æˆä¸€æ¬¡å›žæµé‡ç»˜ã€‚ è™½ç„¶æœ‰äº†æµè§ˆå™¨çš„ä¼˜åŒ–ï¼Œä½†æœ‰æ—¶å€™æˆ‘ä»¬å†™çš„ä¸€äº›ä»£ç å¯èƒ½ä¼šå¼ºåˆ¶æµè§ˆå™¨æå‰flushé˜Ÿåˆ—ï¼Œè¿™æ ·æµè§ˆå™¨çš„ä¼˜åŒ–å¯èƒ½å°±èµ·ä¸åˆ°ä½œç”¨äº†ã€‚å½“ä½ è¯·æ±‚å‘æµè§ˆå™¨è¯·æ±‚ä¸€äº› styleä¿¡æ¯çš„æ—¶å€™ï¼Œå°±ä¼šè®©æµè§ˆå™¨flushé˜Ÿåˆ—ï¼Œæ¯”å¦‚ï¼š offsetTop, offsetLeft, offsetWidth, offsetHeight scrollTop/Left/Width/Height clientTop/Left/Width/Height width,height è¯·æ±‚äº†getComputedStyle(), æˆ–è€… IEçš„ currentStyle å½“ä½ è¯·æ±‚ä¸Šé¢çš„ä¸€äº›å±žæ€§çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¸ºäº†ç»™ä½ æœ€ç²¾ç¡®çš„å€¼ï¼Œéœ€è¦flushé˜Ÿåˆ—ï¼Œå› ä¸ºé˜Ÿåˆ—ä¸­å¯èƒ½ä¼šæœ‰å½±å“åˆ°è¿™äº›å€¼çš„æ“ä½œã€‚å³ä½¿ä½ èŽ·å–å…ƒç´ çš„å¸ƒå±€å’Œæ ·å¼ä¿¡æ¯è·Ÿæœ€è¿‘å‘ç”Ÿæˆ–æ”¹å˜çš„å¸ƒå±€ä¿¡æ¯æ— å…³ï¼Œæµè§ˆå™¨éƒ½ä¼šå¼ºè¡Œåˆ·æ–°æ¸²æŸ“é˜Ÿåˆ—ã€‚ å¦‚ä½•å‡å°‘å›žæµã€é‡ç»˜å‡å°‘å›žæµã€é‡ç»˜å…¶å®žå°±æ˜¯éœ€è¦å‡å°‘å¯¹render treeçš„æ“ä½œï¼ˆåˆå¹¶å¤šæ¬¡å¤šDOMå’Œæ ·å¼çš„ä¿®æ”¹ï¼‰ï¼Œå¹¶å‡å°‘å¯¹ä¸€äº›styleä¿¡æ¯çš„è¯·æ±‚ï¼Œå°½é‡åˆ©ç”¨å¥½æµè§ˆå™¨çš„ä¼˜åŒ–ç­–ç•¥ã€‚å…·ä½“æ–¹æ³•æœ‰ï¼š ç›´æŽ¥æ”¹å˜classNameï¼Œå¦‚æžœåŠ¨æ€æ”¹å˜æ ·å¼ï¼Œåˆ™ä½¿ç”¨cssTextï¼ˆè€ƒè™‘æ²¡æœ‰ä¼˜åŒ–çš„æµè§ˆå™¨ï¼‰ è®©è¦æ“ä½œçš„å…ƒç´ è¿›è¡Œâ€ç¦»çº¿å¤„ç†â€ï¼Œå¤„ç†å®ŒåŽä¸€èµ·æ›´æ–° a) ä½¿ç”¨DocumentFragmentè¿›è¡Œç¼“å­˜æ“ä½œ,å¼•å‘ä¸€æ¬¡å›žæµå’Œé‡ç»˜ï¼›b) ä½¿ç”¨display:noneæŠ€æœ¯ï¼Œåªå¼•å‘ä¸¤æ¬¡å›žæµå’Œé‡ç»˜ï¼›c) ä½¿ç”¨cloneNode(true or false) å’Œ replaceChild æŠ€æœ¯ï¼Œå¼•å‘ä¸€æ¬¡å›žæµå’Œé‡ç»˜ï¼› ä¸è¦ç»å¸¸è®¿é—®ä¼šå¼•èµ·æµè§ˆå™¨flushé˜Ÿåˆ—çš„å±žæ€§ï¼Œå¦‚æžœä½ ç¡®å®žè¦è®¿é—®ï¼Œåˆ©ç”¨ç¼“å­˜ è®©å…ƒç´ è„±ç¦»åŠ¨ç”»æµï¼Œå‡å°‘å›žæµçš„Render Treeçš„è§„æ¨¡]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ä»Žè¾“å…¥urlåˆ°æµè§ˆå™¨æ˜¾ç¤ºé¡µé¢ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿï¼ˆæµè§ˆå™¨æ¸²æŸ“ç¯‡ï¼‰]]></title>
      <url>%2F2017%2F02%2F12%2Furl2render-part2%2F</url>
      <content type="text"><![CDATA[æˆ‘ä»¬ä»Šå¤©æ¥äº†è§£ä¸€ä¸‹æµè§ˆå™¨å·¥ä½œåŽŸç†ï¼Œå®ƒæ˜¯ç”±å‘ˆçŽ°å¼•æ“Žï¼ˆä¹Ÿå°±æ˜¯å„ä½é“å‹å¸¸è¯´çš„å†…æ ¸ï¼‰æ¥å®Œæˆçš„ã€‚æˆ‘ä»¬ä»Šå¤©ä¸»è¦å€ŸåŠ© webkit æ¥çœ‹ä¸€ä¸‹ã€‚ æ¸²æŸ“æµç¨‹å‘ˆçŽ°å¼•æ“Žä¸€å¼€å§‹ä¼šä»Žç½‘ç»œå±‚èŽ·å–è¯·æ±‚æ–‡æ¡£çš„å†…å®¹ï¼Œç„¶åŽå¼€å§‹è¿›è¡Œä¸‹é¢çš„è¿™ä¸ªæµç¨‹ï¼š æˆ‘ä»¬å¯ä»¥çœ‹å‡ºå¦‚ä¸‹å‡ ä¸ªç‚¹ï¼š æµè§ˆå™¨è§£æžHTMLï¼CSSï¼š è§£æž HTML ï¼Œç”Ÿæˆ DOM Treeã€‚ è§£æž CSS ï¼Œç”Ÿæˆ Style Rulesï¼ˆæ ·å¼è§„åˆ™ï¼‰ã€‚ Javascript çš„è§£æžä¸»è¦æ˜¯é€šè¿‡ JavaScript è§£é‡Šå™¨æ¥è¿›è¡Œçš„ï¼Œä¸æ˜¯å‘ˆçŽ°å¼•æ“Žçš„äº‹ã€‚å®ƒä¸»è¦æ˜¯é€šè¿‡ DOM API å’Œ CSSOM API æ¥åˆ†åˆ«æ“ä½œ DOM Tree å’Œ Style Rulesã€‚ è§£æžå®ŒæˆåŽï¼Œæµè§ˆå™¨å¼•æ“Žä¼šé€šè¿‡ DOM Tree å’Œ Style Rules æ¥æž„é€  Rendering Treeã€‚ å½“æ–‡æ¡£è¢«è§£æžå¹¶ä¸”æ·»åŠ  DOM èŠ‚ç‚¹æ—¶ï¼Œåœ¨ DOM èŠ‚ç‚¹ä¸Šè°ƒç”¨ç§°ä¸º attach çš„æ–¹æ³•æ¥åˆ›å»ºæ¸²æŸ“å™¨ã€‚ Rendering Tree æ¸²æŸ“æ ‘å¹¶ä¸ç­‰åŒäºŽ DOM Treeï¼Œå› ä¸º attach æ–¹æ³•ä¼šè®¡ç®—æ ·å¼ä¿¡æ¯ï¼Œä¸€äº›åƒ head æˆ– display:none çš„å…ƒç´ å°±æ²¡å¿…è¦æ”¾åœ¨æ¸²æŸ“æ ‘ä¸­äº†ã€‚ WebKit æ”¯æŒçš„æ¯ä¸€ä¸ª CSS å±žæ€§éƒ½å¯ä»¥é€šè¿‡ RenderStyles (æ‰€æœ‰çš„æ ·å¼ä¿¡æ¯éƒ½å­˜å‚¨åœ¨ä¸Šé¢)æŸ¥è¯¢ã€‚å¦‚æžœ DOM èŠ‚ç‚¹åˆ›å»ºäº†ä¸€ä¸ªæ¸²æŸ“å™¨ï¼Œé‚£ä¹ˆå®ƒä½¿ç”¨æ¸²æŸ“å™¨ä¸Šçš„ setStyle æ–¹æ³•å°†è¯¥æ ·å¼ä¿¡æ¯è¿žæŽ¥åˆ°è¯¥æ¸²æŸ“å™¨ã€‚è€Œç«ç‹æ˜¯é€šè¿‡ç”Ÿæˆ è§„åˆ™æ ‘ å’Œ æ ·å¼ä¸Šä¸‹æ–‡æ ‘ ï¼Œæ¥è¿›è¡Œä¸Ž DOM Tree çš„åŒ¹é…ã€‚æœ€åŽç”Ÿæˆ Render Treeã€‚ è®¡ç®—æ¯ä¸ª frame (å…ƒç´ ) çš„ä½ç½®ï¼Œè¿›è¡Œ layout ã€‚ å‘ˆçŽ°å¼•æ“ŽéåŽ†å‘ˆçŽ°æ ‘ï¼Œç”±ç”¨æˆ·ç•Œé¢åŽç«¯å±‚å°†æ¯ä¸ªèŠ‚ç‚¹ç»˜åˆ¶å‡ºæ¥ã€‚ç»˜åˆ¶çš„é¡ºåºæ˜¯ï¼š èƒŒæ™¯é¢œè‰² èƒŒæ™¯å›¾ç‰‡ è¾¹æ¡† å­ä»£ è½®å»“ æ€»ç»“ä¸€ä¸‹å·¥ä½œåŽŸç†ï¼šHTML/CSS parse â€”&gt; Render Tree â€”&gt; layout â€”&gt; paint ã€‚ éœ€è¦ç€é‡æŒ‡å‡ºçš„æ˜¯ï¼Œè¿™æ˜¯ä¸€ä¸ªæ¸è¿›çš„è¿‡ç¨‹ã€‚ä¸ºè¾¾åˆ°æ›´å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œå‘ˆçŽ°å¼•æ“Žä¼šåŠ›æ±‚å°½å¿«å°†å†…å®¹æ˜¾ç¤ºåœ¨å±å¹•ä¸Šã€‚å®ƒä¸å¿…ç­‰åˆ°æ•´ä¸ª HTML æ–‡æ¡£è§£æžå®Œæ¯•ï¼Œå°±ä¼šå¼€å§‹æž„å»ºå‘ˆçŽ°æ ‘å’Œè®¾ç½®å¸ƒå±€ã€‚åœ¨è§£æžå¤–è”è„šæœ¬çš„åŒæ—¶ï¼Œå‘ˆçŽ°å¼•æ“Žä¼šå°†å·²è§£æžçš„é¡µé¢å†…å®¹æ˜¾ç¤ºå‡ºæ¥ã€‚ DOM é˜»å¡žJS é˜»å¡žæ–‡æ¡£è§£æžå½“é‡åˆ° &lt;script&gt; æ ‡ç­¾æ—¶ï¼Œä¼šç«‹å³è§£æžå¹¶æ‰§è¡Œè„šæœ¬ã€‚å¦‚æžœè„šæœ¬æ˜¯å¤–éƒ¨çš„ï¼Œåˆ™ä¼šç«‹å³åœæ­¢è§£æžï¼Œç›´åˆ°è„šæœ¬ä¸‹è½½ä¸‹æ¥ä¹‹åŽç»§ç»­è§£æžè„šæœ¬ã€‚è¿™æ ·åšæ˜¯æœ‰åŽŸå› çš„ï¼Œå› ä¸º javascript å¯èƒ½ä¼šæœ‰è¯¸å¦‚ document.write çš„æ“ä½œï¼Œè¿™æ ·çš„è¯ï¼ŒåŽç»­æ‰€æœ‰èµ„æºçš„åŠ è½½éƒ½æ˜¯æ— æ„ä¹‰çš„ã€‚ JS æœ‰ defer å±žæ€§ï¼Œ es5è¿˜æ–°å¢žäº†ä¸€ä¸ª async å±žæ€§ã€‚ä»–ä»¬éƒ½å¯ä»¥å®žçŽ°å¼‚æ­¥åŠ è½½ï¼Œä¸ä¼šé˜»å¡žæ–‡æ¡£è§£æžã€‚ä»–ä»¬çš„åŒºåˆ«å°±æ˜¯ async ä¸‹è½½å®Œäº†ä¹‹åŽä¼šç«‹å³æ‰§è¡Œï¼Œè€Œ defer æ˜¯åœ¨é‡åˆ° &lt;/html&gt; æ‰ä¼šæ‰§è¡Œï¼ˆå…ˆäºŽ DOMContentLoaded äº‹ä»¶ï¼‰ã€‚ è¿˜æœ‰ä¸€ä¸ªåŒæ ·å¯ä»¥å®žçŽ°å¼‚æ­¥åŠ è½½ï¼Œé€šè¿‡ DOM åŠ¨æ€æ·»åŠ ã€‚å®ƒçš„æ‰§è¡Œé¡ºåºæŽ’åœ¨ defer ä¹‹åŽï¼ŒDOMContentLoaded äº‹ä»¶ä¹‹å‰ã€‚ æ ¹æ®ä¸Šé¢çš„ç‰¹æ€§æˆ‘ä»¬å¯ä»¥å‘æŽ˜å‡ºçš„ä¼˜åŒ–jsçš„æ–¹æ³•æœ‰ï¼š åˆç†ä½¿ç”¨ defer å’Œ async æˆ–è€… DOM åŠ¨æ€æ·»åŠ  åˆå¹¶ js æ–‡ä»¶ï¼Œæˆ–è€…é€‚å½“çš„å†…åµŒï¼Œå‡å°‘è¯·æ±‚â€“&gt;å‡å°‘è¯·æ±‚æ—¶é—´â€“&gt;å‡å°‘é˜»å¡žæ—¶é—´ Minify Javascript CSS é˜»å¡ž JSå¦‚æžœ js åŽ»è¯·æ±‚ css çš„ä¿¡æ¯ï¼Œè¿™ä¸ªæ—¶å€™ css è¿˜æ²¡åŠ è½½å®Œæ¯•ï¼Œå°±ä¼šå¯¼è‡´å–åˆ°çš„ä¿¡æ¯é”™è¯¯ã€‚ä¸ºäº†é˜²æ­¢è¿™ä¸€ç‚¹ï¼Œcss ä¼šé˜»å¡ž js çš„è§£æžã€‚è°·æ­Œåšäº†ä¼˜åŒ–ï¼Œåªæœ‰è„šæœ¬åŽ»è®¿é—®çš„æ ·å¼ä¼šå—åˆ°å°šæœªåŠ è½½è§£æžçš„ css å½±å“æ—¶ï¼Œæ‰ä¼šç¦æ­¢æ­¤è„šæœ¬ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ media query æ¥è¿›è¡Œä¼˜åŒ–ã€‚æ¯”å¦‚ï¼š &lt;link href=â€something.cssâ€ rel=â€stylesheetâ€ media=â€(min-width: 750px)â€ è¿™æ ·å¦‚æžœå°äºŽ 750px ï¼Œåˆ™ä¸ä¼šåŠ è½½è¯¥ css ã€‚ é¢„è§£æžåœ¨æ‰§è¡Œè„šæœ¬æ—¶ï¼Œå…¶ä»–çº¿ç¨‹ä¼šè§£æžå‰©ä½™æ–‡æ¡£ï¼Œæ‰¾å‡ºå¹¶æå‰ä¸‹è½½å¥½å…¶ä»–èµ„æºï¼Œä½†æ˜¯ä¸æ‰§è¡Œã€‚è¿™ä¸ä¼šæ›´æ–° DOM æ ‘ï¼Œè¿™é¡¹å·¥ä½œä¼šç•™ç»™ä¸»è§£æžå™¨æ¥å®Œæˆã€‚ å› ä¸ºæµè§ˆå™¨æ˜¯æœ‰å¹¶è¡Œä¸‹è½½é™åˆ¶çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬èƒ½å¤Ÿå°½å¯èƒ½çš„å‡å°‘å›¾ç‰‡ç­‰çš„ä½“ç§¯ï¼Œè¿˜æ˜¯éœ€è¦å°½é‡å‡å°ã€‚ æ€»ç»“ å‘é€ HTTP è¯·æ±‚ï¼ŒèŽ·å– HTML è§£æž HTML ï¼Œæž„å»º DOMæ ‘ å‘é€ HTTP è¯·æ±‚ï¼ŒèŽ·å– CSS å’Œ JS å’Œ IMG è§£æž CSS åˆ›å»º RenderStylesï¼Œè§£æžæ‰§è¡Œ JS åŸºäºŽ viewport ç”Ÿæˆå¸ƒå±€ ç»˜åˆ¶é¡µé¢ é‡å¤ 2 - 6]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ä»Žè¾“å…¥urlåˆ°æµè§ˆå™¨æ˜¾ç¤ºé¡µé¢ï¼Œå‘ç”Ÿäº†ä»€ä¹ˆï¼Ÿï¼ˆç½‘ç»œé€šä¿¡ç¯‡ï¼‰]]></title>
      <url>%2F2017%2F02%2F11%2Furl2render-part1%2F</url>
      <content type="text"><![CDATA[è¿™æ˜¯å¾ˆå‡ºåçš„ä¸€é“é¢˜ï¼Œæˆ‘ä»¬åˆ†æˆä¸¤éƒ¨åˆ†æ¥çœ‹è¿™é“é¢˜ï¼šç½‘ç»œé€šä¿¡å’Œæµè§ˆå™¨æ¸²æŸ“ã€‚æœ¬ç¯‡å°†åªä»‹ç»ç½‘ç»œé€šä¿¡ï¼Œæµè§ˆå™¨æ¸²æŸ“ç•™å¾…ä¸‹æ–‡ã€‚ TCP/IP åè®®æ—è®¡ç®—æœºä¸Žç½‘ç»œè®¾å¤‡è¦äº’ç›¸é€šä¿¡ï¼ŒåŒæ–¹å°±å¿…é¡»åŸºäºŽç›¸åŒçš„è§„åˆ™ã€‚æ¯”å¦‚å¦‚ä½•æŽ¢æµ‹é€šä¿¡ç›®æ ‡ã€ç”±å“ªä¸€è¾¹å…ˆå‘èµ·é€šä¿¡ã€ç”¨å“ªç§è¯­è¨€è¿›è¡Œé€šä¿¡ã€ç¡¬ä»¶å¦‚ä½•é€šä¿¡ï¼Œæ‰€æœ‰çš„ä¸€åˆ‡éƒ½éœ€è¦æœ‰ä¸€ä¸ªè§„åˆ™ã€‚æˆ‘ä»¬æŠŠè¿™ç§è§„åˆ™ç§°ä¸ºåè®®ï¼ˆprotocolï¼‰ã€‚ éœ€è¦å»ºç«‹è§„åˆ™çš„äº‹åŠ¡å¾ˆå¤šï¼Œæ¯ç§äº‹åŠ¡éƒ½æœ‰å…¶å¯¹åº”çš„è§„åˆ™ï¼ˆåè®®ï¼‰ã€‚è€Œè¿™æ‰€æœ‰äº’è”ç½‘ç›¸å…³çš„åè®®é›†åˆæˆ‘ä»¬ç§°ä½œ TCP/IP åè®®æ—ã€‚ TCP/IP é€šä¿¡ä¼ è¾“æµTCP/IP åˆ†ä¸ºå››å±‚ï¼š åº”ç”¨å±‚ã€ä¼ è¾“å±‚ã€ç½‘ç»œå±‚ã€æ•°æ®é“¾è·¯å±‚ã€‚å‘é€ç«¯ä»Žåº”ç”¨å±‚å¾€ä¸‹èµ°ï¼ŒæŽ¥æ”¶ç«¯åˆ™ä»Žé“¾è·¯å±‚å¾€ä¸Šèµ°ã€‚ ä»Žä¸‹é¢è¿™å¼ å›¾æˆ‘ä»¬å¯ä»¥çœ‹å‡º TCP/IP åè®®æ—ä¸­åŒ…å«ç€ HTTPã€TCPã€IP åè®®ï¼Œå…¶å®žè¿˜æœ‰å¾ˆå¤šã€‚æˆ‘ä»¬ç½‘é¡µä»Žè¾“å…¥ URL åˆ°æµè§ˆå™¨èƒ½æ¸²æŸ“è¿™ä¸­é—´çš„é€šä¿¡è¿‡ç¨‹å°±æ˜¯ä»¥ä¸‹å›¾ä¼ è¾“æµè¿›è¡Œé€šä¿¡çš„ã€‚ å¥½äº†ï¼Œè¯´äº†è¿™ä¹ˆå¤šï¼Œæˆ‘ä»¬æ¥é€æ­¥äº†è§£ä¸€ä¸‹é€šä¿¡è¿‡ç¨‹ã€‚ é€šä¿¡è¿‡ç¨‹ åœ¨æµè§ˆå™¨ä¸­è¾“å…¥URLã€‚ å¥½ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬æœ‰å¿…è¦äº†è§£ä¸€ä¸‹ URI å’Œ URL çš„åŒºåˆ«ã€‚ URI å…¨ç§°ï¼š Uniform Resource Identifierï¼Œå°±æ˜¯è¯´ç”¨æŸç§åè®®æ¥è¡¨ç¤ºèµ„æºçš„å®šä½æ ‡è¯†ç¬¦ã€‚ URL è¡¨ç¤ºèµ„æºçš„ä½ç½®ã€‚æ‰€ä»¥è¯´ URL åªæ˜¯ URI çš„ä¸€éƒ¨åˆ†ã€‚ æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹ URI çš„æ ¼å¼ã€‚ åº”ç”¨å±‚DNSè¿›è¡ŒåŸŸåè§£æž DNS å’Œ HTTP åè®®ä¸€æ ·ï¼Œä¹Ÿå¤„äºŽåº”ç”¨å±‚ã€‚å®ƒè´Ÿè´£å°†åŸŸåè§£æžæˆ IPåœ°å€ ã€‚ DNS æŸ¥è¯¢çš„é¡ºåºå¦‚ä¸‹: æµè§ˆå™¨ç¼“å­˜ â€“&gt; ç³»ç»Ÿç¼“å­˜ â€“&gt; è·¯ç”±å™¨ç¼“å­˜ â€“&gt; ISP(ç½‘ç»œæœåŠ¡æä¾›å•†) DNS ç¼“å­˜ (ç¬¬ä¸€æ¬¡è®¿é—®æœåŠ¡å•† DNS æœåŠ¡å™¨æŸ¥è¯¢ IP åœ°å€æ—¶ä¼šæœ‰ä¸€ä¸ªç¼“å­˜) â€“&gt; é€’å½’æœç´¢ åº”ç”¨å±‚å®¢æˆ·ç«¯å‘é€ä¸€ä¸ªæƒ³çœ‹æŸé¡µé¢çš„HTTPè¯·æ±‚ HTTP è¯·æ±‚åˆ†ä¸ºè¯·æ±‚å¤´å’Œè¯·æ±‚ä¸»ä½“ã€‚è¯·æ±‚ä¸»ä½“å°±æ˜¯å®¢æˆ·ç«¯è¦å‘é€ç»™æœåŠ¡å™¨æˆ–è€…æœåŠ¡å™¨è¿”å›žç»™å®¢æˆ·ç«¯çš„å†…å®¹ï¼Œè¯·æ±‚å¤´åŒ…å« é€šä¿¡æ–¹å¼(POST/GET/INPUT/DELETEâ€¦)ã€URIã€åè®®ç‰ˆæœ¬å·ä»¥åŠè¯·æ±‚é¦–éƒ¨æ–¹æ³•ï¼ˆAcceptã€Cache-Controlâ€¦ï¼‰ã€‚ å¦‚æžœæ˜¯å“åº”çš„è¯ï¼Œå“åº”å¤´å°±ç”± åè®®ç‰ˆæœ¬å·ã€çŠ¶æ€ç ã€çŠ¶æ€ç åŽŸå› çŸ­è¯­ä»¥åŠé¦–éƒ¨æ–¹æ³•(Set-Cookieã€Allowâ€¦)ç»„æˆã€‚ ä¼ è¾“å±‚TCPä¼ è¾“æŠ¥æ–‡ ä¸ºäº†ä¼ è¾“æ–¹ä¾¿ï¼Œåœ¨ä¼ è¾“å±‚ï¼ˆTCPåè®®ï¼‰æŠŠä»Žåº”ç”¨å±‚å¤„æŽ¥æ”¶åˆ°çš„æ•°æ®ï¼ˆHTTPè¯·æ±‚æŠ¥æ–‡ï¼‰è¿›è¡Œåˆ†å‰²ï¼Œå¹¶åœ¨å„ä¸ªæŠ¥æ–‡ä¸Šæ‰“ä¸Šæ ‡è®°åºå·ä»¥åŠç«¯å£å·ï¼ˆé»˜è®¤80ï¼‰åŽè½¬å‘ç»™ç½‘ç»œå±‚ã€‚ TCP ä¸ºäº†ç¡®è®¤æ— è¯¯åœ°å°†æ•°æ®é€è¾¾ç›®æ ‡å¤„ï¼Œé‡‡ç”¨äº†ä¸‰æ¬¡æ¡æ‰‹(three-way handshaking)ç­–ç•¥ã€‚å‘é€ç«¯æƒ³é€ä¸€ä¸ªå¸¦ SYN æ ‡å¿—çš„æ•°æ®åŒ…ç»™å¯¹æ–¹ï¼ŒæŽ¥æ”¶ç«¯æ”¶åˆ°åŽï¼Œä¼šç©¿ä¸€ä¸ªå¸¦æœ‰ SYN/ACK æ ‡å¿—çš„æ•°æ®åŒ…æ¥ä¼ è¾¾ç¡®è®¤ä¿¡æ¯ã€‚æœ€åŽï¼Œå‘é€ç«¯å†å›žä¼ ä¸€ä¸ªå¸¦æœ‰ ACK æ ‡å¿—çš„æ•°æ®åŒ…ï¼Œä»£è¡¨ â€œæ¡æ‰‹â€ ç»“æŸã€‚ ç½‘ç»œå±‚IPåè®®æŸ¥è¯¢MACåœ°å€è¿›è¡Œæ•°æ®åŒ…çš„ä¼ è¾“ IPåè®®è´Ÿè´£æŠŠå„ç§æ•°æ®åŒ…ä¼ é€ç»™å¯¹æ–¹ã€‚å¦‚æžœè¦ä¿è¯ç¡®å®žèƒ½ä¼ è¾“åˆ°å¯¹æ–¹ï¼Œéœ€è¦ç¡®å®šæŽ¥æ”¶æ–¹çš„ MACåœ°å€ã€‚IPåœ°å€ æ˜¯æŒ‡èŠ‚ç‚¹è¢«åˆ†é…åˆ°çš„åœ°å€ï¼Œå¯å˜ï¼Œ MACåœ°å€ æ˜¯æŒ‡ç½‘å¡æ‰€å±žçš„å›ºå®šåœ°å€ï¼Œä¸€èˆ¬ä¸ä¼šå˜ã€‚IPåœ°å€ å¯ä»¥å’Œ MACåœ°å€ é€šè¿‡æ˜ å°„è¡¨ä¸€ä¸€é…å¯¹ä¸Šçš„ï¼Œè€Œ IP åˆ° MAC çš„è§£æžè¿‡ç¨‹åˆ™ä¾èµ–äºŽ ARP åè®®ï¼Œå®ƒå¯ä»¥æ ¹æ®é€šä¿¡æ–¹çš„ IPåœ°å€ åæŸ¥å‡ºå¯¹åº”çš„ MACåœ°å€ã€‚ è€Œä¸€èˆ¬é€šä¿¡åŒæ–¹æ˜¯æ— æ³•ç›´æŽ¥è¿›è¡Œé€šä¿¡çš„ï¼ˆé™¤éžåœ¨åŒä¸€å±€åŸŸç½‘ï¼‰ï¼Œä¼šç»è¿‡å¤šå°è®¡ç®—æœºæˆ–è·¯ç”±å™¨æ¥è¿›è¡Œä¸­è½¬ï¼Œæ‰€ä»¥ä¹Ÿå°±éœ€è¦ ARP æ¥ä¸€è·¯ç¡®è®¤ä¸‹ä¸€ä¸ªä¸­è½¬ç«™ï¼ŒååŠ©æ•°æ®åŒ…çš„ä¼ è¾“ã€‚ é“¾è·¯å±‚è¿›è¡Œæ•°æ®ä¼ è¾“ æ‰¾åˆ°å¯¹æ–¹çš„ MACåœ°å€ åŽï¼Œå°±ä¼šå°†æ•°æ®å‘é€åˆ°é“¾è·¯å±‚ï¼Œé€šè¿‡é“¾è·¯å±‚æ¥è¿›è¡Œæ•°æ®æœ€ç»ˆä¼ è¾“ã€‚æ­¤æ—¶ï¼Œå®¢æˆ·ç«¯å‘é€è¯·æ±‚é˜¶æ®µç»“æŸã€‚ æœåŠ¡å™¨æŽ¥æ”¶æ•°æ® æŽ¥æ”¶ç«¯çš„æœåŠ¡å™¨åœ¨é“¾è·¯å±‚æŽ¥æ”¶åˆ°æ•°æ®åŒ…ï¼Œå†å±‚å±‚å‘ä¸Šç›´åˆ°åº”ç”¨å±‚ã€‚è¿™è¿‡ç¨‹ä¸­åŒ…æ‹¬åœ¨è¿è¾“å±‚é€šè¿‡TCPåè®®å°†åˆ†æ®µçš„æ•°æ®åŒ…é‡æ–°ç»„æˆåŽŸæ¥çš„HTTPè¯·æ±‚æŠ¥æ–‡ï¼ˆå‘é€ç«¯TCPåˆ†å‰²æ•°æ®æ—¶æ‰“ä¸Šçš„åºå·å°±æ˜¯ç”¨æ¥è¿˜åŽŸçš„ï¼‰ã€‚ æœåŠ¡å™¨å“åº”è¯·æ±‚ å‰é¢è¯´è¿‡ï¼Œå“åº”è¯·æ±‚å¤´åŒ…æ‹¬ åè®®ç‰ˆæœ¬å·ã€çŠ¶æ€ç ã€çŠ¶æ€ç åŽŸå› çŸ­è¯­ä»¥åŠå“åº”é¦–éƒ¨æ–¹æ³•ã€‚çŠ¶æ€ç åˆ†ä¸ºäº”ç±»ï¼š å…¶ä¸­å¸¸è§çš„åŒ…æ‹¬ 200 OKâ€”â€”æˆåŠŸï¼Œ 301 (URL)â€”â€”é‡å®šå‘ï¼Œ 404 Not Foundâ€”â€”å®¢æˆ·è¯·æ±‚èµ„æºæ‰¾ä¸åˆ°ã€‚ å€¼å¾—ä¸€æçš„æ˜¯ï¼Œç›®å‰å¾ˆå¤šç½‘ç«™éƒ½ä¼šæœ‰ä¸€ä¸ªé‡å®šå‘åŠŸèƒ½ï¼Œæ¯”å¦‚ä½ çœåŽ»äº† www.ï¼Œå®ƒä¼šç»™ä½ é‡å®šå‘æ¥æ·»åŠ ä¸Šã€‚è¿™ä¹Ÿå°±æ„å‘³ç€åˆæ¬¡è¯·æ±‚ HTML çš„è¿‡ç¨‹ä¸­æˆ‘ä»¬éœ€è¦å‘èµ·ä¸¤æ¬¡è¯·æ±‚ã€‚ è¿™æ ·åšçš„åŽŸå› åœ¨äºŽæœç´¢å¼•æ“Žä¼šè®¤ä¸º www.xx.com å’Œ xx.com æ˜¯ä¸¤ä¸ªç½‘ç«™ï¼Œä»Žè€Œé€ æˆç½‘ç«™æŽ’åä¸‹é™ã€‚è¿˜æœ‰å¦‚æžœä¸¤ä¸ªåœ°å€éƒ½æœ‰æ‰“å¼€è¿‡ï¼Œä¼šé€ æˆå¤šä½™ï¼ˆåŒå€ï¼‰çš„æµè§ˆå™¨ç¼“å­˜ã€‚ æœåŠ¡å™¨è¿”å›žç›¸åº”æ–‡ä»¶ è¯·æ±‚æˆåŠŸåŽï¼ŒæœåŠ¡å™¨ä¼šè¿”å›žç›¸åº”çš„HTMLæ–‡ä»¶ æŽ¥ä¸‹æ¥å°±åˆ°äº†é¡µé¢çš„æ¸²æŸ“é˜¶æ®µäº†ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Javascriptæ·±å…¥æµ…å‡ºä¹‹åŽŸåž‹]]></title>
      <url>%2F2017%2F01%2F02%2Fdeeply_understand_prototype%2F</url>
      <content type="text"></content>
    </entry>

    
    <entry>
      <title><![CDATA[å‡½æ•°èŠ‚æµå’Œå‡½æ•°åŽ»æŠ–ä¹‹å·®å¼‚[è¯‘]]]></title>
      <url>%2F2016%2F12%2F29%2FThe-Difference-Between-Throttling-and-Debouncing%2F</url>
      <content type="text"><![CDATA[åŽŸæ–‡é“¾æŽ¥ï¼šhttps://css-tricks.com/the-difference-between-throttling-and-debouncing/ åœ¨æˆ‘æœ‰è¿™äº›ç–‘æƒ‘çš„æŸä¸ªæ—¥å­ï¼Œæœ‰äººæŒ‡ç‚¹äº†æˆ‘ã€‚æ‰€ä»¥ï¼Œæˆ‘æŠŠå®ƒä»¬æ”¾åˆ°äº†åšå®¢æ–‡ç« é‡Œä»¥åŠè¿™ä¸ªç½‘ç«™ã€‚ä¸¤è€…éƒ½æ˜¯ä¸ºäº†æ€§èƒ½è€Œé™åˆ¶åŸºäºŽDOMäº‹ä»¶æ‰§è¡Œçš„Javascriptçš„æ•°é‡çš„æ–¹æ³•ã€‚ä½†æ˜¯å®ƒä»¬ï¼Œæ˜¯çš„ä½ çŒœåˆ°äº†ï¼Œä¸ä¸€æ ·ã€‚ å‡½æ•°èŠ‚æµå¼ºè¡Œé™åˆ¶ä¸€ä¸ªå‡½æ•°æŸæ®µæ—¶é—´èƒ½è¢«è°ƒç”¨çš„æœ€å¤§æ¬¡æ•°ã€‚æ¯”å¦‚â€œæ¯ 100ms æœ€å¤šèƒ½æ‰§è¡Œè¿™ä¸ªå‡½æ•°ä¸€æ¬¡ã€‚â€ä¸€èˆ¬æƒ…å†µä¸‹æ¥è¯´ï¼Œä½ å¯èƒ½ä¼šåœ¨ 10 ç§’å†…è°ƒç”¨è¿™ä¸ªå‡½æ•° 1000 æ¬¡ã€‚å¦‚æžœä½ èŠ‚æµè®©å®ƒæ¯ 100ms ä¸€æ¬¡ï¼Œè¿™ä¸ªå‡½æ•°æœ€å¤šèƒ½å¤Ÿæ‰§è¡Œ 100 æ¬¡ã€‚ (10s * 1,000) = 10,000ms10,000ms / 100ms throttling = 100 maximum calls å‡½æ•°åŽ»æŠ–å¼ºè¡Œé™åˆ¶ï¼Œä¸€ä¸ªå‡½æ•°ï¼Œé™¤éžåœ¨ä¸€å®šæ—¶é—´ä¹‹å†…æ²¡æœ‰è¢«è°ƒç”¨è¿‡ï¼Œå¦åˆ™ä¸æ‰§è¡Œã€‚æ¯”å¦‚â€œä»…åœ¨ 100ms å†…å‡½æ•°æœªè¢«è°ƒç”¨æ—¶æ‰æ‰§è¡Œæ­¤å‡½æ•°ã€‚â€å¯èƒ½ä¸€ä¸ªå‡½æ•°æ€¥é€Ÿçªå‘ä¹‹ä¸­è¢«è°ƒç”¨ 1000 æ¬¡ï¼Œåœ¨ä¸‰ç§’ä¹‹å†…ï¼Œç„¶åŽåœæ­¢è¢«è°ƒç”¨ã€‚å¦‚æžœä½ æ˜¯ 100ms åŽ»æŠ–ï¼Œè¿™ä¸ªå‡½æ•°åªæœ‰åœ¨æœ¬æ¬¡çªå‘ç»“æŸåŽï¼Œåœ¨ 3.1s æ—¶è¢«è°ƒç”¨ä¸€æ¬¡ã€‚åœ¨è¿™é‡Œçªå‘ä¸­æ¯æ¬¡å‡½æ•°è¢«è°ƒç”¨ï¼Œä»–éƒ½å°†é‡ç½®è¢«åŽ»æŠ–çš„å®šæ—¶å™¨ã€‚ é‡ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿè¿™äº›æ¦‚å¿µçš„ä¸€ä¸ªä¸»è¦ç”¨ä¾‹æ˜¯æŸäº› DOM äº‹ä»¶ï¼Œæ¯”å¦‚æ»šåŠ¨å’Œè°ƒæ•´å¤§å°ã€‚æ¯”å¦‚ï¼Œå¦‚æžœä½ å°†ä¸€ä¸ªæ»šåŠ¨å¤„ç†ç¨‹åºç»‘å®šåˆ°ä¸€ä¸ªå…ƒç´ ï¼Œå¹¶ä¸”å°†è¯¥å…ƒç´ å‘ä¸‹æ»šåŠ¨ 5000pxï¼Œé‚£ä¹ˆä½ å¯èƒ½ä¼šçœ‹åˆ° 100 å¤šä¸ªäº‹ä»¶è¢«è§¦å‘ã€‚å¦‚æžœä½ çš„äº‹ä»¶å¤„ç†ç¨‹åºåšäº†ä¸€å¤§å †çš„å·¥ä½œï¼ˆå°±åƒç¹é‡çš„è®¡ç®—å’Œå…¶ä»–çš„ DOM æ“ä½œï¼‰ï¼Œä½ å¯èƒ½ä¼šçœ‹åˆ°æ€§èƒ½é—®é¢˜ã€‚å¦‚æžœä½ èƒ½å¤Ÿå‡­å€Ÿç»éªŒï¼Œå°‘æ‰§è¡Œè¿™æ®µç¨‹åºå‡ æ¬¡ï¼Œæ²¡æœ‰å¤ªå¤šä¸­æ–­ï¼Œä»Žè€Œè„±èº«å¼€æ¥ï¼Œè¿™ä¹Ÿè®¸æ˜¯å€¼å¾—çš„ã€‚ å¦‚ä½•å®žçŽ°ï¼Ÿè¿™ä¸¤ç§å‡½æ•°éƒ½è¢«å†…ç½®åœ¨ Underscore å’Œ Lodash ä¸­ã€‚ç”šè‡³ä½ ä¸æƒ³æ•´ä¸ªçš„ä½¿ç”¨è¿™äº›åº“çš„è¯ï¼Œä½ å¯ä»¥ä»Žå®ƒä»¬ä¹‹ä¸­å°†è¿™äº›å‡½æ•°æå–å‡ºæ¥ä¾›ä½ ä½¿ç”¨ã€‚ ç®€å•çš„è¢«èŠ‚æµçš„æ»šåŠ¨äº‹ä»¶: 123$(&quot;body&quot;).on(&apos;scroll&apos;, _.throttle(function() &#123; // Do expensive things&#125;, 100)); ç®€å•çš„åŽ»æŠ–çš„è°ƒæ•´å¤§å°: 123$(window).on(&apos;resize&apos;, _.debounce(function() &#123; // Do expensive things&#125;, 100)); ä»Žè¿™é‡Œå¼€å§‹è¦å‡çº§äº†ï¼Œä½ å¯èƒ½éœ€è¦ä½¿ç”¨ requestAnimationFrame æ¥å·¥ä½œï¼Œæ‰€ä»¥å³ä½¿å‡½æ•°æ­£è¢«æ‰§è¡Œï¼Œæµè§ˆå™¨ä¹Ÿä¼šæ ¹æ®å®ƒè‡ªå·±çš„ç†æƒ³æ—¶æœºæ¥å®žçŽ°ã€‚è¿™åœ¨ this Paul Lewis tutorial ä¸€æ–‡ä¸­æœ‰æåŠã€‚ Demoç®€å•çš„å°å®žä¾‹è¿™æ ·ä½ ä»¬å°±èƒ½ä½“ä¼šåˆ°ä¸åŒäº†: è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªæ›´è¯¦å®žçš„ä»‹ç»ï¼šMore demos!]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Javascriptæ·±å…¥æµ…å‡ºä¹‹å®šæ—¶å™¨]]></title>
      <url>%2F2016%2F12%2F28%2Fdeeply_understand_timer%2F</url>
      <content type="text"><![CDATA[å‰ä¸€ç¯‡æ–‡ç« èŠå•çº¿ç¨‹çš„æ—¶å€™ï¼Œç®€è¦çš„æåˆ°äº†å®šæ—¶å™¨çš„æ‰§è¡Œæƒ…å†µã€‚è¿™é‡Œæˆ‘ä»¬å°†å¯¹å…¶è¿›è¡Œæ›´å¤šçš„æŽ¢è®¨ã€‚ setTimeout å’Œ setInterval çš„åŒºåˆ«å¯èƒ½çœ‹åˆ°è¿™ä¸ªå°æ ‡é¢˜å¤§å®¶ç¬¬ä¸€æ—¶é—´æƒ³åˆ°çš„éƒ½æ˜¯ï¼ŒsetTimeout åªæ‰§è¡Œä¸€æ¬¡ï¼Œè€Œ setInterval åˆ™æ˜¯é‡å¤æ‰§è¡Œã€‚Oh,no!æˆ‘ä»¬ä»Šå¤©å½“ç„¶ä¸èƒ½è®²çš„è¿™ä¹ˆæµ…ï¼Œæˆ‘ä»¬éœ€è¦è°ˆåˆ°çš„æ˜¯ è¿­ä»£setTimeout å’Œ setInterval çš„åŒºåˆ«ã€‚ 123456789101112131415function foo1() &#123; // statement1 setTimeout(function bar1() &#123; // statement2 &#125;, 100);&#125;function foo2() &#123; setTimeout(function bar2() &#123; // statement2 &#125;, 100); // statement1&#125; æˆ‘ä»¬æ€è€ƒä¸€ä¸‹ï¼Œä¸Šé¢è¿™æ®µä»£ç ï¼ŒåŒæ ·çš„ä¸¤ä¸ª setTimeout åœ¨ foo1 å’Œ foo2 ä¸­æ‰§è¡Œæƒ…å†µä¼šä¸€æ ·å—ï¼Ÿå¦‚æžœä¸ä¸€æ ·ï¼Œä¸ºä»€ä¹ˆï¼Ÿ ç­”æ¡ˆæ˜¯â€”â€”ä¸ä¸€æ ·ï¼å¾ˆç®€å•ï¼ŒsetTimeout æ‰§è¡Œæ—¶æœºå°±ä¸ä¸€æ ·ï¼Œ bar1 ä¼šæ—©äºŽ bar2 è¿›å…¥ä»»åŠ¡é˜Ÿåˆ—ã€‚çŽ°åœ¨æˆ‘ä»¬è¦æ¥ç»†ç»†åœ°çœ‹ä¸€ä¸‹å®ƒä»¬çš„æ‰§è¡Œæ—¶é—´ç›¸å·®å‡ ä½•ã€‚ å‡è®¾ä»»åŠ¡é˜Ÿåˆ—ä¸ºç©ºï¼Œè¿™æ˜¯æˆ‘ä»¬çš„ç†æƒ³çŽ¯å¢ƒï¼Œå°±åƒç‰©ç†è¯¾ä¸Šæˆ‘ä»¬å‡è®¾å°æœ¨å—ä¸Žå†°é¢çš„æ‘©æ“¦åŠ›ä¸º 0 ã€‚ å¦‚æžœç»§ç»­å‡è®¾ statement1 çš„æ‰§è¡Œæ—¶é—´ä¸º 50ms ï¼Œfoo1 ä¸­ï¼Œä¼šäºŽ 50ms æ—¶å¯åŠ¨å®šæ—¶å™¨ï¼Œå¹¶äºŽ 150ms æ—¶å°† bar1 æ’å…¥ä»»åŠ¡é˜Ÿåˆ—å¹¶ç«‹å³è¢«è¯»å–æ‰§è¡Œï¼Œ foo2 ä¼šäºŽ 0ms å¤„å¯åŠ¨å®šæ—¶å™¨ï¼Œä½†æ˜¯éœ€è¦ 100ms å¤„æ‰èƒ½è¢«æ’å…¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œæ­¤æ—¶ statement1 å·²ç»æ‰§è¡Œå®Œäº†ï¼Œæ‰€ä»¥å¯ä»¥ç«‹å³è¯»å–ã€‚ä»–ä»¬ç›¸å·® 50ms ã€‚ å¦‚æžœå‡è®¾ statement1 çš„æ‰§è¡Œæ—¶é—´ä¸º 200ms ï¼Œfoo1 ä¸­ï¼Œä¼šäºŽ 200ms æ—¶å¯åŠ¨å®šæ—¶å™¨ï¼Œå¹¶äºŽ 300ms æ—¶å°† bar1 æ’å…¥ä»»åŠ¡é˜Ÿåˆ—å¹¶ç«‹å³è¢«è¯»å–æ‰§è¡Œï¼Œ foo2 ä¼šäºŽ 0ms å¤„å¯åŠ¨å®šæ—¶å™¨ï¼Œä½†æ˜¯éœ€è¦ 100ms å¤„æ‰èƒ½è¢«æ’å…¥ä»»åŠ¡é˜Ÿåˆ—ã€‚æ­¤æ—¶ statement1 è¿˜æ²¡æœ‰æ‰§è¡Œå®Œæ¯•ï¼Œéœ€è¦ç»§ç»­ç­‰åˆ°ï¼Œåˆ° 200ms æ—¶å¯ä»¥è¯»å–ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„ bar2ã€‚ä»–ä»¬ç›¸å·® 100ms ã€‚ æ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¾—å‡ºç»“è®ºï¼Œbar1 å’Œ bar2 çš„æ‰§è¡Œæ—¶é—´ç›¸å·®çš„æ˜¯ statement1æ‰§è¡Œæ—¶é—´ å’Œ å®šæ—¶å™¨è®¾å®šæ—¶é—´ ä¸¤è€…ä¸­è¾ƒå°çš„é‚£ä¸ªã€‚ è€Œæˆ‘ä»¬ä½¿ç”¨è¿­ä»£å®šæ—¶å™¨çš„æ—¶å€™å¤§å¤šæ˜¯åƒ foo1 é‚£æ ·ä½¿ç”¨ï¼Œå› ä¸ºåœ¨è¿›è¡Œä¸‹ä¸€æ¬¡çš„ setTimeout ä¹‹å‰ï¼Œæˆ‘ä»¬ä¼šæœ‰ä¸€äº›å¿…è¦çš„æ“ä½œä»¥åŠåˆ¤æ–­ã€‚è€Œè¿™ä¹Ÿå°±ä»£è¡¨ç€ï¼Œä¸¤æ¬¡ setTimeout ä¹‹é—´çš„é—´éš”æ˜¯ &gt;= æŒ‡å®šæ—¶é—´çš„ã€‚ setInterval åˆ™ä¸ç„¶ï¼Œå®ƒä¸ç®¡ä½ çš„å›žè°ƒå‡½æ•°é‡Œé¢éƒ½éœ€è¦æ€Žæ ·çš„æ“ä½œï¼Œå®ƒä¼šå¾ˆå‡†æ—¶çš„æ¯éš”æŒ‡å®šçš„æ—¶é—´å°±åŽ»å‘ä»»åŠ¡é˜Ÿåˆ—ä¸­æ·»åŠ ä»»åŠ¡çš„ã€‚ setInterval çš„ç¼ºç‚¹setInterval çš„å®šæ—¶çš„å‡†ç¡®æ€§ï¼Œçœ‹ä¼¼å®Œç¾Žï¼Œå®žåˆ™ä¸ç„¶ã€‚æˆ‘ä»¬å›žé¡¾ä¸€ä¸‹ä¸Šä¸€ç¯‡æ–‡ç« ä¸­å±•ç¤ºçš„ä¾‹å­ï¼Œé¦–å…ˆï¼Œå¦‚æžœå½“å‰é˜Ÿåˆ—ä¸­æœ‰ç›¸åŒçš„ setInterval å®žä¾‹ï¼Œåˆ™æ— æ³•ç»§ç»­æ·»åŠ ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¯èƒ½ä¼šé€ æˆ setInterval çš„æ‰§è¡Œæ¬¡æ•°çš„é—æ¼ã€‚å†è€…ï¼Œå¦‚æžœ setinterval ä¹‹å‰è¢«é˜»å¡žäº†ï¼Œé‚£ä¹ˆåˆ™ä¼šé€ æˆæŽ¥ä¸‹æ¥çš„ä¸¤æ¬¡ setinterval çš„æ‰§è¡Œé—´éš”æ—¶é—´å°äºŽæŒ‡å®šæ—¶é—´ã€‚ å› ä¸ºè¿™ä¸¤ä¸ªç‰¹æ€§ï¼Œæ‰€ä»¥å¾ˆå¤šäººéƒ½ä¼šå»ºè®®è¯´å°‘ç”¨ setInterval ï¼Œæ”¹ç”¨è¿­ä»£ setTimeout ã€‚ä½†æ˜¯è¯šå¦‚ä¸Šé¢æˆ‘ä»¬çœ‹åˆ°çš„ï¼Œ setTimeout ä¹Ÿä¸å¦‚æˆ‘ä»¬æ‰€æƒ³è±¡çš„é‚£ä¹ˆå®Œç¾Žï¼Œé‚£ä¹ˆæˆ‘ä»¬æœ‰æ²¡æœ‰ä»€ä¹ˆæ›´å¥½çš„è§£å†³æ–¹æ³•å‘¢ï¼Ÿ requestAnimationFrameå¤§å¤šæ˜¾ç¤ºå™¨çš„æ˜¾ç¤ºé¢‘çŽ‡æ˜¯ 60HZ ï¼Œä¹Ÿå°±æ˜¯æ¯æ¬¡åˆ·æ–°é—´éš” 16.7ms ï¼Œå¦‚æžœæˆ‘ä»¬ä½¿ç”¨ setTimeout/setInterval çš„é—´éš”å°äºŽ 16.7ms ï¼Œè¿™å°±è¦é€ æˆæ˜¾ç¤ºå™¨é‡ç»˜çš„å µå¡žåŽ‹åŠ›ï¼Œæ¯éš”ä¸€æ®µæ—¶é—´å°±ä¼šä¸¢å¤±æŽ‰ä¸€æ¬¡å®šæ—¶å™¨çš„æ‰§è¡Œç»˜åˆ¶ã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä½• setTimeout çš„å®šæ—¶å™¨æŽ¨èæœ€å°ä½¿ç”¨ 16.7ms ã€‚ requestAnimationFrame å³æ—¶é¡ºåº”æ—¶ä»£çš„æµªæ½®è€Œå‡ºç”Ÿçš„ï¼Œå®ƒå’Œä¸Šé¢é‚£ä¸¤ä½æœ€å¤§çš„åŒºåˆ«æ˜¯ï¼Œå®ƒçš„æ‰§è¡Œé—´éš”æ—¶é—´æ˜¯ä¸ç”±æˆ‘ä»¬æ¥æŽ§åˆ¶çš„ï¼Œåªè·Ÿç€æ˜¾ç¤ºå™¨çš„ç»˜åˆ¶é—´éš”èµ°ï¼Œæ˜¾ç¤ºå™¨å¤šä¹…ç»˜åˆ¶ä¸€æ¬¡ï¼Œå®ƒå°±å¤šä¹…æ‰§è¡Œä¸€æ¬¡ã€‚ å½“ç„¶ï¼Œå®ƒçš„å¦™ç”¨å¯ä¸ä»…ä»…åªæ˜¯è¿™äº›ï¼Œå¦‚æžœåŒæ—¶æœ‰å‡ ä¸ª requestAnimationFrame ï¼Œé¡µé¢é‡ç»˜ä¹‹å‰ï¼Œä¼šé€šçŸ¥æµè§ˆå™¨æŠŠéœ€è¦æ‰§è¡Œçš„å‡ ä¸ªå‡½æ•°æ‰§è¡Œä¸€ä¸‹ï¼ˆå®ƒä»¬å¯èƒ½åœ¨ä¸åŒçš„ requestAnimationFrame ä¸­ï¼‰ï¼Œæ‰§è¡Œå¥½äº†ä¹‹åŽä¸€å¹¶ç»˜åˆ¶ï¼Œè€Œåœ¨ setTimeout ä¸­åˆ™ä¸è¡Œï¼Œå¤§å®¶æŽ’é˜Ÿï¼ŒæŒ¨ä¸ªæ‰§è¡Œç„¶åŽé‡ç»˜ã€‚ è€Œä¸”å¦‚æžœé¡µé¢æœ€å°åŒ–äº†ï¼Œæˆ–è€…è¢«åˆ‡æ¢åˆ°å…¶ä»– Tab äº†ï¼Œ requestAnimationFrame ä¼šæš‚åœæ‰§è¡Œï¼Œä¼˜åŒ–èµ„æºçš„åˆ©ç”¨ã€‚ ä½†æ˜¯å®ƒä¸æ”¯æŒ IE9 åŠä¹‹å‰çš„ç‰ˆæœ¬å“¦ï½ž æœ€åŽæˆ‘ä»¬å°±æ”¾ä¸ªå®žä¾‹å§ã€‚ å®šæ—¶å™¨ä¸œè¥¿ä¸å¤šï¼Œè¿™å°±è®²å®Œäº†ï¼Œä¸‹ä¸€ç¯‡æ–‡ç« å¯ä»¥çœ‹ä¸€ä¸‹å®šæ—¶å™¨çš„ä¸€äº›åº”ç”¨ï½ž]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Javascriptæ·±å…¥æµ…å‡ºä¹‹å•çº¿ç¨‹]]></title>
      <url>%2F2016%2F12%2F27%2Fdeeply_understand_single_thread%2F</url>
      <content type="text"><![CDATA[åœ¨ CSS3 å‡ºæ¥ä»¥å‰ï¼Œæˆ‘ä»¬é€šè¿‡ setTimeout å’Œ setInterval æ¥å®žçŽ°åŠ¨ç”»ï¼Œæˆ‘ä»¬ç†Ÿæ‚‰å¹¶ä¸”çƒ­è¡·äºŽå®ƒä»¬çš„ä½¿ç”¨ï¼Œä½†å®ƒèƒŒåŽçš„åŽŸç†å´æœªæ·±ç©¶ã€‚æŠŠæ¡æ ¸å¿ƒï¼Œæ·±ç©¶é—®é¢˜çš„æ ¹æœ¬ï¼Œæ°¸è¿œæ˜¯æˆ‘ä»¬çš„æ ¸å¿ƒï¼Œä»Šå¤©æˆ‘ä»¬äº†è§£ä¸€ä¸‹å®šæ—¶å™¨èƒŒåŽçš„ç”·äººâ€”â€”å•çº¿ç¨‹ã€‚ 12345setTimeout(function() &#123; console.log('0');&#125;, 0);console.log('1'); å‡ºä¹Žæ„æ–™ï¼Œä¸Šé¢è¿™æ®µä»£ç ï¼Œä¼šå…ˆè¾“å‡º 1ï¼Œç„¶åŽè¾“å‡º 0ã€‚ï¼ˆç­‰æˆ‘ä»¬æŽŒæ¡äº†å•çº¿ç¨‹ï¼Œä¹Ÿå°±è¿Žåˆƒè€Œè§£äº†ï¼‰ JSçš„å•çº¿ç¨‹ä¸€ä¸ªæµè§ˆå™¨è¿›ç¨‹ï¼Œæ‹¥æœ‰å¾ˆå¤šçº¿ç¨‹ï¼Œæ¯”å¦‚ GUI æ¸²æŸ“çº¿ç¨‹ã€äº‹ä»¶è§¦å‘çº¿ç¨‹ã€HTTP è¯·æ±‚çº¿ç¨‹ï¼Œä»¥åŠ js å¼•æ“Žçº¿ç¨‹ã€‚ js å•çº¿ç¨‹å°±æ˜¯æŒ‡ js çš„çº¿ç¨‹åªæœ‰ä¸€æ¡ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒåŒä¸€æ—¶é—´ï¼Œåªæœ‰æŸä¸ªä»»åŠ¡èƒ½å¤Ÿæ‰§è¡Œï¼Œè¿™æ®µä»£ç å¯èƒ½æ˜¯åˆå§‹åŒ–æ‰§è¡Œçš„ä»£ç ï¼Œå¯èƒ½æ˜¯æŸä¸ªå…ƒç´ çš„ç‚¹å‡»äº‹ä»¶ï¼Œä¹Ÿå¯èƒ½æ˜¯ ajax è¯·æ±‚çš„å›žè°ƒå‡½æ•°ã€‚ javascript æ“ä½œå‡ ä¹Žéƒ½æ˜¯é€šè¿‡é¡µé¢å±•ç¤ºå‡ºæ¥çš„ï¼Œå¤§å¤šä¼šç”¨åˆ° DOM æ“ä½œï¼Œè®¾æƒ³ä¸€ä¸‹ï¼Œå¦‚æžœæˆ‘æœ‰ä¸¤ä¸ªæ“ä½œæ¶‰åŠåˆ°äº†åŒä¸€ä¸ªå…ƒç´ ï¼Œè€Œä»–ä»¬åˆæ˜¯å†²çªçš„ï¼Œæµè§ˆå™¨éœ€è¦å¦‚ä½•å¤„ç†ï¼Ÿå½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åƒå…¶ä»–è¯­è¨€ä¸€æ ·ï¼Œä¸º javascript è®¾è®¡è¯¸å¦‚ äº’æ–¥é” æˆ–è€… ä¿¡å·é‡ çš„æœºåˆ¶æ¥å®žçŽ°å¤šçº¿ç¨‹çš„åè°ƒå¤„ç†ï¼Œä½†æ˜¯è¿™ä¼šç»™å®šä½è½»é‡çº§è„šæœ¬è¯­è¨€çš„ javascript å¸¦æ¥ç¹æ‚è®¡ç®—é‡çš„æˆæœ¬ã€‚ js çº¿ç¨‹æ‰§è¡Œçš„æ—¶å€™ï¼Œä¼šé˜»å¡žå…¶ä»–çº¿ç¨‹çš„æ‰§è¡Œã€‚æ¯”å¦‚ä¸‹é¢è¿™æ®µä»£ç ï¼Œæˆ‘ä»¬ä¼šå‘çŽ°ï¼Œæµè§ˆå™¨ä¸ä¼šåœ¨æ¯ä¸€ä¸ªå¾ªçŽ¯é‡ŒåŽ»é‡æ–°æ¸²æŸ“é¡µé¢ï¼Œå®ƒä¼šç­‰å¾…è¿™æ®µ js æ‰§è¡Œå®Œæ¯•ï¼Œå†åŽ»æ‰§è¡Œ GUI æ¸²æŸ“çº¿ç¨‹ï¼Œå½“ç„¶ï¼Œæµè§ˆå™¨ä¼šè¿›è¡Œä¸€å®šçš„ä¼˜åŒ–ï¼Œæ‰€ä»¥æœ€ç»ˆæˆ‘ä»¬çœ‹åˆ°çš„æ˜¯ï¼Œæµè§ˆå™¨ç›´æŽ¥æ˜¾ç¤ºå‡º 1000000ï¼Œè€Œä¸æ˜¯ 0 - 1000000 æžé€Ÿé—ªè¿‡ã€‚ 1234567var span = document.getElementsByTagName('span')[0], i; for (i = 0; i &lt;= 1000000; i++) &#123; span.innerHTML = i;&#125; ä¸Šé¢æˆ‘æåˆ°äº†ï¼Œä¸€ä¸ªæµè§ˆå™¨æœ‰ä¸€ä¸ªè¿›ç¨‹ï¼Œä½†æ˜¯æˆ‘ä»¬å¯çˆ±çš„ Chrome è‡ªæœ‰å…¶å¯çˆ±ä¹‹å¤„ï¼Œå®ƒä¸ºäº†é˜²æ­¢â€”â€”å› ä¸ºä¸€ä¸ªé¡µé¢çš„ js çš„ä¸å¥½çš„æ‰§è¡Œå½±å“æµè§ˆå™¨çš„æ‰€æœ‰é¡µé¢ï¼Œæ‰€ä»¥å®ƒä¸ºæ¯ä¸ªé¡µé¢å¼€äº†ä¸€ä¸ªè¿›ç¨‹ã€‚å½“ç„¶ï¼Œè¿™é‡Œæˆ‘åªå¯¹ Chrome å’Œ Firefox è¿›è¡Œäº†æµ‹è¯•ï¼Œie æˆ‘æ˜¯ä¸€ç›´éƒ½çŸ¥é“çš„ï¼Œå®ƒæ˜¯æ•´ä¸ªæµè§ˆå™¨ä¸€ä¸ªè¿›ç¨‹ã€‚æ•´ä¸ªæµè§ˆå™¨ä¸€ä¸ªè¿›ç¨‹æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿæ‰€æœ‰é¡µé¢å…±ç”¨ä¸€ä¸ª js çº¿ç¨‹ï¼Œä¹Ÿå°±æ˜¯ï¼ŒA é¡µé¢å¦‚æžœæœ‰ä¸€æ®µè€—æ—¶å¾ˆé•¿çš„ä»£ç æ­£åœ¨æ‰§è¡Œï¼Œ B é¡µé¢è§¦å‘ä¸€ä¸ªå…ƒç´ çš„ç‚¹å‡»äº‹ä»¶å¹¶ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œéœ€è¦ç­‰å¾… A é¡µé¢çš„ js æ‰§è¡Œå®Œæ¯•ã€‚ Event Loopå•çº¿ç¨‹æ„å‘³ç€åŒä¸€æ—¶é—´åªèƒ½æ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œæ˜¯ä¸æ˜¯è¯´ Javascript æ˜¯åŒæ­¥çš„ï¼Ÿé‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜ä¼šæœ‰ XHR å¼‚æ­¥è¯·æ±‚ï¼Ÿå¦‚æžœæœ‰å¥½å‡ ä¸ªäº‹ä»¶ç­‰ç€è¢«æ‰§è¡Œï¼Œè¯¥å¦‚ä½•å®‰æŽ’ï¼Ÿ js çº¿ç¨‹ä¸Šçš„ä»£ç æ˜¯é¡ºåºæ‰§è¡Œçš„ï¼Œæ˜¯åŒæ­¥çš„ã€‚è€ŒéžåŒæ­¥çš„ï¼Œè¯¸å¦‚å“åº”äº‹ä»¶ï¼Œ ajax è¯·æ±‚ï¼Œå®šæ—¶å™¨äº‹ä»¶ï¼Œå®ƒä»¬éƒ½è¢«æ”¾ç½®åˆ°ä¸€ä¸ªé˜Ÿåˆ—é‡Œé¢ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºä»»åŠ¡é˜Ÿåˆ—ã€‚ å‰é¢æˆ‘ä»¬è®²è¿‡ï¼Œå‡½æ•°è¢«è°ƒç”¨çš„æ—¶å€™ï¼Œä¼šåˆ›å»ºä¸Šä¸‹æ–‡ï¼Œå½¢æˆä¸Šä¸‹æ–‡æ ˆï¼Œå½“å‡½æ•°è¿”å›žåŽï¼Œå…¶ä¸Šä¸‹æ–‡ä¼šé€€å‡ºæ ˆã€‚å¦‚æžœæ ˆç©ºäº†ï¼Œå°±ä¼šä»Žä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œè¯»å–æŽ’åœ¨æœ€å‰é¢çš„äº‹ä»¶å¹¶æ‰§è¡Œã€‚ ä¸‹é¢æˆ‘ä»¬å°±è¦ä¸»è¦è®²ä¸€è®²ä»»åŠ¡é˜Ÿåˆ—çš„ç”±æ¥äº†ã€‚ èº«å¤„æ‰§è¡Œæ ˆä¸­çš„ä»£ç ä¼šè°ƒç”¨å¤–éƒ¨çš„å„ç§ API ï¼Œæˆ‘ä»¬æ‹¿ XMLHttpRequest æ¥è¯´ã€‚JS çš„æ‰§è¡Œçº¿ç¨‹å‘èµ·å¼‚æ­¥è¯·æ±‚ï¼Œæµè§ˆå™¨ä¼šå¼€ä¸€æ¡æ–°çš„ HTTP è¯·æ±‚çº¿ç¨‹æ¥æ‰§è¡Œè¯·æ±‚ï¼Œè¿™æ—¶å€™ JS çš„è¿™ä¸€æ­¥ä»»åŠ¡å·²å®Œæˆï¼Œä¼šç»§ç»­æ‰§è¡Œä¸‹é¢çš„å…¶ä»–ä»»åŠ¡ã€‚ç„¶åŽåœ¨ä¹‹åŽçš„æŸä¸€åˆ»ï¼Œ js çš„äº‹ä»¶è§¦å‘çº¿ç¨‹ç›‘å¬åˆ°åˆšæ‰çš„ HTTP è¯·æ±‚å·²å®Œæˆï¼Œå®ƒå°±ä¼šæŠŠå›žè°ƒå‡½æ•°æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„å°¾éƒ¨ç­‰å¾…æ‰§è¡Œã€‚æ‰€ä»¥ï¼Œjs çš„å•çº¿ç¨‹ å’Œ å¼‚æ­¥ æ›´å¤šåœ°åº”è¯¥æ˜¯å±žäºŽæµè§ˆå™¨çš„è¡Œä¸ºã€‚ ä»»åŠ¡é˜Ÿåˆ—å°±æ˜¯ç”±è¿™äº›å¼‚æ­¥äº‹ä»¶æˆ–è€…å¼‚æ­¥è¯·æ±‚çš„å›žè°ƒå‡½æ•°ç»„æˆçš„ï¼ŒJS çº¿ç¨‹æœ€åŽæ‰§è¡Œçš„å¼‚æ­¥ä»»åŠ¡ï¼Œå…¶å®žå°±æ˜¯è¿™äº›å›žè°ƒå‡½æ•°ã€‚ ä»»åŠ¡é˜Ÿåˆ—æ˜¯ä¸€ä¸ªå…ˆè¿›å…ˆå‡ºï¼ˆFIFOï¼‰çš„é˜Ÿåˆ—ï¼ŒæŽ’åœ¨å‰é¢çš„äº‹ä»¶ï¼Œä¼šæœ€å…ˆè¢«è¯»å–æ‰§è¡Œã€‚ç„¶åŽå†åˆ›å»ºæ‰§è¡Œä¸Šä¸‹æ–‡ï¼ŒæŽ¨å…¥æ ˆä¸­ï¼Œä¾æ­¤å¾ªçŽ¯å¾€å¤ã€‚ å€ŸåŠ©ä¸‹é¢çš„å›¾ç‰‡æ¥çœ‹ä¸€ä¸‹ï¼Œä»¿ç…§çš„ ã€ŠHelp, Iâ€™m stuck in an event-loopã€‹ ä¸­çš„å›¾ç‰‡ã€‚ å®šæ—¶å™¨setTimeout å’Œ setInterval æ˜¯é€šè¿‡å®šæ—¶å™¨çº¿ç¨‹è¿›è¡Œå¤„ç†çš„ï¼Œå®ƒä¼šåœ¨æŒ‡å®šæ—¶é—´ä¹‹åŽå°†å›žè°ƒå‡½æ•°æ”¾å…¥ä»»åŠ¡é˜Ÿåˆ—ä¸­ã€‚æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¸‹é¢è¿™å¼ å›¾ï¼ˆæ¥è‡ªäºŽã€ŠJavaScriptå¿è€…ç§˜ç±ã€‹ï¼‰ã€‚ ç”±äºŽåœ¨ 0-10ms æœŸé—´è§¦å‘äº† click äº‹ä»¶ï¼Œæ‰€ä»¥äº‹ä»¶å¤„ç†å‡½æ•°è¢«æ”¾ç½®åœ¨äº†ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¹¶ä¸”å¤„äºŽä»»åŠ¡é˜Ÿåˆ—æœ€å‰ç«¯ï¼Œä½†æ˜¯ç”±äºŽå½“å‰ä»£ç è¿˜æœªæ‰§è¡Œå®Œæ¯•ï¼Œæ‰€ä»¥ä¸èƒ½ç«‹å³è¯»å–æ‰§è¡Œ click äº‹ä»¶å›žè°ƒå‡½æ•°ã€‚10ms çš„æ—¶å€™ setTimeout å’Œ setInterval çš„å›žè°ƒå‡½æ•°è¢«æ”¾ç½®åˆ°ä»»åŠ¡é˜Ÿåˆ—ï¼Œç´§éš click äº‹ä»¶ã€‚ åˆ°äº† 18ms çš„æ—¶å€™ï¼Œjs çº¿ç¨‹çš„ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œå…ˆæ‰§è¡Œä»»åŠ¡é˜Ÿåˆ—æœ€å‰ç«¯çš„ click äº‹ä»¶å›žè°ƒå‡½æ•°ï¼Œåœ¨å…¶æ‰§è¡ŒæœŸé—´ï¼Œ20ms å¤„ï¼ŒsetInterval ç¬¬äºŒæ¬¡æƒ³è¦æ’å…¥é˜Ÿåˆ—å°¾éƒ¨ï¼Œä½†æ˜¯ç”±äºŽæ‹¥æœ‰ç›¸åŒå›žè°ƒå‡½æ•°çš„ setInterval å®žä¾‹å·²ç»å­˜åœ¨äº†ï¼Œæ‰€ä»¥è¿™æ¬¡çš„å°†è¢«åºŸå¼ƒï¼Œä¸èƒ½ç»§ç»­æ’å…¥åˆ°é˜Ÿåˆ—ä¸­ã€‚ åœ¨ 27ms å¤„ï¼Œ click äº‹ä»¶ç»“æŸï¼Œç›¸åº”åœ°å¼€å§‹æ‰§è¡Œ setTimeout çš„å›žè°ƒå‡½æ•°ï¼Œåœ¨å…¶æ‰§è¡ŒæœŸé—´ï¼Œ30ms å¤„ï¼ŒsetInterval ç¬¬ä¸‰æ¬¡æƒ³è¦æ’å…¥é˜Ÿåˆ—å°¾éƒ¨ï¼ŒåŒç†ï¼Œä¸èƒ½ç»§ç»­æ’å…¥åˆ°é˜Ÿåˆ—ä¸­ã€‚ åœ¨ 34ms å¤„ï¼Œ setTimeout äº‹ä»¶ç»“æŸï¼Œç›¸åº”åœ°å¼€å§‹æ‰§è¡Œ setInterval çš„å›žè°ƒå‡½æ•°ï¼Œåœ¨å…¶æ‰§è¡ŒæœŸé—´ï¼Œ40ms å¤„ï¼ŒsetInterval ç¬¬å››æ¬¡æƒ³è¦æ’å…¥é˜Ÿåˆ—å°¾éƒ¨ï¼Œç”±äºŽè¿™æ—¶å€™é˜Ÿåˆ—ä¸­å·²ç»æ²¡æœ‰ setInterval çš„å®žä¾‹äº†ï¼Œæ‰€ä»¥æˆåŠŸæ’å…¥åˆ°é˜Ÿåˆ—ä¸­ã€‚ åœ¨ 42ms å¤„ï¼Œ ç¬¬ä¸€ä¸ª setInterval äº‹ä»¶ç»“æŸï¼Œç›¸åº”åœ°å¼€å§‹æ‰§è¡Œç¬¬äºŒä¸ª setInterval çš„å›žè°ƒå‡½æ•°â€¦ é›¶å»¶è¿Ÿ setTimeoutå»¶è¿Ÿæ—¶é—´ä¸º 0 çš„ setTimeout ä¸ä¸€å®šå°±æ˜¯ç«‹å³æ‰§è¡Œï¼Œè¿™éœ€è¦çœ‹å½“å‰æ ˆæ˜¯å¦ä¸ºç©ºï¼Œä»¥åŠä»»åŠ¡é˜Ÿåˆ—ä¸­åœ¨å…¶å‰é¢æ˜¯å¦æœ‰æ­£åœ¨æŽ’é˜Ÿçš„ä»»åŠ¡ã€‚ æˆ‘ä»¬ä¸Šé¢æ‰€çœ‹çš„è¿™æ®µä»£ç ï¼Œå°±æ˜¯æŒ‡å½“å‰ä»£ç æ‰§è¡Œå®ŒåŽï¼ˆç­‰å¾…å½“å‰æ ˆä¸ºç©ºï¼‰ï¼Œç«‹å³æ‰§è¡Œå›žè°ƒå‡½æ•°ï¼ˆå‡è®¾ä»»åŠ¡é˜Ÿåˆ—ä¸­åœ¨å…¶ä¹‹å‰æ²¡æœ‰æ­£åœ¨æŽ’é˜Ÿçš„ä»»åŠ¡ï¼‰ã€‚ 12345setTimeout(function() &#123; console.log('0');&#125;, 0);console.log('1'); åˆ†è§£é•¿è€—æ—¶ä»»åŠ¡åˆ©ç”¨ä¸Šé¢æˆ‘ä»¬åˆšåˆšå­¦ä¹ çš„ é›¶å»¶è¿ŸsetTimeout å¯ä»¥ç»™æˆ‘ä»¬å¸¦æ¥ä¸€ä¸ªå®žé™…çš„å¼€å‘ç¦åˆ©ï¼Œå½“æˆ‘ä»¬è¿›è¡Œä¸€ä¸ªéœ€è¦è€—æ—¶ç‰¹åˆ«ä¹…çš„ä»»åŠ¡æ—¶ï¼Œæˆ‘ä»¬åº”å½“è€ƒè™‘ä¸€ä¸‹ï¼Œç”¨æˆ·æ˜¯å¦èƒ½å¤Ÿæ„¿æ„ç­‰å¾…è¿™ä¹ˆä¹…ã€‚æ‰€ä»¥ï¼Œæˆ‘ä¹ˆéœ€è¦è¿›è¡Œä¸€äº›å¿…è¦çš„åˆ†è§£ã€‚ 1234567var container = document.getElementById('container');for (var i = 0; i &lt; 200000; i++) &#123; var span = document.createElement('span'); span.appendChild(document.createTextNode(i)); container.appendChild(span);&#125; è¿™æ®µä»£ç åˆ›å»ºäº† 200000 ä¸ªDOMèŠ‚ç‚¹ï¼Œå¯¹äºŽæµè§ˆå™¨æ¥è¯´æ˜¯ä¸ªæŒºå¤§çš„è´Ÿæ‹…ï¼Œæµè§ˆå™¨ä¹Ÿéœ€è¦ä¸€æ®µæ—¶é—´æ¥è®¡ç®—å¹¶æ¸²æŸ“ï¼Œä¹Ÿæžæœ‰å¯èƒ½å½±å“ç”¨æˆ·çš„äº¤äº’æ“ä½œã€‚ æ‰€ä»¥æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯æŠŠå®ƒåˆ†æˆå‡ ä¸ªæ­¥éª¤ï¼Œå¥½è®©åŽé¢çš„ä»£ç èƒ½å¤Ÿç»§ç»­æ‰§è¡Œï¼Œä¹Ÿèƒ½å‡è½»æµè§ˆå™¨çš„åŽ‹åŠ›ã€‚ 1234567891011121314151617181920var container = document.getElementById('container'), count = 200000, devide = 5, chunkSize = count/devide, iteration = 0; setTimeout(function generate() &#123; for (var i = 0; i &lt; chunkSize; i++) &#123; var base = chunkSize * iteration; var span = document.createElement('span'); span.appendChild(document.createTextNode((i + base) + ',' + iteration)); container.appendChild(span); &#125; iteration++; if (iteration &lt; devide) &#123; setTimeout(generate, 0); &#125;&#125;, 0); æµè§ˆå™¨æ˜¯å¤šçº¿ç¨‹çš„ï¼Œjs æ˜¯å•çº¿ç¨‹çš„ã€‚ å¼‚æ­¥ä»»åŠ¡çš„å›žè°ƒå‡½æ•°éƒ½ä¼šè¢«æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ä¸­ï¼Œå½“ä¸”ä»…å½“æ‰§è¡Œæ ˆä¸ºç©ºæ—¶ï¼Œæ‰ä¼šè¯»å–ä»»åŠ¡é˜Ÿåˆ—çš„ç¬¬ä¸€ä¸ªä»»åŠ¡ã€‚ å•çº¿ç¨‹å¸¦æ¥çš„æ˜¯æŸäº›æ—¶å€™äº‹ä»¶å“åº”ä¸æŒ‰ç…§æˆ‘ä»¬é¢„å®šçš„æ—¶é—´èŠ‚ç‚¹æ‰§è¡Œã€‚ å¯¹äºŽè€—æ—¶è¿‡ä¹…çš„ä»»åŠ¡ï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒåˆ†è§£æˆå¤šæ­¥è¿›è¡Œï¼Œå…·ä½“åˆ†ä¸ºå‡ æ­¥ï¼Œæ ¹æ®å®žé™…æƒ…å†µå³å¯ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[ä¸€ç§æœ‰è¶£çš„JavaScriptå†…å­˜æ³„æ¼[è¯‘]]]></title>
      <url>%2F2016%2F11%2F24%2FAn-interesting-kind-of-JavaScript-memory-leak%2F</url>
      <content type="text"><![CDATA[åŽŸæ–‡é“¾æŽ¥ï¼šhttp://info.meteor.com/blog/an-interesting-kind-of-javascript-memory-leak æœ€è¿‘ï¼ŒAvi å’Œ David åœ¨ Meteor çš„å®žæ—¶HTMLæ¨¡æ¿æ¸²æŸ“ç³»ç»Ÿä¸­è·Ÿè¸ªäº†ä¸€ä¸ªæƒŠäººçš„ JavaScript å†…å­˜æ³„æ¼ã€‚ä¿®å¤å°†åœ¨ 0.6.5 ç‰ˆæœ¬å‘å¸ƒï¼ˆçŽ°åœ¨å¤„äºŽ QA æœ€åŽé˜¶æ®µï¼‰ã€‚ æˆ‘åœ¨ç½‘ä¸Šæœç´¢å…³äºŽ javascript é—­åŒ…å†…å­˜æ³„æ¼çš„å˜åŒ–ï¼Œç½‘ä¸Šå¹¶æœªæåŠç›¸å…³äº‹æƒ…ï¼Œä¼¼ä¹Žåœ¨ JavaScript ä¸»é¢˜ä¸‹ï¼Œè¿™æ˜¯ä¸€ä¸ªé²œä¸ºäººçŸ¥çš„è¯é¢˜ã€‚ï¼ˆå¤§å¤šæ•°ä½ æ‰¾åˆ°çš„è°ˆè®ºçš„æ˜¯è€ç‰ˆæœ¬IEçš„å·®åŠ²çš„åžƒåœ¾æ”¶é›†ç®—æ³•ï¼Œä½†è¿™ä¸ªé—®é¢˜å½±å“ç”šè‡³æˆ‘ç›®å‰çš„Chromeå®‰è£…ï¼ï¼‰æˆ‘åŽæ¥å‘çŽ°äº†ä¸€ä¸ªå¾ˆæ£’çš„åšå®¢ï¼Œç”±ä¸€ä¸ªV8å¼€å‘äººå‘˜å‘å¸ƒåœ¨æ­¤ä¸»é¢˜ä¸Šï¼Œä½†ä¼¼ä¹Žå¤§å¤šæ•° JavaScript ä½¿ç”¨è€…è¿˜ä¸çŸ¥é“ä»–ä»¬å¿…é¡»æ³¨æ„è¿™ä¸€ç‚¹ã€‚ JavaScriptæ˜¯ä¸€é—¨ç¥žç§˜çš„å‡½æ•°å¼ç¼–ç¨‹è¯­è¨€ï¼Œè€Œä¸”ä»–çš„å‡½æ•°å°±æ˜¯é—­åŒ…ï¼šå‡½æ•°å¯¹è±¡æœ‰æƒè®¿é—®å®šä¹‰åœ¨å®ƒä»¬å°é—­èŒƒå›´å†…çš„å˜é‡ï¼Œç”šè‡³åœ¨æ­¤èŒƒå›´å·²ç»ç»“æŸçš„æ—¶å€™ã€‚ä¸€æ—¦å‡½æ•°è¿è¡Œç»“æŸï¼Œé—­åŒ…æ‰€æ•èŽ·çš„å±€éƒ¨å˜é‡å°±ä¼šè¢«åžƒåœ¾å›žæ”¶ï¼Œæ‰€æœ‰å®šä¹‰åœ¨é—­åŒ…èŒƒå›´å†…çš„å‡½æ•°éƒ½ä¼šè‡ªæˆ‘è¿›è¡Œåžƒåœ¾å›žæ”¶ã€‚ çŽ°åœ¨ï¼Œè€ƒè™‘ä¸€ä¸‹è¿™æ®µä»£ç ï¼š 12345678var theThing = null;var replaceThing = function () &#123; var originalThing = theThing; theThing = &#123; longStr: new Array(1000000).join('*') &#125;;&#125;;setInterval(replaceThing, 1000); æ¯ä¸€ç§’ï¼Œæˆ‘ä¹ˆéƒ½ä¼šæ‰§è¡Œ replaceThing å‡½æ•°ã€‚ä»–ç”¨åŒ…å«æ–°åˆ†é…çš„å·¨åž‹å­—ç¬¦ä¸²çš„æ–°çš„å¯¹è±¡æ¥æ›¿æ¢ theThing ï¼ŒæŠŠ theThing çš„åŽŸå§‹å€¼ä¿å­˜åœ¨äº†å±€éƒ¨å˜é‡ originalThing ä¸­ã€‚åœ¨å®ƒè¿”å›žåŽï¼Œ theThing çš„æ—§å€¼ä¼šè¢«åžƒåœ¾å›žæ”¶ï¼ŒåŒ…æ‹¬å®ƒé‡Œé¢çš„é•¿å­—ç¬¦ä¸²ï¼Œå› ä¸ºæ²¡æœ‰ä»»ä½•ä¸œè¥¿ä¸€ç›´æŒ‡å‘å®ƒã€‚æ‰€ä»¥ï¼Œè¿™æ®µä»£ç ç”¨åˆ°çš„å†…å­˜å¤§ä½“ä¸Šæ˜¯æ’å®šçš„ï¼šå®ƒä¼šä¸€ç›´åˆ†é…å¤§å­—ç¬¦ä¸²ï¼Œä½†æ˜¯æ¯ä¸€æ¬¡ä»–éƒ½ä¼šåˆ é™¤å…ˆå‰çš„å¤§å­—ç¬¦ä¸²ã€‚ ä½†æ˜¯å¦‚æžœæˆ‘ä»¬æœ‰ä¸€ä¸ªæ¯” replaceThing æ›´é•¿å¯¿çš„é—­åŒ…ä¼šæ€Žä¹ˆæ ·ï¼Ÿ 1234567891011var theThing = null;var replaceThing = function () &#123; var originalThing = theThing; theThing = &#123; longStr: new Array(1000000).join('*'), someMethod: function () &#123; console.log(someMessage); &#125; &#125;;&#125;;setInterval(replaceThing, 1000); someMethod ç†è®ºä¸Šå¯ä»¥å¼•ç”¨ originalThing ï¼Œæ‰€ä»¥åªè¦ someMethod å­˜æ´»ç€ï¼Œ originalThing å°±åº”å½“è¢«ä¿ç•™å—ï¼Ÿè¿™å°†å¯¼è‡´æ— é™çš„å†…å­˜å¢žé•¿ï¼Œå› ä¸ºæ¯ä¸ªç‰ˆæœ¬çš„ theThing éƒ½ä¼šæŠ“ä½æŒ‡å‘ä¸Šä¸€ä¸ªç‰ˆæœ¬çš„æŒ‡é’ˆã€‚ å¹¸è¿çš„æ˜¯ï¼ŒçŽ°ä»£çš„ JavaScript å®žçŽ°ï¼ˆåŒ…æ‹¬ Chrome å’Œ Node ä¸­ç›®å‰çš„ V8 ï¼‰è¶³å¤Ÿèªæ˜Žï¼Œèƒ½å¤Ÿæ³¨æ„åˆ° originalThing åœ¨é—­åŒ… someMethod ä¸­æœªè¢«å®žé™…åº”ç”¨ï¼Œæ‰€ä»¥å®ƒæ²¡æœ‰è¢«æ”¾åˆ° someMethod çš„è¯æ³•çŽ¯å¢ƒä¸­ï¼Œæ‰€ä»¥å½“ replaceThing ç»“æŸæ—¶ï¼Œæ˜¯å¯ä»¥å¯¹ä¹‹å‰çš„ theThing è¿›è¡Œåžƒåœ¾å›žæ”¶çš„ã€‚ ï¼ˆä½†æ˜¯ï¼Œç­‰ç­‰ï¼Œä½ å¯èƒ½ä¼šé—®ï¼å¦‚æžœæœ‰äººæ—©å…ˆè¿è¡Œ console.log = eval ï¼Œé‚£ä¹ˆçœ‹èµ·æ¥æ— å®³çš„ console.log(someMessage) å®žé™…ä¸Šæ˜¯æ­£ eval ä¸€äº›å¼•ç”¨äº† originalThing çš„ä»£ç ï¼Ÿå—¯ï¼Œ JavaScript æ ‡å‡†å·²ç»é¢†å…ˆä½ ä¸€æ­¥äº†ã€‚å¦‚æžœä½ åƒè¿™æ ·å·å·æ‘¸æ‘¸åœ°ä½¿ç”¨ evalï¼ˆé€šè¿‡é™¤äº†è°ƒç”¨ eval ä»¥å¤–çš„ä»»ä½•æ–¹å¼ï¼‰ï¼Œå®ƒè¢«ç§°ä¸ºâ€œé—´æŽ¥ eval â€ï¼Œå®žé™…ä¸Šæ˜¯ä¸èƒ½è®¿é—®è¯æ±‡çŽ¯å¢ƒçš„ï¼å¦ä¸€æ–¹é¢ï¼Œå¦‚æžœ someMethod ç¡®å®žåŒ…å«äº†å¯¹ä½¿ç”¨äº†è¿™ä¸ªåç§°çš„ eval çš„ç›´æŽ¥è°ƒç”¨ï¼Œå®ƒå¯èƒ½å®žé™…ä¸Šè®¿é—®äº† originalThing ï¼ŒJavaScript çŽ¯å¢ƒç¦æ­¢è®© originalThing ä¸€ç›´åœ¨è¯æ³•çŽ¯å¢ƒä¹‹å¤–ï¼Œè¿™å°†å¯¼è‡´æ³„éœ²ã€‚ï¼‰ å¥½ï¼Œå¤ªæ£’äº†ï¼ŒJavaScriptä¿æŠ¤æˆ‘ä»¬å…å—å†…å­˜æ³„æ¼ä¹‹æ‰°ï¼Œå¯¹å§ï¼Ÿå¥½ï¼Œè®©æˆ‘ä»¬è¯•ä¸€ä¸‹å¦ä¸€ä¸ªç‰ˆæœ¬ï¼Œç»“åˆäº†å‰ä¸¤ä¸ªä¾‹å­ã€‚ 123456789101112131415var theThing = null;var replaceThing = function () &#123; var originalThing = theThing; var unused = function () &#123; if (originalThing) console.log("hi"); &#125;; theThing = &#123; longStr: new Array(1000000).join('*'), someMethod: function () &#123; console.log(someMessage); &#125; &#125;;&#125;;setInterval(replaceThing, 1000); åœ¨è°·æ­Œå¼€å‘è€…å·¥å…·ä¸­æ‰“å¼€ â€˜Timelineâ€™ æ ‡ç­¾ï¼Œåˆ‡æ¢åˆ° â€˜Memoryâ€™ è§†å›¾ï¼Œç„¶åŽç‚¹å‡» â€˜Recordâ€™ã€‚ çœ‹èµ·æ¥å°±åƒæˆ‘ä»¬æ¯ç§’ä½¿ç”¨ä¸€ä¸ªé¢å¤–çš„å…†å­—èŠ‚ï¼ç”šè‡³ç‚¹å‡»åžƒåœ¾æ¡¶å›¾æ ‡å¼ºåˆ¶æ‰‹åŠ¨åžƒåœ¾å›žæ”¶ä¹Ÿæ²¡æœ‰å¸®åŠ©ã€‚æ‰€ä»¥å°±å¥½åƒæˆ‘ä»¬æ³„æ¼äº† longStr ã€‚ ä½†æ˜¯è¿™ä¸æ˜¯å’Œä»¥å‰ä¸€æ ·çš„æƒ…å†µå—ï¼Ÿ originalThing ä»…åœ¨ replaceThing çš„ä¸»ä½“ä¸­å¼•ç”¨ï¼Œåœ¨ unused ä¸­ã€‚ replaceThing ä¸€ç»“æŸï¼Œ unused æœ¬èº«ï¼ˆæˆ‘ä»¬ç”šè‡³ä¸ä¼šè¿è¡Œï¼ï¼‰å°±ä¼šè¢«æ¸…ç†â€¦ä»Ž replaceThing ä¸­å”¯ä¸€é€ƒè„±çš„å°±æ˜¯ç¬¬äºŒä¸ªé—­åŒ… someMethod ã€‚è€Œ someMethod æ ¹æœ¬æ²¡æœ‰å¼•ç”¨ originalString ï¼ å› æ­¤ï¼Œå³ä½¿ä»»ä½•ä»£ç éƒ½æ— æ³•å†æ¬¡å¼•ç”¨ originalThing ï¼Œå®ƒä¹Ÿä»Žæ¥æ²¡æœ‰è¢«åžƒåœ¾æ”¶é›†ï¼ä¸ºä»€ä¹ˆï¼Ÿæ˜¯è¿™æ ·çš„ï¼Œå®žçŽ°é—­åŒ…çš„å…¸åž‹æ–¹å¼æ˜¯æ¯ä¸ªå‡½æ•°å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªé“¾æŽ¥ï¼Œåˆ°ä»£è¡¨å®ƒçš„è¯æ³•ä½œç”¨åŸŸçš„å­—å…¸å¼å¯¹è±¡ã€‚å¦‚æžœ replaceThing ä¸­å®šä¹‰çš„ä¸¤ä¸ªå‡½æ•°å®žé™…ä¸Šéƒ½ä½¿ç”¨äº† originalThing ï¼Œé‡è¦çš„æ˜¯å®ƒä»¬éƒ½èŽ·å¾—äº†ç›¸åŒçš„å¯¹è±¡ï¼Œå³ä½¿ originalThing è¢«é‡å¤åˆ†é…ï¼Œä¸¤ä¸ªå‡½æ•°ä¹Ÿå…±äº«ç›¸åŒçš„è¯æ³•çŽ¯å¢ƒã€‚çŽ°åœ¨ï¼ŒChrome çš„ V8 JavaScriptå¼•æ“Žæ˜¾ç„¶è¶³å¤Ÿèªæ˜Žï¼Œå¯ä»¥å°†å˜é‡æ”¾åœ¨è¯æ³•çŽ¯å¢ƒä¹‹å¤–ï¼Œå¦‚æžœå®ƒä»¬æ²¡æœ‰è¢«ä»»ä½•é—­åŒ…ä½¿ç”¨ï¼šè¿™å°±æ˜¯ä¸ºä»€ä¹ˆç¬¬ä¸€ä¸ªä¾‹å­ä¸æ³„æ¼ã€‚ ä½†æ˜¯ä¸€æ—¦æŸä¸ªå˜é‡è¢«ä»»ä½•é—­åŒ…ä½¿ç”¨ï¼Œå®ƒæœ€ç»ˆä¼šå‡ºçŽ°åœ¨è¯¥ä½œç”¨åŸŸå†…æ‰€æœ‰é—­åŒ…å…±äº«çš„è¯æ³•çŽ¯å¢ƒä¸­ã€‚è¿™å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼ã€‚ ä½ å¯ä»¥æƒ³è±¡ä¸€ä¸ªæ›´èªæ˜Žçš„ï¼Œå¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜çš„è¯æ±‡çŽ¯å¢ƒçš„å®žçŽ°ã€‚æ¯ä¸ªé—­åŒ…éƒ½å¯ä»¥æœ‰ä¸€æœ¬è¯å…¸ï¼Œé‡Œé¢åŒ…å«ç€é—­åŒ…å®žé™…è¯»å†™çš„å˜é‡ï¼›è¿™ä¸ªè¯å…¸ä¸­çš„å€¼æœ¬èº«å¯èƒ½ä¼šæ˜¯å¯ä»¥åœ¨å¤šä¸ªé—­åŒ…çš„è¯æ³•çŽ¯å¢ƒé—´å…±äº«çš„å¯å˜å•å…ƒã€‚åŸºäºŽæˆ‘å¯¹ECMAScriptç¬¬5ç‰ˆæ ‡å‡†çš„éšæ„é˜…è¯»ï¼Œè¿™æ˜¯åˆæ³•çš„ï¼šå®ƒå¯¹è¯æ³•çŽ¯å¢ƒçš„æè¿°å°†å®ƒä»¬æè¿°ä¸ºâ€œçº¯ç²¹çš„è§„èŒƒæœºåˆ¶ï¼Œå…¶ä¸éœ€è¦ç­‰åŒäºŽä»»ä½• ECMAScript å®žçŽ°çš„ç‰¹å®šçš„ä¼ªçŽ°è±¡â€ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™ä¸ªæ ‡å‡†å®žé™…ä¸Šå¹¶æ²¡æœ‰åŒ…å«â€œåžƒåœ¾â€è¿™ä¸ªè¯ï¼Œåªæ˜¯è¯´äº†ä¸€æ¬¡â€œå†…å­˜â€ã€‚ï¼ˆè¿™é‡Œæœ‰ä¸€ç¯‡ å…³äºŽè¿™ä¸ªé—®é¢˜çš„æœ€ä½³å®žçŽ°çš„æ–‡ç« ï¼Œè™½ç„¶ä¸æ˜¯ JavaScript ä¸»é¢˜ä¸‹çš„ã€‚å…¶ä»–ä¸€äº›è¯­è¨€å®žçŽ°ç¡®å®žæœ‰æ•ˆï¼Œä¾‹å¦‚Goã€‚ï¼‰ ä¿®å¤è¿™ç§å½¢å¼çš„å†…å­˜æ³„æ¼ï¼Œä¸€æ—¦ä½ æ³¨æ„åˆ°å®ƒï¼Œæ˜¯ç›´æŽ¥çš„ï¼Œå¦‚ the fix to the Meteor bug æ‰€ç¤ºã€‚åªéœ€æ·»åŠ  originalThing = null åˆ° replaceThing çš„ç»“å°¾ã€‚è¿™æ ·ï¼Œå³ä½¿åç§° originalThing ä»åœ¨ someMethodçš„è¯æ³•çŽ¯å¢ƒä¸­ï¼Œä¹Ÿä¸ä¼šæœ‰å¤§çš„æ—§å€¼çš„é“¾æŽ¥ã€‚ æ‰€ä»¥æ€»ç»“ä¸€ä¸‹ï¼šå¦‚æžœä½ æœ‰ä¸€ä¸ªå·¨å¤§çš„å¯¹è±¡åœ¨è¢«ä¸€äº›é—­åŒ…ä½¿ç”¨ï¼Œä½†ä¸æ˜¯ä½ éœ€è¦æŒç»­ä½¿ç”¨çš„ä»»ä½•é—­åŒ…ï¼Œåªè¦ç¡®ä¿å±€éƒ¨å˜é‡ä¸å†æŒ‡å‘å®ƒï¼Œä¸€æ—¦ä½ ç”¨å®Œå®ƒäº†ã€‚ä¸å¹¸çš„æ˜¯ï¼Œè¿™äº›é”™è¯¯å¯èƒ½ç›¸å½“å¾®å¦™;å¦‚æžœ JavaScript å¼•æ“Žä¸è¦æ±‚ä½ å¿…é¡»è€ƒè™‘è¿™äº›ï¼Œå®ƒå°†æ›´å¥½ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Javascriptæ·±å…¥æµ…å‡ºä¹‹é—­åŒ…]]></title>
      <url>%2F2016%2F11%2F23%2Fdeeply_understand_closure%2F</url>
      <content type="text"><![CDATA[æ¯å†™15è¡Œä»£ç ï¼Œå°±ä¼šé‡åˆ°ä¸€ä¸ªé—­åŒ…ã€‚è¿™å¥è¯æ¯«ä¸å¤¸å¼ ï¼Œå› ä¸ºç†è®ºä¸Šæ¥è¯´ï¼Œæ¯ä¸€ä¸ªå‡½æ•°éƒ½æ˜¯ä¸€ä¸ªé—­åŒ…ã€‚ é—­åŒ…æ˜¯æŒ‡é‚£äº›èƒ½å¤Ÿè®¿é—®ç‹¬ç«‹(è‡ªç”±)å˜é‡çš„å‡½æ•° (å˜é‡åœ¨æœ¬åœ°ä½¿ç”¨ï¼Œä½†å®šä¹‰åœ¨ä¸€ä¸ªå°é—­çš„ä½œç”¨åŸŸä¸­)ã€‚æ¢å¥è¯è¯´ï¼Œè¿™äº›å‡½æ•°å¯ä»¥â€œè®°å¿†â€å®ƒè¢«åˆ›å»ºæ—¶å€™çš„çŽ¯å¢ƒã€‚ ä¹Ÿæ­£æ˜¯ç”±äºŽå®ƒçš„ç‰¹æ€§ï¼Œè¿˜æœ‰ä¸€ç§è¯´æ³•ï¼Œå°±æ˜¯ï¼š é—­åŒ…æ˜¯ä»£ç å—å’Œåˆ›å»ºè¯¥ä»£ç å—çš„ä¸Šä¸‹æ–‡ä¸­æ•°æ®çš„ç»“åˆã€‚ è¯æ³•ä½œç”¨åŸŸJavaScript çš„ä½œç”¨åŸŸæ˜¯è¯æ³•ä½œç”¨åŸŸ (lexical scoping)ã€‚æˆ‘ä»¬æ¥è§£é‡Šä¸€ä¸‹ï¼Œwhatâ€™s this,é¡ºä¾¿æä¸€ä¸‹åŠ¨æ€ä½œç”¨åŸŸã€‚ 123456789101112var a = 1;function foo() &#123; console.log(a);&#125;function bar() &#123; var a = 2; foo();&#125;bar(); // 1 è¿™å°±æ˜¯è¯æ³•ä½œç”¨åŸŸâ€”â€”åœ¨ JavaScript ä¸­ï¼Œå˜é‡çš„ä½œç”¨åŸŸæ˜¯ç”±å®ƒåœ¨æºä»£ç ä¸­æ‰€å¤„ä½ç½®å†³å®šçš„ï¼Œå¹¶ä¸”åµŒå¥—çš„å‡½æ•°å¯ä»¥è®¿é—®åˆ°å…¶å¤–å±‚ä½œç”¨åŸŸä¸­å£°æ˜Žçš„å˜é‡ã€‚ è¯æ³•ä½œç”¨åŸŸæ˜¯åœ¨å®šä¹‰æ—¶ç¡®å®šçš„ï¼Œè€ŒåŠ¨æ€ä½œç”¨åŸŸæ˜¯åœ¨è¿è¡Œæ—¶ç¡®å®šçš„ã€‚ä¸Šä¾‹ä»£ç åœ¨è¯æ³•ä½œç”¨åŸŸä¸­è¾“å‡ºçš„åº”è¯¥æ˜¯ 2 ã€‚ ä»€ä¹ˆæ˜¯é—­åŒ…1234567var a = 1;function foo() &#123; console.log(a);&#125; foo(); // 1 æˆ‘è¦æ˜¯æ‹¿è¿™ä¸ªä¾‹å­å‡ºæ¥è¯´ï¼Œè‚¯å®šè¦æœ‰äººä¸åŒæ„çš„ã€‚â€˜è¿™ä¸æ˜¯ä¸Šä¸€ç¯‡é‡Œé¢è¯´çš„ä½œç”¨åŸŸé“¾çš„äº‹æƒ…å—ï¼Œå…³é—­åŒ…ä»€ä¹ˆäº‹ï¼Ÿâ€™ å¾—äº†æ‚¨å‘¢ï¼Œå’±ä»¬æ¢ä¸ªä¾‹å­çž„ä¸¤çœ¼ã€‚ 1234567891011function foo() &#123; var a = 1; return function() &#123; console.log(a); &#125;&#125;var bar = foo();bar(); // 1 ä¼—æ‰€å‘¨çŸ¥ï¼Œå¤–éƒ¨æ˜¯æ— æ³•è®¿é—®å†…éƒ¨ä½œç”¨åŸŸçš„å†…å®¹çš„ã€‚é‚£ bar ç¼˜ä½•å¯ä»¥è¾“å‡º a å˜é‡ã€‚æ˜¯çš„ï¼Œé—­åŒ…ï¼ï¼ï¼ æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ç¬¬äºŒæ®µä»£ç ï¼Œå…¶å®ž bar è¢«å£°æ˜Žèµ‹å€¼çš„æ—¶å€™ï¼Œå°±å·²ç»ç»‘å®šäº†ä¸Šä¸‹æ–‡çŽ¯å¢ƒäº†(å‡½æ•°å†…éƒ¨æ‰€å¼•ç”¨åˆ°çš„å˜é‡)ã€‚ 12345// bar é—­åŒ…barClosure = &#123; call: bar // å¼•ç”¨åˆ°function lexicalEnvironment: &#123;a: 1&#125; // ä¸Šä¸‹æ–‡çŽ¯å¢ƒ&#125;; é—­åŒ…å·²ç»å½¢æˆäº†ï¼Œæˆ‘ä»¬ä¸‹ä¸€æ¬¡æ‰§è¡Œçš„æ—¶å€™ï¼Œè‡ªç”±å˜é‡å°±å¯ä»¥ç›´æŽ¥ä»Žé—­åŒ…é‡Œå¯»æ‰¾äº†ã€‚ ç¬¬ä¸€æ®µä»£ç ä¸­çš„ foo å…¶å®žä¹Ÿå·²ç»äº§ç”Ÿé—­åŒ…äº†ï¼Œå®ƒç»‘å®šçš„æ˜¯å…¨å±€ä¸Šä¸‹æ–‡ä¸­çš„è‡ªç”±å˜é‡ã€‚åªä¸è¿‡æ²¡æœ‰é€šè¿‡ return æ¥è¿›è¡Œä¸€ä¸ªè¿”å›žï¼Œæ— æ³•æ˜¾ç¤ºå‡ºé—­åŒ…çš„ç‰¹æ€§ã€‚ å…±äº«ä½œç”¨åŸŸé€šè¿‡å‰é¢å‡ ç« çš„å­¦ä¹ ï¼Œæˆ‘ä»¬åº”è¯¥æ¸…æ¥šï¼Œå¦‚æžœä¸¤ä¸ªå‡½æ•°æ˜¯åœ¨åŒä¸€ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ä¸­ï¼Œå®žåˆ™æ˜¯å…±äº«çš„åŒä¸€ä¸ªå¤–éƒ¨ä½œç”¨åŸŸï¼Œä¸¤ä¸ªå‡½æ•°é‡Œçš„è‡ªç”±å˜é‡æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ª [[scopes]] ã€‚ 123456789101112function foo() &#123; var a = 1; return &#123; increase: function() &#123; console.log(++a) &#125;, decrease: function() &#123; console.log(--a) &#125; &#125;&#125;var bar = foo();bar.increase(); // 2bar.decrease(); // 1 å¯ä»¥çœ‹åˆ° bar.increase å’Œ bar.decrease æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ª [[scopes]] ä¸­çš„ a ã€‚ é‚£æˆ‘çŽ°åœ¨æ¢ä¸€æ¢ã€‚ 123456789101112function foo() &#123; var a = 1; return function() &#123; console.log(++a); &#125;&#125;var bar1 = foo();var bar2 = foo();bar1(); // 2bar2(); // 2 è¿™ä¸ªæ—¶å€™æˆ‘é—¨å¯ä»¥å‘çŽ°ï¼Œ bar1 çš„è‡ªç”±å˜é‡åœ¨ç¬¬ä¸€æ¬¡æ‰§è¡Œçš„ foo äº§ç”Ÿçš„ä¸Šä¸‹æ–‡ä¸­ï¼Œ bar2 çš„åœ¨ç¬¬äºŒæ¬¡äº§ç”Ÿçš„ä¸Šä¸‹æ–‡ä¸­ã€‚ä¸¤è€…çš„ [[scopes]] å·²ç»æ˜¯ä¸ä¸€æ ·çš„äº†ï¼Œæ‰€ä»¥æ‰€å¼•ç”¨çš„è‡ªç”±å˜é‡ a å…¶å®žæ˜¯ä¸åŒçš„ä½œç”¨åŸŸä¸­çš„ï¼Œæ‰€ä»¥ä¹Ÿå°±æ— æ³•ç›¸äº’å½±å“äº†ã€‚ å¾ªçŽ¯ä¸­çš„é”™è¯¯è¿™é‡Œå°±ç”¨ MDN é‡Œé¢çš„ä¾‹å­å§ã€‚ è¿™é‡Œä¹‹æ‰€ä»¥æ˜¾ç¤ºé”™è¯¯ï¼ŒåŽŸå› åœ¨äºŽä¸‰ä¸ªäº‹ä»¶å“åº”å‡½æ•°ï¼ˆé—­åŒ…ï¼‰å…±äº«ä½œç”¨åŸŸäº†ï¼Œè¿™ä¸‰è€…çš„ [[scopes]] æŒ‡å‘çš„æ˜¯åŒä¸€ä¸ª çˆ¶å˜é‡å¯¹è±¡çš„å±‚çº§é“¾ ã€‚ onfocus çš„å›žè°ƒè¢«æ‰§è¡Œæ—¶ï¼Œå¾ªçŽ¯å·²ç»å®Œæˆï¼Œä¸”æ­¤æ—¶ item å˜é‡ï¼ˆç”±æ‰€æœ‰ä¸‰ä¸ªé—­åŒ…æ‰€å…±äº«ï¼‰å·²ç»æŒ‡å‘äº† helpText åˆ—è¡¨ä¸­çš„æœ€åŽä¸€é¡¹ã€‚ è§£å†³åŠžæ³•å°±æ˜¯è®©ä¸‰ä¸ªé—­åŒ…æœ‰å„è‡ªçš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ å‡½æ•°é‡è½½JavaScript ä¸­æ²¡æœ‰å‡½æ•°é‡è½½ï¼Œä½†æ˜¯æˆ‘é—¨å¯ä»¥åˆ©ç”¨å‚æ•°æ£€æµ‹æ¥å®žçŽ°ä¼ªå‡½æ•°é‡è½½ã€‚ 123456789101112131415161718192021222324function addMethod(obj, name, fn) &#123; var old = obj[name]; console.log(old); obj[name] = function() &#123; if (fn.length === arguments.length) &#123; return fn.apply(this, arguments); &#125; else if (typeof old === "function") &#123; console.log(this.old = old); return old.apply(this, arguments); &#125; &#125;&#125;addMethod(ninjas, "find", function() &#123; // statement&#125;);addMethod(ninjas, "find", function(first) &#123; // statement&#125;);addMethod(ninjas, "find", function(first, second) &#123; // statement&#125;); æ¯ä¸€æ¬¡æ‰§è¡Œ addMethod æ·»åŠ æ–¹æ³•çš„æ—¶å€™ï¼Œéƒ½ä¼šäº§ç”Ÿæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ï¼ŒåŒæ ·çš„ fn å‚æ•°ä»¥åŠ old ï¼Œåœ¨æ¯ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡éƒ½æœ‰ä¸åŒçš„å€¼ã€‚è¿™æ˜¯é‡è½½èƒ½å¤Ÿå®žçŽ°çš„æ ¹æœ¬æ‰€åœ¨ã€‚æ¯ä¸€ä¸ª old çš„ [[scopes]] éƒ½æŒ‡å‘çš„æ˜¯ä¸Šä¸€æ¬¡æ‰§è¡Œ addMethod äº§ç”Ÿçš„ çˆ¶å˜é‡å¯¹è±¡çš„å±‚çº§é“¾ ã€‚ è€Œ this å’Œ arguments åˆ™æ˜¯å½“å‰å‡½æ•°æ‰§è¡Œæ—¶æ‰€æŒ‡å‘çš„å½“å‰å€¼ã€‚ æ¨¡å—æˆ‘ä»¬ç»å¸¸ä½¿ç”¨ IIFE æ¥è¿›è¡Œæ¨¡å—åŒ–çš„åº”ç”¨ï¼Œå®ƒå¯ä»¥åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„ä½œç”¨åŸŸï¼Œä¹Ÿåªèƒ½åˆ›å»ºä¸€æ¬¡ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶ä¸­å®šä¹‰æ–¹æ³•ï¼Œé™¤äº†è¿™äº›æ–¹æ³•å¤–ï¼Œå…¶å®ƒåœ°æ–¹éƒ½æ— æ³•è®¿é—®ï¼Œå®ƒå°±æ˜¯è¿™ä¹ˆåœ°ç®€å•ï¼Œå®‰å…¨ã€‚ æ¥çœ‹ä¸€ä¸‹ç±»åº“çš„å°è£…å§,æœ‰ä¸¤ç§æ–¹å¼ã€‚ 12345(function() &#123; var jQuery = window.jQuery = function() &#123; // Initialize &#125;&#125;); 1234567var jQuery = (function() &#123; function jQuery() &#123; // Initialize &#125; return jQuery;&#125;); ä»–ä»¬éƒ½æ˜¯é€šè¿‡åˆ›å»ºç‹¬ç«‹ä½œç”¨åŸŸï¼Œæœ€åŽä¼šå°†å­˜å‚¨äº†è®¸å¤šæ–¹æ³•çš„å¯¹è±¡æš´éœ²å‡ºåŽ»ã€‚é¿å…äº†å…¨å±€å˜é‡çš„æ±¡æŸ“ï¼Œè€Œä¸”è¿˜æé«˜äº†å®‰å…¨æ€§ï¼ˆå˜é‡å†²çªï¼‰ã€‚ æˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹çŽ°åœ¨çš„æ¨¡å—ä¾èµ–åŠ è½½å™¨çš„æ ¸å¿ƒæ¦‚å¿µï¼š 1234567891011121314151617181920var MyModules = (function Manager() &#123; var modules = &#123;&#125;; function define(name, deps, impl) &#123; for (var i = 0; i &lt; deps.length; i++) &#123; deps[i] = modules[deps[i]]; &#125; modules[name] = impl.apply(impl, deps); &#125; function get(name) &#123; return modules[name]; &#125; return &#123; define: define, get: get &#125;;&#125;)(); Manager å‡½æ•°åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œæˆ‘ä»¬åŽé¢é€šè¿‡ MyModules.define æ¥å®žçŽ°æ¨¡å—åŒ–å®šä¹‰çš„æ—¶å€™ï¼Œå…±äº«çš„åŒä¸€ä¸ªè¯æ±‡çŽ¯å¢ƒï¼Œå„ä¸ªæ¨¡å—éƒ½ä¼šå­˜å‚¨åœ¨ modules ä¸­ã€‚è€Œæ¯æ¬¡ä¾èµ–æ¨¡å—æ‰§è¡Œæ—¶ï¼Œéƒ½ä¼šä»Ž modules ä¸­å–åˆ°æ¨¡å—æ•´ä½“å¹¶ä¼ é€’ç»™è¦æ‰§è¡Œçš„å‡½æ•°ã€‚ å¾ˆå¤šæ—¶å€™æˆ‘ä»¬åœ¨å®žçŽ°ç±»åº“çš„æ—¶å€™ä¼šåœ¨ IIFE å‰é¢æ·»åŠ ä¸Š ; ï¼Œè¿™æ˜¯ç”±äºŽ JavaScript çš„ ASI å¸¦æ¥çš„ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºäº†é˜²æ­¢æœ‰äººä¸åœ¨ IIFE åŽé¢æ·»åŠ  ; ä»Žè€Œå¯¼è‡´ä»£ç åŽ‹ç¼©çš„æ—¶å€™å‡ºé”™ã€‚ æ›¿â€œå†…å­˜æ³„æ¼â€è¯´å¥è¯å¾ˆå¤šæ–‡ç« ï¼Œå¾ˆå¤šä¹¦é‡Œï¼Œéƒ½ä¼šè®²é—­åŒ…ä¼šå¸¦æ¥ å†…å­˜æ³„æ¼ ï¼Œå…¶å®žæ­£ç›¸åï¼Œé—­åŒ…æ˜¯æ¥æ¶ˆé™¤å†…å­˜æ³„æ¼çš„ï¼Œå¦‚æžœäº§ç”Ÿäº†ï¼Œå¯¹ä¸èµ·ï¼Œé‚£æ˜¯ä½¿ç”¨è€…åº”è¯¥èƒŒçš„é”…ã€‚æ­£å¸¸æ¥è¯´ï¼Œå†…å­˜æ³„æ¼ æ˜¯æŒ‡ IE6 å¸¦æ¥çš„ bug ï¼ŒçŽ°ä»£æµè§ˆå™¨çš„å¼•ç”¨è®¡æ•°æ¥è¿›è¡Œåžƒåœ¾å¤„ç†ï¼Œå‡ ä¹Žä¸ä¼šäº§ç”Ÿ å†…å­˜æ³„æ¼ ã€‚ å…³äºŽ å†…å­˜æ³„æ¼ ï¼Œå¯ä»¥çœ‹æˆ‘çš„ ä¸€ç§æœ‰è¶£çš„JavaScriptå†…å­˜æ³„æ¼[è¯‘]ã€‚ é—­åŒ…å¸¦æ¥çš„å¦™ç”¨ï¼Œè¿œä¸æ­¢æ–‡ä¸­æ‰€è°ˆçš„è¿™äº›ï¼Œè¿™äº›éƒ½æ˜¯ç”¨æ¥è®²è§£é—­åŒ…çš„åŸºæœ¬çŸ¥è¯†å¹¶å¸®åŠ©æ·±å…¥ä¸€ç‚¹ç†è§£çš„ã€‚æ‰“å¥½åŸºç¡€ï¼Œå¦™ç”¨æ— ç©·ï¼ŒåŽé¢çš„å­¦ä¹ ä¼šæ°´åˆ°æ¸ æˆã€‚ä¸€å‘³è¿½æ±‚æ¡†æž¶ï¼Œä¸æ‰“ç†åŸºç¡€ï¼Œåˆ™å¦‚é«˜å±‹å»ºç“´ï¼Œæ…Žä¹‹ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Javascriptæ·±å…¥æµ…å‡ºä¹‹ä½œç”¨åŸŸ]]></title>
      <url>%2F2016%2F11%2F22%2Fdeeply_understand_scope%2F</url>
      <content type="text"><![CDATA[æœ¬æ¥è¿™ç¯‡æ–‡ç« æ˜¯ç´§è·Ÿç€ this ç¯‡å°±è¦å‡ºæ¥çš„ï¼Œä¸æƒ³ç«Ÿæ—¶éš”è¿‘åŠå¹´ä¹‹æœŸã€‚ä»Žæ‰§è¡Œä¸Šä¸‹æ–‡ï¼Œåˆ°ä½œç”¨åŸŸç”šè‡³é—­åŒ…ï¼Œè¿™æ˜¯ä¸€ä¸ªå°ä½“ç³»ï¼Œç¼ºäº†ä½œç”¨åŸŸä»¥åŠé—­åŒ…è¿™éƒ¨åˆ†ï¼Œä½¿æˆ‘å­¦ä¹ ã€ŠJavascript Ninjaã€‹ä¸­è®¾è®¡å‡½æ•°å¼ç¼–ç¨‹çš„çš„åœ°æ–¹å°¤ä¸ºåƒåŠ›ã€‚é‚è¡¥å…¨è¿™äºŒç« ã€‚ ä½œç”¨åŸŸæŒ‡å®šäº†å˜é‡æˆ–è€…å‡½æ•°çš„å¯ç”¨èŒƒå›´ äº†è§£ä½œç”¨åŸŸï¼Œå°±æ˜¯äº†è§£ä½œç”¨åŸŸé“¾ã€‚ åˆæŽ¢ä½œç”¨åŸŸé“¾ å½“ ä»£ç æ‰§è¡Œ æ—¶ï¼Œä¼šåˆ›å»ºå˜é‡å¯¹è±¡çš„ä¸€æ¡ä½œç”¨åŸŸé“¾ã€‚ä½œç”¨åŸŸé“¾çš„å‰ç«¯ï¼Œæ˜¯å½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ï¼ˆæ´»åŠ¨å¯¹è±¡ï¼‰ï¼Œä½œç”¨åŸŸé“¾çš„ä¸‹ä¸€ä¸ªå˜é‡å¯¹è±¡æ¥è‡ªå¤–éƒ¨çš„ä¸Šä¸‹æ–‡ï¼Œå†ä¸‹ä¸€ä¸ªå˜é‡å¯¹è±¡æ¥è‡ªå†ä¸‹ä¸€ä¸ªå¤–éƒ¨çŽ¯å¢ƒâ€¦ä½œç”¨åŸŸé“¾çš„å°¾éƒ¨åˆ™æ˜¯å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ã€‚ æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸ªæ —å­ï¼š 1234567891011var a = 1;function foo() &#123; var b = 2; function bar() &#123; console.log(a + b); &#125; bar();&#125; bar çš„ä½œç”¨åŸŸé“¾æ˜¯ 12345[ VO(bar), // ä½œç”¨åŸŸé“¾çš„å‰ç«¯ VO(foo), AO(global)] ä½œç”¨åŸŸé“¾å…¶å®žå°±æ˜¯å°†è‡ªèº«ä¸Šä¸‹æ–‡ï¼Œçˆ¶ä¸Šä¸‹æ–‡ï¼Œä¸€ç›´å»¶å±•åˆ°å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ç”¨ä¸€æ¡é“¾å­è¿žæŽ¥èµ·æ¥çš„ã€‚ å¯èƒ½æˆ‘ä»¬åˆè¦å¥½å¥‡äº†ï¼Œä½œç”¨åŸŸé“¾æ˜¯å¦‚ä½•æŠŠå®ƒä»¬ä¸²èµ·æ¥çš„å‘¢ï¼Ÿ è¯¦è§£ä½œç”¨åŸŸé“¾å‡½æ•°åˆ›å»ºå½“å‡½æ•°åˆšåˆ›å»ºçš„æ—¶å€™ï¼Œå‡½æ•°å°±å¤©ç”Ÿè‡ªå¸¦äº†ä¸€ä¸ªå±žæ€§ [[scopes]] ï¼Œå®ƒæ˜¯æ‰€æœ‰çˆ¶å˜é‡å¯¹è±¡çš„å±‚çº§é“¾ã€‚ 123456var a = 1;function foo() &#123; var b = 2; console.log(a, b); // 1, 2&#125; å½“ foo å‡½æ•°åˆ›å»ºçš„æ—¶å€™ï¼Œå®ƒå°±å·²ç»æ‹¥æœ‰ [[scopes]] å±žæ€§äº†ã€‚ 123foo.[[scopes]] = [ gloabl.VO] å‡½æ•°è°ƒç”¨å½“ å‡½æ•°è¢«è°ƒç”¨ æ—¶ï¼Œä¼šåˆ›å»ºå½“å‰å‡½æ•°çš„ä¸Šä¸‹æ–‡ï¼š 12345Context = &#123; AO: &#123;...&#125;, this: thisValueï¼Œ Scope: AO.concat([[scoopes]])&#125; æ­¤æ—¶æ‰ä¼šåˆ›å»ºä½œç”¨åŸŸé“¾ã€‚ æˆ‘ä»¬åœ¨ Javascriptæ·±å…¥æµ…å‡ºä¹‹this é‚£ä¸€ç« ä¸­è®²åˆ°çš„ å˜é‡æå‡ ä¹‹æ‰€ä»¥å­˜åœ¨ï¼Œæ˜¯å› ä¸ºåœ¨æ‰€æœ‰ä»£ç æ‰§è¡Œä¹‹å‰ï¼Œ js å¼•æ“Žä¼šè¿›è¡Œä¸€ä¸ª æ ‡è¯†ç¬¦è§£æž çš„è¿‡ç¨‹ã€‚ æ ‡ç¤ºç¬¦è§£æžæ˜¯ä¸€ä¸ªå¤„ç†è¿‡ç¨‹ï¼Œç”¨æ¥ç¡®å®šä¸€ä¸ªå˜é‡ï¼ˆæˆ–å‡½æ•°å£°æ˜Žï¼‰å±žäºŽå“ªä¸ªå˜é‡å¯¹è±¡ã€‚ æˆ‘ä»¬ç»§ç»­æ¥çœ‹ä¸€ä¸ªæ —å­ï¼š 1234567891011121314var a = 1;function foo() &#123; var b = 2; function bar() &#123; var c = 3; console.log(a + b + c); // 6 &#125; bar();&#125;foo(); å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡æ˜¯ï¼š 1234globalContext.VO = &#123; a: 1, foo: &lt;reference to function&gt;&#125;; å½“ foo åˆ›å»ºæ—¶ï¼Œ foo çš„ [[scopes]] å±žæ€§ä¸ºï¼š 123foo.[[scopes]] = [ globalContext.VO] å½“ foo è¢«è°ƒç”¨æ—¶ï¼Œ foo ä¸Šä¸‹æ–‡çš„ æ´»åŠ¨å¯¹è±¡ å’Œ ä½œç”¨åŸŸé“¾ ä¸ºï¼š 123456789fooContext.AO = &#123; b: 2, bar: &lt;reference to function&gt;&#125;fooContext.Scope = [ fooContext.AOï¼Œ globalContext.VO] å½“ bar åˆ›å»ºæ—¶ï¼Œ bar çš„ [[scopes]] å±žæ€§ä¸ºï¼š 1234bar.[[scopes]] = [ fooContext.AOï¼Œ globalContext.VO] å½“ bar è¢«è°ƒç”¨æ—¶ï¼Œ bar ä¸Šä¸‹æ–‡çš„ æ´»åŠ¨å¯¹è±¡ å’Œ ä½œç”¨åŸŸé“¾ ä¸ºï¼š 123456789barContext.AO = &#123; c: 3&#125;barContext.Scope = [ barContext.AO fooContext.AOï¼Œ globalContext.VO] æ ‡è¯†ç¬¦è§£æžç»“æžœï¼š 1234567891011121314a-------------barContext.AO // NOT FOUNDfooContext.AO // NOT FOUNDglobalContext.VO // FOUND 1b-------------barContext.AO // NOT FOUNDfooContext.AO // FOUND 2c-------------barContext.AO // FOUND 3 æˆ‘ä»¬å€ŸåŠ© Chrome Develop Tools çœ‹ä¸€ä¸‹ï¼šï¼ˆä»£ç æœ‰å¾ˆå¤§æ”¹åŠ¨ï¼‰ Some Casesä¸Šé¢çš„ä¾‹å­å±•ç¤ºçš„å°±æ˜¯é—­åŒ…çš„ [[scopes]] ç‰¹æ€§ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚ ä»¥æž„é€ å‡½æ•°åˆ›å»ºçš„å‡½æ•°12345678function foo() &#123; var a = 1; var bar = Function('console.log(a);'); bar(); // Uncaught ReferenceError: a is not defined&#125;foo(); è¿™é‡Œ bar å‡½æ•°ä¹‹æ‰€ä»¥æ— æ³•è§£æžæ‰¾åˆ° a ï¼Œæ˜¯å› ä¸ºä»¥æž„é€ å‡½æ•°åˆ›å»ºçš„å‡½æ•°çš„ [[scopes]] å±žæ€§æŒ‡å‘çš„æ˜¯å…¨å±€å˜é‡ã€‚ è¿™ä¸ªè¿˜æœ‰ä¸€ä¸ªå»¶ä¼¸ï¼Œå°±æ˜¯ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œæ˜¯ä¸å…è®¸ä½¿ç”¨ with è¯­å¥çš„ï¼Œä½†æ˜¯å¦‚æžœæŠŠè¯­å¥æ”¾åˆ° new Function ä¸­ï¼Œæ˜¯è¢«å…è®¸çš„ã€‚ 1234567891011"use strict";with(&#123;a: 2&#125;) &#123;&#125; // Uncaught SyntaxError: Strict mode code may not include a with statementfunction foo() &#123; var a = 1; var bar = Function('with(&#123;a: 2&#125;) &#123;&#125;'); // æ­£å¸¸ bar();&#125;foo(); new Function äº§ç”Ÿçš„æ˜¯ global ä½œç”¨åŸŸä¸‹çš„å‡½æ•°ï¼Œè€Œä¸”é»˜è®¤æ˜¯ non-strict ã€‚ å»¶ä¼¸ä½œç”¨åŸŸé“¾æœ‰ä¸¤ç§æ–¹æ³•ï¼Œwith å’Œ try-catch è¯­å¥ã€‚ ä»–ä»¬éƒ½éµå¾ªï¼šScope = withObject|catchObject + AO|VO + [[Scope]] ã€‚ è¿™é‡Œæ‹¿ with ä¸¾ä¾‹å¹¶ä¸”å»¶ä¼¸ä¸€ä¸‹ã€‚ 12345678910var a = 1, b = 2; with(&#123;a: 10&#125;) &#123; a = b = 20; console.log(a, b); // 20, 20&#125;console.log(a, b); // 1, 20 æ‰§è¡Œ with è¯­å¥æ—¶å€™ï¼Œä½œç”¨åŸŸæœ€å‰ç«¯å·²ç»æ˜¯ {a: 10} äº†ï¼Œæˆ‘ä»¬åœ¨ with è¯­å¥é‡Œé¢æ”¹åŠ¨çš„ aæ˜¯åœ¨ {a: 10} ä¸­æ‰¾åˆ°äº†ï¼Œæ‰€ä»¥ï¼Œå…¨å±€ä½œç”¨åŸŸä¸­çš„ a å¹¶æ²¡æœ‰è¢«ä¿®æ”¹ã€‚ ä½œç”¨åŸŸå†™å®Œäº†ï¼Œæœ‰ä¸€äº›è¾¹è¾¹è§’è§’çš„ä¸œè¥¿æ²¡å†™ï¼Œä¸ç„¶å±•å¼€çš„è¯ç¯‡å¹…å¤ªå¤§ã€‚ä¸‹ç¯‡æ–‡ç« å°±æ˜¯é—­åŒ…äº†ï¼Œé—­åŒ…å’Œä½œç”¨åŸŸçœŸçš„æ˜¯åŸºå‹åˆ°çˆ†ï¼Œæ‰€ä»¥ä½œç”¨åŸŸä¸€å®šè¦å¥½å¥½çœ‹ï¼Œå¥½å¥½ç†è§£ï¼Œå¤šæ•²ä»£ç ï¼Œè·‘åˆ° Chrome é‡ŒåŽ»æ‰“å‡ ä¸ªæ–­ç‚¹æµ‹ä¸€æµ‹ï¼Œæ•ˆæžœä¼šå¥½å¾ˆå¤šã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[é‡æ‹¾CSSè§„èŒƒä¹‹vertical-align]]></title>
      <url>%2F2016%2F10%2F11%2Frelearn_vertical-align%2F</url>
      <content type="text"><![CDATA[æˆ‘ç»å¸¸éœ€è¦è®©å…ƒç´ åœ¨åž‚ç›´æ–¹å‘ä¸Šå¯¹é½ã€‚ CSS æä¾›äº†å¾ˆå¤šå¯ç”¨çš„æ–¹æ³•ã€‚æœ‰æ—¶å€™æˆ‘ç”¨ float è§£å†³é—®é¢˜ï¼Œæœ‰æ—¶å€™ä½¿ç”¨ position: absolute ï¼Œè€Œæœ‰äº›æ—¶å€™å‘¢ï¼Œç”šè‡³é€šè¿‡æ‰‹åŠ¨æ·»åŠ  margin ä¸Ž padding è¿™æ ·æ±¡æŸ“ä»£ç çš„æ–¹å¼æ¥å®žçŽ°ã€‚ æˆ‘å®žåœ¨ä¸å–œæ¬¢è¿™äº›è§£å†³æ–¹æ³•ã€‚æµ®åŠ¨å…ƒç´ ä»…åœ¨é¡¶éƒ¨å¯¹é½å¹¶ä¸”éœ€è¦æ‰‹åŠ¨æ¸…é™¤æµ®åŠ¨ã€‚ç»å¯¹å®šä½ä½¿å¾—å…ƒç´ è„±ç¦»æ–‡æ¡£æµï¼Œæ‰€ä»¥å®ƒä»¬å°†å†ä¹Ÿæ— æ³•å½±å“å‘¨å›´å…ƒç´ ã€‚è¿˜æœ‰ï¼Œä½¿ç”¨å›ºå®š margin å’Œ padding å€¼çš„è¯ï¼Œæžå°çš„æ”¹å˜éƒ½ä¼šç«‹å³ç ´åçŽ°æœ‰çš„å¸ƒå±€ã€‚ ä½†æ˜¯ï¼Œè¿™é‡Œè¿˜æœ‰å¦ä¸€ä¸ªè§’è‰²ï¼š vertical-align ã€‚æˆ‘è®¤ä¸ºå®ƒåº”å½“å—åˆ°é‡ä»»ã€‚å¥½äº†ï¼Œç¡®åˆ‡åœ°è¯´ï¼Œä½¿ç”¨ vertical-align æ¥å¸ƒå±€æ˜¯ä¸€ç§ hack è¡Œä¸ºï¼Œå› ä¸ºå®ƒä¸æ˜¯ä¸ºæ­¤è€Œç”Ÿã€‚å®ƒç”¨æ¥æŽ’åˆ—æ–‡æœ¬å’Œæ–‡æœ¬æ—è¾¹çš„å…ƒç´ ã€‚å°½ç®¡å¦‚æ­¤ï¼Œä½ è¿˜æ˜¯å¯ä»¥åœ¨ä¸åŒçš„ä¸Šä¸‹æ–‡ä¸­ç”¨ vertical-align æ¥çµæ´»åœ°ã€ç²¾ç»†åœ°æŽ’åˆ—å…ƒç´ ã€‚å…ƒç´ çš„å¤§å°å¹¶ä¸éœ€è¦çŸ¥æ™“ã€‚å…ƒç´ ä¼šç»§ç»­åœ¨æ–‡æ¡£æµä¸­ï¼Œæ‰€ä»¥å…¶ä»–å…ƒç´ å¯ä»¥æ®æ­¤æ”¹å˜å®ƒä»¬çš„å°ºå¯¸ã€‚è¿™äº›ä¼˜åŠ¿è®©å®ƒæˆä¸ºäº†æœ‰ä»·å€¼çš„é€‰æ‹©ã€‚ vertical-align çš„ç‹¬ç‰¹æ€§ä½†æ˜¯ï¼ŒæŸäº›æ—¶å€™ vertical-align æ˜¯ä¸ªåè¶³çš„æ··è›‹ï¼Œç”¨å®ƒè§£å†³é—®é¢˜å¯èƒ½ä¼šè®©äººæ²®ä¸§ï¼Œä¼¼ä¹Žæœ‰ä¸€äº›éš¾ä»¥ç†è§£çš„è§„åˆ™åœ¨èµ·ä½œç”¨ã€‚æ¯”å¦‚ï¼Œå¯èƒ½ä¼šå‡ºçŽ°è¿™æ ·çš„æƒ…å†µï¼Œä½ æ”¹å˜äº† vertical-align å±žæ€§å€¼çš„çš„å…ƒç´ åŽ‹æ ¹æ²¡æœ‰æ”¹å˜å¯¹é½æ–¹å¼ï¼Œä½†åŒä¸€è¡Œçš„å…¶ä»–å…ƒç´ å´æœ‰å˜åŠ¨ã€‚æˆ‘è‹¦æ¼åœ°æ’•æ‰¯ç€å¤´å‘ï¼Œä»ä¸æ—¶åœ°é™·äºŽ vertical-align çš„æ­»è§’ã€‚ ä¸å¹¸çš„æ˜¯ï¼Œå¤§éƒ¨åˆ†æœ‰å…³äºŽ vertical-align çš„èµ„æ–™éƒ½ç¨æ˜¾ç²—æµ…ï¼Œå°¤å…¶æ˜¯æˆ‘ä»¬æƒ³è—‰æ­¤è¿›è¡Œå¸ƒå±€çš„æ—¶å€™ã€‚å®ƒä»¬éƒ½é›†ä¸­ç²¾åŠ›åœ¨è¿™æ ·ä¸€ä¸ªè¯¯åŒºï¼Œè¯•å›¾è®©ä¸€ä¸ªå…ƒç´ ä¸­çš„æ‰€æœ‰ä¸œè¥¿åž‚ç›´å¯¹é½ã€‚å®ƒä»¬ç»™å‡ºäº†è¿™ä¸ªå±žæ€§çš„åŸºç¡€ä»‹ç»ï¼Œä»¥åŠåœ¨ç‰¹åˆ«ç®€å•çš„æƒ…å†µä¸‹å…ƒç´ å¦‚ä½•å¯¹é½ï¼Œä½†å¹¶æœªè§£é‡Šæ£˜æ‰‹çš„é‚£éƒ¨åˆ†ã€‚ å› æ­¤æˆ‘ç»™è‡ªå·±è®¾ç«‹äº†ä¸€ä¸ªç›®æ ‡ï¼Œè¦ä¸€åŠ³æ°¸é€¸åœ°é˜è¿°æ¸…æ¥š vertical-align çš„è¡Œä¸ºè¡¨çŽ°ï¼Œæœ€ç»ˆé€šè¿‡ç ”ç©¶ W3C ç»„ç»‡çš„ CSS è§„èŒƒæ–‡æ¡£ å¹¶ä¸”æ¼”ç»ƒä¸€äº›ä¾‹å­å®Œæˆäº†ã€‚æˆæžœå°±æ˜¯è¿™ç¯‡æ–‡ç« ã€‚ æ‰€ä»¥ï¼Œå°±è®©æˆ‘ä»¬æ¥è®¨æ•™ä¸€ä¸‹è¿™åœºæ¸¸æˆè§„åˆ™å§ï¼ ä½¿ç”¨ vertical-align çš„æ¡ä»¶vertical-align è¢«ç”¨æ¥å¯¹é½ å†…è”çº§å…ƒç´  ï¼ŒæŒ‡è¿™äº›å…ƒç´ â€”â€” display å±žæ€§è®¡ç®—å€¼ä¸º inline inline-block inline-tableï¼ˆæœ¬æ–‡ä¸­ä¸ä½œè€ƒè™‘ï¼‰ inline å…ƒç´ åŸºæœ¬ä¸Šæ˜¯åŒ…è£¹æ–‡å­—çš„æ ‡ç­¾ã€‚ inline-block å…ƒç´ äººå¦‚å…¶åï¼šæŠ«ç€ inline å¤–å¥—çš„å—å…ƒç´ ã€‚å°±åƒå®ƒæ‹¥æœ‰ padding ã€ border ã€ margin ä¸€æ ·ï¼Œå®ƒåŒæ ·å¯ä»¥æ‹¥æœ‰ width å’Œ height ï¼ˆå¯èƒ½ç”±å…¶è‡ªèº«å†…å®¹æ‰€å†³å®šï¼‰ã€‚ å†…è”çº§å…ƒç´ ä¼šåœ¨å„è¡Œä¸€ä¸ªæŒ¨ç€ä¸€ä¸ªæŽ’åˆ—å¼€æ¥ï¼Œå¦‚æžœå½“å‰è¡Œæœ‰å¤ªå¤šå…ƒç´ æ”¾ä¸ä¸‹çš„æ—¶å€™ï¼Œæ–°çš„ä¸€è¡Œä¼šåœ¨å®ƒä¸‹é¢äº§ç”Ÿã€‚æ‰€æœ‰è¿™äº›è¡Œéƒ½æ‹¥æœ‰ä¸€ä¸ªè¡Œç›’ï¼Œå®ƒåŒ…è£¹ç€è¯¥è¡Œæ‰€æœ‰å†…å®¹ã€‚ä¸åŒå¤§å°çš„å†…å®¹æ„å‘³ç€è¡Œç›’æ‹¥æœ‰ä¸åŒçš„é«˜åº¦ã€‚åœ¨ä¸‹é¢çš„æ’å›¾ä¸­ï¼Œè¡Œç›’çš„é¡¶éƒ¨å’Œåº•éƒ¨ï¼Œéƒ½ä»¥çº¢è‰²çº¿æ¡è¡¨ç¤ºã€‚ è¿™äº›è¡Œç›’æç»˜å‡ºäº†æˆ‘ä»¬å¯ä»¥ä½œç”¨çš„åŒºåŸŸã€‚åœ¨è¿™äº›è¡Œç›’ä¸­ï¼Œ vertical-align å±žæ€§çš„èŒè´£æ˜¯å¯¹é½ä¸€äº›ç‹¬ç«‹çš„å…ƒç´ ã€‚ é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œå…ƒç´ éƒ½æ˜¯ç›¸å¯¹äºŽè°æ¥å¯¹é½çš„å‘¢ï¼Ÿ å…³äºŽåŸºçº¿å’Œå¤–è¾¹ç¼˜åž‚ç›´å¯¹é½æœ€é‡è¦çš„å‚è€ƒç‚¹å°±æ˜¯æ‰€æ¶‰åŠå…ƒç´ çš„åŸºçº¿ï¼ŒæŸäº›æƒ…å†µä¸‹å…ƒç´ çš„ç›’æ¨¡åž‹çš„ä¸Šä¸‹è¾¹ç¼˜ä¹Ÿå¾ˆé‡è¦ã€‚å°±è®©æˆ‘ä»¬æ¥çœ‹çœ‹æ¶‰åŠåˆ°çš„å„ä¸ªç§ç±»çš„å…ƒç´ çš„åŸºçº¿å’Œå¤–è¾¹ç¼˜åœ¨å“ªå„¿ã€‚ inline å…ƒç´  è¿™é‡Œä½ å¯ä»¥çœ‹åˆ°ç›¸è¿žæ–‡å­—çš„ä¸‰æ¡çº¿ï¼Œè¡Œé«˜çš„ä¸Šä¸‹è¾¹ç•Œç”¨çº¢è‰²çº¿æ¡ï¼Œæ–‡å­—çš„é«˜åº¦ç”¨ç»¿è‰²çº¿æ¡ï¼ŒåŸºçº¿ç”¨è“è‰²çº¿æ¡æ ‡æ³¨å‡ºæ¥äº†ã€‚å·¦è¾¹ï¼Œæ–‡å­—è¡Œé«˜è¢«è®¾ç½®ä¸ºæ–‡å­—å¤§å°çš„é«˜åº¦ï¼›ä¸­é—´ï¼Œæ–‡å­—è¡Œé«˜æ˜¯æ–‡å­—å¤§å°çš„ä¸¤å€ï¼›å³è¾¹ï¼Œæ–‡å­—è¡Œé«˜æ˜¯æ–‡å­—å¤§å°çš„ä¸€åŠã€‚ è¡Œå†…å…ƒç´ å¤–è¾¹ç¼˜ ä¸Žå®ƒè¡Œé«˜çš„ä¸Šä¸‹è¾¹ç¼˜å¯¹é½ï¼Œå¦‚æžœè¡Œé«˜å°äºŽå­—ä½“çš„é«˜åº¦ä¹Ÿæ— æ‰€è°“ï¼Œæ‰€ä»¥ï¼Œåœ¨ä¸Šå›¾ä¸­å¤–è¾¹ç¼˜æ˜¯çº¢è‰²çº¿æ¡ã€‚ è¡Œå†…å…ƒç´ åŸºçº¿ å°±æ˜¯å­—ç¬¦åç€çš„é‚£æ¡çº¿ï¼Œåœ¨å›¾ä¸­æ˜¯è“è‰²çº¿æ¡ã€‚ä¸¥æ ¼æ¥è¯´ï¼ŒåŸºçº¿å°±æ˜¯å¤„åœ¨æ–‡å­—é«˜åº¦ä¸­é—´ä»¥ä¸‹çš„æŸå¤„ã€‚å¥½å¥½çœ‹çœ‹ W3C è§„èŒƒå¯»æ±‚ä¸€ä¸‹è¯¦ç»†å®šä¹‰ ã€‚ inline-block å…ƒç´  ä»Žå·¦åˆ°å³ä½ å¯ä»¥çœ‹åˆ°ä¸‰ä¸ªå†…è”å—å…ƒç´ ï¼Œå·¦è¾¹çš„åŒ…å«ç€æ–‡æ¡£æµå†…çš„å†…å®¹ï¼ˆä¸€ä¸ªâ€˜câ€™ï¼‰ï¼Œä¸­é—´çš„é™¤æ­¤ä»¥å¤–è¿˜æ·»åŠ äº† overflow: hidden ï¼Œå³è¾¹çš„æ²¡æœ‰æ–‡æ¡£æµå†…çš„å†…å®¹ï¼ˆä½†å†…å®¹åŒºåŸŸè¿˜æœ‰é«˜åº¦ï¼‰ã€‚margin è¾¹ç•Œç”¨çº¢è‰²çº¿æ¡æ ‡æ³¨ï¼Œ border ç”¨é»„è‰²ï¼Œ padding ç”¨ç»¿è‰²ï¼Œå†…å®¹åŒºåŸŸç”¨è“è‰²ã€‚æ¯ä¸ª å†…è”å—å…ƒç´ çš„åŸºçº¿æ˜¯ç”¨ä¸€æ¡è“è‰²çº¿æ¡å±•ç¤ºçš„ã€‚ å†…è”å—ç›’çš„å¤–è¾¹ç¼˜ æ˜¯ margin ç›’çš„ä¸Šè¾¹ç¼˜å’Œä¸‹è¾¹ç¼˜ã€‚ä»–ä»¬åœ¨å›¾ä¸­æ˜¯çº¢è‰²çº¿æ¡ã€‚ å†…è”å—ç›’çš„å¤–è¾¹ç¼˜ å–å†³äºŽå…ƒç´ æ˜¯å¦æ‹¥æœ‰æ–‡æ¡£æµå†…çš„å†…å®¹ï¼š åœ¨æ‹¥æœ‰æµå†…å†…å®¹çš„æƒ…å†µä¸‹ï¼Œå†…è”å—å…ƒç´ çš„åŸºçº¿æ˜¯æœ€åŽä¸€ä¸ªæµå†…å†…å®¹å…ƒç´ çš„åŸºçº¿ï¼Œè¿™ä¸ªå…ƒç´ çš„åŸºçº¿æ ¹æ®å…¶è‡ªèº«è§„åˆ™æ¥è®¡ç®—ã€‚ï¼ˆå·¦è¾¹ä¾‹å­ï¼‰ åœ¨æ‹¥æœ‰æµå†…å†…å®¹å¹¶ä¸” overflow è®¡ç®—å€¼ä¸æ˜¯ visible çš„æƒ…å†µä¸‹ï¼ŒåŸºçº¿æ˜¯ margin ç›’çš„ä¸‹è¾¹ç¼˜ã€‚è¿™æ ·ï¼Œå®ƒå°±å’Œå†…è”å—å…ƒç´ çš„ä¸‹è¾¹ç¼˜ä¸€æ ·äº†ã€‚ï¼ˆä¸­é—´ä¾‹å­ï¼‰ åœ¨æ²¡æœ‰æ‹¥æœ‰æµå†…å†…å®¹çš„æƒ…å†µä¸‹ï¼ŒåŸºçº¿åŒæ ·æ˜¯ margin ç›’çš„ä¸‹è¾¹ç¼˜ã€‚ï¼ˆå³è¾¹ä¾‹å­ï¼‰ line box è¿™ç§æ ‡æ³¨ä½ ä»¬åœ¨ä¸Šé¢å°±å·²ç»çœ‹è¿‡äº†ï¼Œè¿™æ¬¡æˆ‘åŒæ ·ç”»äº†è¡Œç›’ä¸­æ–‡æœ¬æ¡†çš„ä¸Šä¸‹è¾¹ç•Œï¼ˆç»¿è‰²ï¼‰å’ŒåŸºçº¿ï¼ˆè“è‰²ï¼‰ã€‚æˆ‘è¿˜ç»™æ–‡æœ¬å…ƒç´ è®¾äº†ç°è‰²èƒŒæ™¯æ¥é«˜äº®æ˜¾ç¤ºå®ƒä»¬ã€‚ è¡Œç›’çš„ä¸Šè¾¹ç•Œä¸Žæœ€é«˜å…ƒç´ çš„ä¸Šè¾¹ç•Œå¯¹é½ï¼Œä¸‹è¾¹ç•Œä¸Žæœ€ä½Žå…ƒç´ çš„ä¸‹è¾¹ç•Œå¯¹é½ã€‚ä¸Šå›¾ä¸­çº¢çº¿æ ‡æ³¨çš„æ¡†å°±æ˜¯ã€‚ è¡Œç›’çš„åŸºçº¿ æ˜¯å¯å˜çš„ï¼š CSS 2.1æ²¡æœ‰å®šä¹‰è¡Œç›’åŸºçº¿çš„ä½ç½®. â€” W3C å·¥ä½œç»„ å½“æˆ‘ä»¬ä½¿ç”¨ vertical-align çš„æ—¶å€™ï¼Œè¿™å¯èƒ½æ˜¯æœ€è®©äººç–‘æƒ‘çš„éƒ¨åˆ†äº†ã€‚åŸºçº¿ä¼šè¢«æ”¾ç½®åœ¨ä»»ä½•éœ€è¦çš„åœ°æ–¹ï¼Œç”¨ä»¥è¾¾æˆåƒ åž‚ç›´å¯¹é½ å’Œ æœ€å°åŒ–è¡Œç›’é«˜åº¦ çš„æƒ…å†µã€‚å®ƒæ˜¯ç­‰å¼ä¸­çš„è‡ªç”±å˜é‡ã€‚ è¡Œç›’çš„åŸºçº¿æ˜¯ä¸å¯è§çš„ï¼Œå®ƒä¸èƒ½ç«‹é©¬æ˜¾ç¤ºå‡ºå®ƒåœ¨å“ªé‡Œï¼Œä½†æ˜¯å¯ä»¥å¾ˆè½»æ˜“åœ°è®©å®ƒå¯è§ã€‚åœ¨è¡Œçš„å¼€å¤´æ·»åŠ ä¸€ä¸ªå­—ç¬¦ï¼Œæ¯”å¦‚æˆ‘åœ¨ä¾‹å­ä¸­æ·»åŠ äº†â€™xâ€™ã€‚å¦‚æžœè¿™ä¸ªå­—ç¬¦æ²¡æœ‰ä»¥ä»»ä½•æ–¹å¼å¯¹é½çš„è¯ï¼Œå®ƒå°†é»˜è®¤åŸºçº¿å¯¹é½ã€‚ è¡Œç›’ä¸­ï¼Œåœ¨åŸºçº¿å‘¨å›´æœ‰ä¸€ä¸ªå«åš æ–‡æœ¬æ¡† çš„å­˜åœ¨ã€‚æ–‡æœ¬æ¡†å¯ä»¥è¢«ç®€å•åœ°å½“æˆè¡Œç›’ä¸­çš„ä¸€ä¸ªæ²¡æœ‰ä»»ä½•å¯¹é½æ–¹å¼çš„å†…è”ç›’ã€‚å®ƒçš„é«˜åº¦ç­‰äºŽå®ƒçš„çˆ¶å…ƒç´ çš„å­—ä½“å¤§å°ã€‚å› æ­¤ï¼Œæ–‡æœ¬æ¡†åªåŒ…å«è¡Œç›’çš„éžæ ¼å¼åŒ–æ–‡æœ¬ï¼Œå®ƒåœ¨ä¸Šå›¾ä¸­è¢«ç»¿è‰²çº¿æ¡æ ‡æ³¨ã€‚ç”±äºŽæ–‡æœ¬æ¡†ä¸ŽåŸºçº¿ç»‘å®šåœ¨ä¸€èµ·ï¼Œå½“åŸºçº¿ç§»åŠ¨æ—¶å®ƒä¹Ÿç§»åŠ¨ã€‚ï¼ˆè¿™é‡Œæ‰€è¯´çš„æ–‡æœ¬æ¡†åœ¨ W3C å·¥ä½œç»„è¢«å«åš strut ï¼‰ å–”ï¼Œè¿™å°±æ˜¯æœ€éš¾çš„éƒ¨åˆ†ï¼Œé€šè¿‡å„ä¸ªè§’åº¦è§‚å¯Ÿæˆ‘ä»¬å·²ç»çŸ¥æ™“äº†æ‰€æœ‰äº‹æƒ…ã€‚è®©æˆ‘ä»¬èµ¶ç´§æ€»ç»“ä¸€ä¸‹æœ€é‡è¦çš„äº‹å®žï¼š è¿™é‡Œæœ‰ä¸ªå«åš line box çš„åŒºåŸŸï¼Œåœ¨è¿™é‡Œï¼Œä¼šæœ‰åž‚ç›´å¯¹é½ã€‚å®ƒæ‹¥æœ‰ä¸€æ¡åŸºçº¿ï¼Œä¸€ä¸ªæ–‡æœ¬æ¡†ï¼Œä»¥åŠä¸Šä¸‹è¾¹ç•Œå„ä¸€æ¡ã€‚ å†…è”çº§å…ƒç´ ï¼Œæ˜¯ä¼šå¯¹é½çš„å¯¹è±¡ã€‚å®ƒä»¬æ‹¥æœ‰ä¸€æ¡åŸºçº¿ï¼Œä¸Šä¸‹è¾¹ç•Œå„ä¸€æ¡ã€‚ vertical-align çš„å€¼ä¸Šé¢é‚£ä¸ªåˆ—è¡¨ä¸­æœ€åŽä¸€å¥è¯æåŠçš„å‚è€ƒç‚¹ï¼Œå› ä¸º vertical-align è€Œæœ‰äº†å…³è”ã€‚ å…ƒç´ çš„åŸºçº¿ä¸Žè¡Œç›’çš„åŸºçº¿ baselineï¼šå…ƒç´ åŸºçº¿æ­£å¥½å°±åœ¨è¡Œç›’åŸºçº¿ä¸Š subï¼šå…ƒç´ åŸºçº¿åœ¨è¡Œç›’åŸºçº¿ä¸‹æ–¹ superï¼šå…ƒç´ åŸºçº¿åœ¨è¡Œç›’åŸºçº¿ä¸Šæ–¹ ï¼šå…ƒç´ åŸºçº¿æ ¹æ®è¡Œç›’åŸºçº¿ä½ç½®ç§»åŠ¨ line-height * &lt;percentage&gt; ï¼šå…ƒç´ åŸºçº¿æ ¹æ®è¡Œç›’åŸºçº¿ä½ç½®ç§»åŠ¨ç»å¯¹çš„é•¿åº¦ å…ƒç´ çš„å¤–è¾¹ç•Œä¸Žè¡Œç›’çš„åŸºçº¿ middleï¼šå…ƒç´ ä¸Šä¸‹è¾¹ç•Œé—´çš„ä¸­å¿ƒç‚¹å¯¹é½åœ¨è¡Œç›’åŸºçº¿åŠ ä¸Šä¸€åŠx-height å…ƒç´ å¤–è¾¹ç•Œä¸Žè¡Œç›’çš„æ–‡æœ¬æ¡† ç›¸å¯¹äºŽè¯¥è¡Œæ¡†çš„åŸºçº¿å¯¹é½ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åˆ—å‡ºå¦‚ä¸‹è¿™ä¸¤ç§æƒ…å†µï¼Œå› ä¸ºæ–‡æœ¬æ¡†çš„ä½ç½®ç”±åŸºå‡†ç¡®å®šã€‚ text-topï¼šå…ƒç´ ä¸Šè¾¹ç•Œä¸Žæ–‡æœ¬æ¡†ä¸Šè¾¹ç•Œå¯¹é½ text-bottomï¼šå…ƒç´ ä¸‹è¾¹ç•Œä¸Žæ–‡æœ¬æ¡†ä¸‹è¾¹ç•Œå¯¹é½ å…ƒç´ å¤–è¾¹ç•Œä¸Žè¡Œç›’å¤–è¾¹ç•Œ topï¼šå…ƒç´ ä¸Šè¾¹ç•Œä¸Žè¡Œç›’ä¸Šè¾¹ç•Œå¯¹é½ bottomï¼š å…ƒç´ ä¸Šè¾¹ç•Œä¸Žè¡Œç›’ä¸‹è¾¹ç•Œå¯¹é½ å½“ç„¶ï¼ŒW3C è§„èŒƒä¸­å°±æœ‰ æ­£å¼å®šä¹‰ ã€‚ ä¸ºä½• vertical-align å¦‚æ­¤å˜çŽ°å‘¢æˆ‘ä»¬å¯ä»¥åœ¨ç‰¹å®šçš„æƒ…å¢ƒä¸‹è¿‘è·ç¦»è§‚å¯Ÿä¸‹åž‚ç›´å¯¹é½ï¼Œå°¤å…¶æ˜¯ï¼Œæˆ‘ä»¬åœ¨å¤„ç†æŸäº›bugçš„æƒ…å†µä¸‹ã€‚ å›´ç»•ä¸€ä¸ªå›¾æ ‡ä¸€ç›´å›°æ‰°ç€æˆ‘çš„ä¸€ä¸ªé—®é¢˜æ˜¯è¿™æ ·çš„ï¼šæˆ‘æœ‰ä¸€ä¸ªå›¾æ ‡ï¼Œæˆ‘æƒ³è®©ä»–ç´§é‚»ä¸€è¡Œæ–‡å­—å±…ä¸­å¯¹é½ï¼Œæˆ‘ç»™å®ƒåŠ ä¸Šäº† vertical-align: middle ä½†ä¼¼ä¹Žæ²¡æœ‰ä»¥ä»¤äººæ»¡æ„çš„æ–¹å¼å±…ä¸­ã€‚æ¥çœ‹çœ‹è¿™ä¸ªä¾‹å­ï¼š 1234567891011121314&lt;!-- left mark-up --&gt;&lt;span class="icon middle"&gt;&lt;/span&gt;Centered?&lt;!-- right mark-up --&gt;&lt;span class="icon middle"&gt;&lt;/span&gt;&lt;span class="middle"&gt;Centered!&lt;/span&gt;&lt;style type="text/css"&gt; .icon &#123; display: inline-block; /* size, color, etc. */ &#125; .middle &#123; vertical-align: middle; &#125;&lt;/style&gt; è¿™é‡Œæˆ‘å†æ¬¡å±•ç¤ºä¸€ä¸‹è¿™ä¸ªä¾‹å­ï¼Œä¸è¿‡æˆ‘ç”»äº†ä¸€äº›è¾…åŠ©çº¿ï¼Œä¸Šé¢å·²ç»è®²è¿‡äº†ã€‚ å®ƒæ­ç¤ºå‡ºäº†æˆ‘ä»¬çš„é—®é¢˜çš„ä¸€äº›æƒ…å†µã€‚å› ä¸ºå·¦è¾¹çš„æ–‡å­—åŽ‹æ ¹æ²¡æœ‰å¯¹é½ï¼Œå®žé™…æƒ…å†µæ˜¯ï¼Œä½¿ç”¨ vertical-align æˆ‘ä»¬ä¼šæŠŠç›’å­å¯¹é½åœ¨æ²¡æœ‰å»¶ä¼¸ï¼ˆ1/2 çš„x-heightï¼‰çš„å°å†™å­—æ¯çš„ä¸­å¿ƒç‚¹ã€‚æ‰€ä»¥ï¼Œæœ‰å»¶ä¼¸çš„å­—ç¬¦ä¼šä¼¸å‡ºé¡¶éƒ¨ã€‚ åœ¨å³è¾¹ï¼Œæ–‡å­—ä¸Žiconéƒ½å¯¹é½äºŽä¸€ä¸ªä¸­ç‚¹ï¼Œæ–‡å­—çš„åŸºçº¿ç¨å¾®ä¸‹ç§»ï¼Œä½äºŽè¡Œç›’çš„åŸºçº¿çš„ä¸‹æ–¹ã€‚ç»“æžœæ˜¯å¾ˆå¥½çš„è¾¾åˆ°äº†iconä¸Žæ–‡å­—å¯¹é½çš„æ•ˆæžœã€‚ è¡Œç›’åŸºçº¿çš„ç§»åŠ¨å½“æˆ‘ä»¬ä½¿ç”¨ vertical-align æ—¶ï¼Œéƒ½æœ‰è¿™æ ·ä¸€ä¸ªå‘ï¼šè¡Œç›’åŸºçº¿çš„ä½ç½®å—è¯¥è¡Œæ‰€æœ‰å…ƒç´ çš„å½±å“ã€‚å‡è®¾ï¼Œä¸€ä¸ªå…ƒç´ ä»¥æŸç§æ–¹å¼å¯¹é½äº†ï¼Œè¡Œç›’åŸºçº¿å—å½±å“ç§»åŠ¨äº†ï¼Œç”±äºŽå¤§éƒ¨åˆ†å…ƒç´ éƒ½å·²ç»æ ¹æ®è¿™æ¡åŸºçº¿åž‚ç›´å¯¹é½å®Œæ¯•ï¼Œæœ€åŽçš„ç»“æžœå°±æ˜¯å…¶ä»–æ‰€æœ‰çš„å…ƒç´ éƒ½éœ€è¦è°ƒæ•´ä½ç½®ã€‚ ä¸€äº›ä¾‹å­ï¼š ä¸€ä¸ªå¾ˆé«˜çš„å…ƒç´ ï¼Œå…¶é«˜åº¦å æ»¡äº†æ•´ä¸ªè¡Œç›’ï¼Œé‚£ä¹ˆ vertical-align å¯¹å…¶æ˜¯æ²¡æœ‰å½±å“çš„ï¼Œåœ¨å®ƒçš„é¡¶éƒ¨å’Œåº•éƒ¨ä¹‹å¤–æ²¡æœ‰ç©ºé—´è®©å…¶ç§»åŠ¨ã€‚ä½†æ˜¯ä¸ºäº†æ»¡è¶³å®ƒçš„å¯¹é½éœ€æ±‚ï¼Œè¡Œç›’çš„åŸºçº¿ä¼šå‘ç”Ÿç§»åŠ¨ï¼Œå·¦é¢çš„é«˜å…ƒç´ çš„å–å€¼ä¸º text-bottom ï¼ŒçŸ®å…ƒç´ çš„å–å€¼ä¸º baseline ã€‚å³é¢çš„é«˜å…ƒç´ çš„å–å€¼ä¸º text-top ï¼Œä½ ä¼šçœ‹åˆ°åŸºçº¿è·³ä¸ŠåŽ»äº†ã€‚ 12345678910111213141516&lt;!-- left mark-up --&gt;&lt;span class="tall-box text-bottom"&gt;&lt;/span&gt;&lt;span class="short-box"&gt;&lt;/span&gt;&lt;!-- right mark-up --&gt;&lt;span class="tall-box text-top"&gt;&lt;/span&gt;&lt;span class="short-box"&gt;&lt;/span&gt;&lt;style type="text/css"&gt; .tall-box, .short-box &#123; display: inline-block; /* size, color, etc. */ &#125; .text-bottom &#123; vertical-align: text-bottom; &#125; .text-top &#123; vertical-align: text-top; &#125;&lt;/style&gt; å½“ç»™é«˜å…ƒç´ è®¾ç½® `vertical-align` ä¸ºå…¶ä»–å€¼æ—¶ï¼Œä¼šæœ‰åŒæ ·çš„è¡¨çŽ°ã€‚ ç”šè‡³å°† vertical-align è®¾ç½®æˆ bottom å’Œ top ä¹Ÿä¼šç§»åŠ¨åŸºçº¿ï¼Œè¿™å¾ˆå¥‡æ€ªï¼Œå› ä¸ºä¸è¯¥æ³¢åŠåŸºçº¿ã€‚ 12345678910111213141516&lt;!-- left mark-up --&gt;&lt;span class="tall-box bottom"&gt;&lt;/span&gt;&lt;span class="short-box"&gt;&lt;/span&gt;&lt;!-- right mark-up --&gt;&lt;span class="tall-box top"&gt;&lt;/span&gt;&lt;span class="short-box"&gt;&lt;/span&gt;&lt;style type="text/css"&gt; .tall-box, .short-box &#123; display: inline-block; /* size, color, etc. */ &#125; .bottom &#123; vertical-align: bottom; &#125; .top &#123; vertical-align: top; &#125;&lt;/style&gt; æ­¤æ–‡ä¸ºè¯‘æ–‡ï¼ŒçŽ°åœ¨ä¸æƒ³ç¿»è¯‘äº†ï¼Œä»¥åŽä¼šæŠŠå®ƒè¡¥å…¨ï¼Œå¹¶æ”¾åˆ°è¯‘æ–‡ç›®å½•ä¸‹ï¼Œvertical-align ç« èŠ‚è‡ªå·±ä¼šå†™ä¸€ç¯‡æ–‡ç« æŽ¨ä¸Šæ¥ã€‚ å°±æ˜¯è¿™ä¹ˆä»»æ€§ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[é‡æ‹¾CSSè§„èŒƒä¹‹line-height]]></title>
      <url>%2F2016%2F09%2F16%2Frelearn_line-height%2F</url>
      <content type="text"><![CDATA[line-height æ˜¯ä¸ºæ•°ä¸å¤šæ”¯æŒæ•°å€¼å¯ä»¥å¸¦å•ä½å¯ä»¥ä¸å¸¦å•ä½çš„å±žæ€§ï¼Œä½†æ˜¯å…¶æ•ˆæžœç¡®å®žåƒå·®ä¸‡åˆ«ï¼Œä»Šå¤©ä¼šç”¨æ•°æ®æ¥ä¾ƒä¸€ä¾ƒå…¶ä¸­çš„å·®å¼‚æ€§ã€‚å‰é¢è®² IFCçš„æ—¶å€™è¯´è¿‡è¦å¥½å¥½èŠä¸€èŠè¡Œç›’çš„é«˜åº¦ï¼Œå°±åœ¨æœ¬æ–‡ä¸­æ¥ä¸ªå¤§æ­ç§˜å§ã€‚ å‰æ–¹é«˜èƒ½æç¤ºï¼Œç¬¬ä¸€å¤§èŠ‚å…¨éƒ¨éƒ½æ˜¯åŽŸç†æ€§çš„ç ”ç©¶ï¼Œä¸æƒ³çœ‹å¯ä»¥ç•¥è¿‡-_-ä½†ä½ ä¼šåŽæ‚”çš„ï¼ŒåŽé¢æ˜¯å®žç”¨æ€§æ¯”è¾ƒå¼ºçš„çŸ¥è¯†ã€‚ å®šä¹‰äºŒä¸‰äº‹è¡Œé«˜åªèƒ½ç®—æ˜¯ line-height çš„ä¸­æ–‡ç¿»è¯‘ï¼Œ CSS è§„èŒƒ åªå¯¹ line-height ä½œå‡ºä¸€ä¸ªç¨æ˜¾æ¨¡ç³Šçš„å®šä¹‰ã€‚ line-height å€¼ï¼ˆå³è¡Œé«˜ï¼‰å°±æ˜¯ä¸¤è¡Œï¼ˆå±žæ€§ä¸€æ ·çš„ï¼‰æ–‡æœ¬çš„åŸºçº¿çš„è·ç¦» ä¸¤ä¸ªä¸åŒå­—ä½“æˆ–è€…ä¸åŒå¤§å°çš„æ–‡å­—ï¼Œå®ƒä»¬çš„åŸºçº¿ä½ç½®å„ä¸ç›¸åŒï¼ŒåŸºçº¿è·ç¦»æ ¹æœ¬å°±ä¸èƒ½å¾—å‡º line-height å€¼ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘è¦å¼ºè°ƒå±žæ€§ä¸€æ ·çš„æ–‡å­—ã€‚ åŸºçº¿è§£é‡Šè¿™é‡Œåˆè¦æ‡µé€¼äº†ï¼Œä»€ä¹ˆå«åšåŸºçº¿ï¼Ÿæˆ‘æ€Žä¹ˆçŸ¥é“å®ƒåœ¨å“ªé‡Œï¼Ÿ æˆ‘ä»¬å°å­¦éƒ½ç”¨è¿‡è‹±è¯­å››çº¿ä¸‰æ ¼çº¸ï¼Œå¬å”¤ä¸€ä¸‹å®ƒï¼Œå”¤é†’æˆ‘ä»¬å†…æ¶µæ— é™çš„ç«¥å¹´ã€‚ç›¸ä¿¡å¤§å®¶ä¸€çœ‹å°±çŸ¥é“è¿™å››æ¡çº¿åˆ†åˆ«ä»£è¡¨å“ªä¸ªéƒ¨åˆ†äº†ã€‚ line-height é«˜åº¦æœºåˆ¶è° â€˜æ’‘å¼€â€™ é«˜åº¦å½“æˆ‘ä»¬ç»™ä¸€ä¸ªç©ºçš„ div æ·»åŠ ä»»æ„æ–‡å­—æ—¶ï¼Œ div çš„é«˜åº¦ä¼šä»Ž 0 å˜æˆæŸä¸€ä¸ªå€¼ï¼Œé‚£ div æ˜¯ç”±æ–‡å­— â€˜æ’‘å¼€â€™ çš„å—ï¼Ÿä¸ï¼Œæ˜¯line-heightçš„ä½œç”¨ã€‚ çœ‹ä¸€ä¸‹æˆ‘å¯¹ä¸‹é¢ä¸¤ä¸ª div è®¾ç½®çš„ style ï¼š 123&lt;div style="font-size: 40px; line-height: 0; border: 1px solid #ccc;"&gt;font-size: 40px; line-height: 0;&lt;/div&gt;&lt;br /&gt;&lt;div style="font-size: 0; line-height: 40px; border: 1px solid #ccc;"&gt;font-size: 0; line-height: 40px;&lt;/div&gt; font-size: 40px; line-height: 0; font-size: 0; line-height: 40px; ç¬¬ä¸€ä¸ª div è™½ç„¶å­—å¾ˆå¤§ï¼Œä½†æ˜¯ç”±äºŽ line-height ä¸º 0 ï¼Œæœ€åŽè½å¾—ä¸€ä¸ªé«˜åº¦ä¸º 0 çš„ç»“æžœ;ç¬¬äºŒä¸ª div è™½ç„¶ font-size ä¸º 0 å­—å„¿éƒ½æ˜¾ç¤ºä¸å‡ºæ¥äº†ï¼Œä½†æ˜¯æ„£æ˜¯è®© div é«˜åº¦å˜ä¸ºäº† 40px ã€‚ æ‰€ä»¥ï¼Œ line-height â€˜æ’‘å¼€â€™ äº†åŒ¿åå†…è”ç›’çš„é«˜åº¦ï¼Œç»§è€Œ â€˜æ’‘å¼€â€™ äº† div ã€‚å¦‚æžœæˆ‘ä»¬å¹³æ—¶å¼€å‘ï¼Œé‡åˆ°æƒ³è®¾ç½®æ–‡å­—åž‚ç›´å±…ä¸­ï¼Œè€Œè®¾ç½® line-height = height æ—¶ï¼Œå¯ä»¥æŠŠ height åŽ»æŽ‰äº†ï¼Œå› ä¸º line-height å®Œå…¨å¯ä»¥æ›¿ä»£ height çš„ä½œç”¨ã€‚ line-height å¦‚ä½• â€˜æ’‘å¼€â€™æˆ‘ä»¬è¯´æ˜¯ line-height â€˜æ’‘å¼€â€™ äº†å†…è”ç›’ï¼Œå…¶å®žä¸å¤Ÿå‡†ç¡®ã€‚ç¡®å®žä¸Ž line-height æœ‰å…³ï¼Œä½†æ˜¯å®ƒæ›´åƒæ˜¯ä¸€ä¸ªæŒ‡æŒ¥å…³ï¼Œå®ƒåŽé¢è¿˜æœ‰ä¸€å¥—æ—¶åˆ»è¿è½¬çš„æœºåˆ¶æ¥æä¾›æœåŠ¡ã€‚ è¿™é‡Œæˆ‘æƒ³å¼ºè°ƒçš„æ˜¯ï¼ŒåŸºçº¿ä¹‹é—´çš„è·ç¦»åªæ˜¯ä½œä¸º line-height çš„å€¼ï¼Œä¸ä»£è¡¨ line-height æ˜¯è¿™å—åŒºåŸŸçš„ï¼Œ line-height æ˜¯æ²¡æœ‰åŒºåŸŸä¹‹è¯´çš„ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå€¼ï¼Œä¸€ä¸ªæ¦‚å¿µã€‚ å†…è”ç›’çœŸå®žçš„åŒºåŸŸåˆ’åˆ†å°±æ˜¯å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œå†…è”ç›’çœŸæ­£çš„ç»„æˆå°±æ˜¯ç”±å†…å®¹åŒºåŸŸä»¥åŠä¸Šä¸‹åŠè¡Œè·ç»„æˆã€‚ é¡¶çº¿ä¸Žåº•çº¿ä¹‹é—´çš„åŒºåŸŸæˆ‘ä»¬å«åšå†…å®¹åŒºåŸŸï¼Œå†…å®¹åŒºåŸŸåªä¸Žå­—ä½“åŠå­—å·ç›¸å…³ï¼Œè¿™ä¸ªçŸ¥é“å°±è¡Œã€‚ä¸Šä¸€è¡Œæ–‡æœ¬åº•çº¿ä¸Žä¸‹ä¸€è¡Œæ–‡æœ¬é¡¶çº¿ä¹‹é—´çš„è·ç¦»å«åšè¡Œè·ï¼Œè¿™ä¸ªè¡Œè·åº”å½“åˆ†æˆä¸¤åŠï¼Œä¸Šä¸€è¡Œæ–‡æœ¬çš„ä¸‹åŠè¡Œè·ï¼Œä»¥åŠä¸‹ä¸€è¡Œæ–‡æœ¬çš„ä¸ŠåŠè¡Œè·ï¼Œæˆ‘åœ¨å›¾ä¸­åœ¨å®ƒä»¬ä¸­é—´ç•™äº†ä¸€æ¡ç¼éš™ä»¥ç¤ºåŒºåˆ†ã€‚ ä¸ŠåŠè¡Œè· + å†…å®¹åŒºåŸŸ + ä¸‹åŠè¡Œè· = line-height æµè§ˆå™¨ä¼šæ ¹æ®å­—å½¢æ¥ç¡®å®šå†…å®¹åŒºåŸŸçš„é«˜åº¦ hï¼Œç„¶åŽæ ¹æ® (line-height - h) / 2 æ¥è®¡ç®—å‡ºä¸ŠåŠè¡Œè·å’Œä¸‹åŠè¡Œè·ã€‚ å¦‚æžœæˆ‘ä»¬å®šä¹‰äº†ä¸€è¡Œæ–‡æœ¬ line-height ä¸º 30px ï¼Œå‡è®¾å†…å®¹åŒºåŸŸé«˜åº¦ä¸º 16px ï¼Œé‚£ ä¸ŠåŠè· = ä¸‹åŠè· = (30px - 16px) / 2 = 7px ã€‚ å…¶å®žï¼Œåˆ°äº†çŽ°åœ¨æˆ‘ä»¬å¯ä»¥ç†è§£ï¼Œä¸ºä»€ä¹ˆæˆ‘ä»¬ç»™å•è¡Œæ–‡æœ¬è®¾ç½®äº† line-height ä¹‹åŽï¼Œæ–‡æœ¬ä¼šåž‚ç›´å±…ä¸­ã€‚ä½†æ˜¯ï¼Œæ–‡æœ¬å…¶å®žæ²¡æœ‰çœŸæ­£çš„åž‚ç›´å±…ä¸­ã€‚å› ä¸ºçœŸæ­£åž‚ç›´å±…ä¸­çš„æ˜¯å†…å®¹åŒºåŸŸï¼Œè€Œæ–‡å­—åœ¨å†…å®¹åŒºåŸŸä¸­å¹¶ä¸æ˜¯åž‚ç›´å±…ä¸­ï¼Œé€šè¿‡ä¸Šé¢çš„å›¾å°±å¯ä»¥å‘çŽ°ã€‚ä½†è¿™ä¸€ç‚¹ä¸éœ€è¦è¿‡åº¦è®¡è¾ƒï¼Œå› ä¸ºè¿™ä¸ªå¹³æ—¶åŽ‹æ ¹çœ‹ä¸å‡ºæ¥ã€‚ è¡Œç›’çš„é«˜åº¦æˆ‘ä»¬å¹³æ—¶å¯èƒ½å¬çš„æ¯”è¾ƒå¤šçš„ç‰ˆæœ¬æ˜¯ï¼Œè¡Œç›’é«˜åº¦æ˜¯ç”±è¿™ä¸€è¡Œä¸­æœ€å¤§çš„ line-height å†³å®šçš„ï¼Œè¿™å¥è¯å…¶å®žæ˜¯é”™çš„ï¼Œå› ä¸ºå®ƒå®Œå…¨å¿½ç•¥äº† vertical-align å­˜åœ¨çš„æƒ…å†µã€‚ IFC ä¸€é—®ä¸­å·²ç»è®²åˆ°ï¼Œè¡Œç›’ç”±ä¸€è¡Œå†…è”çº§ç›’ç»„æˆï¼Œè¡Œç›’çš„é«˜åº¦å°±æ˜¯æœ€é«˜çš„ç›’ï¼ˆä¸ŠåŠè¾¹è·ï¼‰é¡¶éƒ¨åˆ°æœ€ä½Žçš„ç›’ï¼ˆä¸‹åŠè¾¹è·ï¼‰åº•éƒ¨çš„è·ç¦»ã€‚ line-heightå„å±žæ€§å€¼æ¥å›žé¡¾ä¸€ä¸‹ line-height å¯è®¾ç½®çš„å±žæ€§å€¼ç±»åž‹ï¼š Value: normal | &lt; number &gt; | &lt; length &gt; | &lt; percentage &gt; | inherit Tipsï¼šä¸å¯ä»¥å¯¹ line-height è®¾ç½®è´Ÿå€¼ï¼ normal æ²¡ä»€ä¹ˆå¤ªå¤šå¯è®²çš„ï¼Œè¿™æ˜¯ line-height çš„é»˜è®¤å€¼ã€‚å®ƒå®žé™…è¡¨çŽ°ç­‰åŒäºŽ 1.1 ~ 1.2 number æŒ‡ä¸å¸¦å•ä½çš„æ•°å€¼ã€‚å®ƒçš„è®¡ç®—å€¼æ˜¯ line-height ä¹˜å½“å‰å…ƒç´ çš„ font-size å‡è®¾æˆ‘çŽ°åœ¨æŒ‡å®š font-size: 20px; line-height: 1.2; ï¼Œ line-height æœ€åŽå®žé™…å€¼ä¸º 20px * 1.2 = 24px length å°±æ˜¯ç›´æŽ¥æŒ‡å®šå¸¦å•ä½çš„å€¼ï¼Œå¦‚ px , em percentage å°±æ˜¯æŒ‡ç™¾åˆ†æ¯”ã€‚å®ƒçš„è®¡ç®—å€¼æ˜¯ç™¾åˆ†æ¯”ä¹˜å½“å‰å…ƒç´ çš„ font-size inherit å› ä¸ºæµè§ˆå™¨å®žçŽ°æ–¹å¼å·®å¼‚è¾ƒå¤§ï¼Œæ•…ä¸æŽ¨èä½¿ç”¨ ç„¶åŽæˆ‘å°±åœ¨æƒ³ï¼Œ line-height: 1.2 å’Œ line-height: 120% æœ€åŽè®¡ç®—å€¼éƒ½æ˜¯ä¸€æ ·ï¼Œé‚£ä¸ºä»€ä¹ˆè¦è®¾ç½®ä¸¤ç§æ–¹å¼å‘¢ï¼Ÿå­˜åœ¨å¿…æœ‰åŽŸå› ã€‚ æœ€é‡è¦çš„ä¸€ç‚¹ï¼šline-height: 1.2 ç»§æ‰¿ç»™å­å…ƒç´ çš„æ˜¯ line-height: 1.2 ï¼Œè€Œ line-height: 120% æ˜¯å…ˆå°† line-height è®¡ç®—å‡ºæ¥ï¼Œå†å°†æ­¤è®¡ç®—å€¼ç»§æ‰¿ç»™å­å…ƒç´ ã€‚ line-height ä¸º 0line-height ä¸º 0 ï¼Œå…¬å¼ ä¸ŠåŠè¡Œè· + å†…å®¹åŒºåŸŸ + ä¸‹åŠè¡Œè· = line-height ä¾ç„¶æˆç«‹ï¼Œè®¾å†…å®¹åŒºåŸŸé«˜åº¦ä¸º h ï¼Œæ­¤æ—¶ä¸Šä¸‹åŠè·éƒ½ä¸º -h/2 ã€‚ä½†æ˜¯æ–‡æœ¬åœ¨é¡µé¢ä¸­æ˜¯ä¸ä¼šå æ®ä»»ä½•ç©ºé—´çš„ã€‚ å›¾ç‰‡åº•è¾¹è·è¿™é‡Œè¯´ä¸ªé¢˜å¤–è¯ã€‚ã€‚ã€‚ line-height å¯¹ img æ˜¯ä¸èµ·ä½œç”¨çš„ï¼Œä½†æ˜¯å¯¹åŒæ ·æ˜¯å¯æ›¿æ¢å…ƒç´ çš„ input å´èƒ½èµ·åˆ°ä½œç”¨ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼ŸåŽæ¥æˆ‘æƒ³äº†æƒ³ï¼Œæ˜¯æœ‰åŽŸå› çš„ï¼Œå› ä¸º line-height åªèƒ½å¯¹æ–‡æœ¬èµ·ä½œç”¨ï¼Œ input é‡Œé¢æ˜¯æœ‰å¯ä»¥æ–‡æœ¬çš„ï¼Œè€Œ img ä¸­å´ä¸å¯ä»¥ï¼ŒåŒæ · object ä¹Ÿæ˜¯ä¸€æ ·ã€‚ good luck çžªå¤§åŒçœ¼çœ‹ä¸€çœ‹ï¼Œå›¾ç‰‡åº•è¾¹ä¸Ž div åº•è¾¹å¹¶æ²¡æœ‰å®Œå…¨è´´åˆï¼Œè¿˜æœ‰ä¸€ä¸ªå¾ˆå°çš„é—´éš™ï¼Œè¿™ä¸ªå…¶å®žæ˜¯ line-height ä¸Ž vertical-align å…±åŒä½œç”¨å¸¦æ¥çš„å½±å“ã€‚ åŽŸå› æŽ¢æžimg é»˜è®¤æ˜¯ baseline å¯¹é½ï¼Œçœ‹ä¸€ä¸‹å›¾ç¤ºã€‚ çº¢è‰²çš„çº¿æ˜¯åŸºçº¿ï¼Œç»¿è‰²çš„çº¿æ˜¯åº•çº¿ï¼Œåº•çº¿è·ç¦» div åº•è¾¹è¿˜æœ‰å¾ˆå°çš„ä¸€ç‚¹è·ç¦»ï¼Œå°±æ˜¯ä¸‹åŠè¾¹è·ã€‚ æˆ‘ä»¬çš„æ–‡å­—äº§ç”Ÿçš„åŒ¿åå†…è”ç›’è‡ªç„¶ä¹Ÿæ˜¯æœ‰é«˜åº¦çš„ï¼ŒåŸºçº¿ä»¥ä¸‹çš„éƒ¨åˆ†ä¹Ÿå¾—æ˜¾ç¤ºå‡ºæ¥ï¼Œæ‰€ä»¥å›¾ç‰‡ä¸‹æ–¹è¾¹è·ï¼Œæ­£æ˜¯ æ–‡æœ¬åŸºçº¿åˆ°åº•çº¿çš„è·ç¦» + ä¸‹åŠè¾¹è· ã€‚div çš„é«˜åº¦å°±æ˜¯å®ƒæ‰€äº§ç”Ÿçš„åŒ…å«å—çš„é«˜åº¦ï¼Œå°±æ˜¯è¡Œç›’çš„é«˜åº¦æ€»å’Œï¼ˆæ­¤ä¾‹ä¸­åªæœ‰ä¸€è¡Œï¼Œæ‰€ä»¥ç­‰äºŽè¯¥è¡Œç›’é«˜ï¼‰ï¼Œå°±æ˜¯ å›¾ç‰‡é«˜åº¦ + æ–‡æœ¬åŸºçº¿åˆ°åº•çº¿çš„è·ç¦» + ä¸‹åŠè¾¹è· ã€‚ html5 å¸¦æ¥çš„å˜åŒ–åœ¨ html4 ä¸­ï¼Œå¦‚æžœæ²¡æœ‰æ–‡å­—åˆ™è‡ªç„¶æ²¡æœ‰ä¸Šé¢æ‰€è¯´çš„å›¾ç‰‡åº•è¾¹è·é—®é¢˜ï¼Œä½†æ˜¯æƒ…å†µåœ¨ html5 æœ‰äº†å˜åŒ–ã€‚ å³ä½¿æ²¡æœ‰æ–‡æœ¬ï¼Œå›¾ç‰‡ä¹Ÿä¼šå½“åšå®ƒèº«è¾¹æœ‰æ–‡æœ¬å­˜åœ¨ï¼Œæ­¤æ—¶å®ƒä¼šå¸¦æ¥ä¸¤ç§ä¸Ž html4 ä¸ä¸€æ ·çš„è¡¨çŽ°ã€‚ æ°¸è¿œå­˜åœ¨å›¾ç‰‡åº•è¾¹è·é—®é¢˜ å¦‚æžœå›¾ç‰‡é«˜åº¦ä½ŽäºŽæ–‡æœ¬é«˜åº¦ï¼Œ div é«˜åº¦ä¾æ—§ç­‰äºŽæ–‡æœ¬é«˜åº¦ è§£å†³æ–¹æ³• div è®¾ç½® line-height: 0 æˆ–è€… font-size: 0æ–‡æœ¬ä¸å æ®ç©ºé—´ï¼Œè‡ªç„¶ä¸ä¼šå‡¸å‡ºæ¥äº†ã€‚ä½†æ˜¯è¿™ä¸ªæ–¹æ³•æ˜¾ç„¶æ²¡æœ‰é‚£ä¹ˆç¾Žå¦™ï¼Œä¸‡ä¸€æˆ‘æœ‰æ–‡å­—éœ€è¦æ·»åŠ å‘¢ï¼Œæ˜¯å§ img è®¾ç½® vertical-align: bottomè®©å›¾ç‰‡ä¸Žè¡Œç›’åº•éƒ¨å¯¹é½ï¼Œè¿™æ ·å­æ–‡å­—å°±ä¸ä¼šæœ‰ä¸€éƒ¨åˆ†å‡¸å‡ºæ¥äº†ã€‚ img è®¾ç½® display: block æˆ–è€… float: leftå˜æˆäº†å—ç›’è‡ªç„¶å°±æ²¡æœ‰åŸºçº¿å¯¹é½è¿™äº›äº‹äº†ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[é‡æ‹¾CSSè§„èŒƒä¹‹overflow]]></title>
      <url>%2F2016%2F09%2F15%2Frelearn_overflow%2F</url>
      <content type="text"><![CDATA[overflow çš„çŸ¥è¯†ç‚¹æ²¡æœ‰é‚£ä¹ˆå¤šï¼Œæ‰€ä»¥è¿™ç¯‡æ–‡ç« é‡Œé¢æ¦‚å¿µæ€§çš„ä¸œè¥¿åªæ”¾äº†ä¸€ä¸ªï¼Œå¹²è´§å®žä¾‹åè€Œå¾ˆå¤šï¼Œè€Œä¸”éƒ½æ˜¯å¾ˆå¤šæˆ‘ä»¬å¹³æ—¶éƒ½å¿…é¡»è¦ç”¨çš„ï¼Œä¹Ÿæœ‰ä¸€äº›å¯èƒ½å®¹æ˜“è¢«å¿½ç•¥çš„çŸ¥è¯†ç‚¹æœ¬æ–‡éƒ½æœ‰æåŠã€‚æ‰€ä»¥ï¼Œä¸è¦æ²¡æœ‰è€å¿ƒï¼Œè¿™é‡Œéƒ½æ˜¯ä½ çš„èœï¼ å½“ç„¶æ–‡ç« ä¹Ÿä»Žæ¥ä¸æ˜¯ç§‘æ™®æ–‡ï¼Œäº†è§£ overflow åŸºæœ¬æ¦‚å¿µå°±ç‚¹å‡» CSS overflow ã€‚ å¸¸è¯†æ‹“å±•æµè§ˆå™¨æ»šåŠ¨æ¡çš„æ¥åŽ†æˆ‘ä»¬éƒ½çœ‹è¿‡æµè§ˆå™¨çš„æ»šåŠ¨æ¡ï¼Œé‚£æµè§ˆå™¨çš„æ»šåŠ¨æ¡æ˜¯ä»Žå“ªå„¿æ¥çš„ï¼Ÿç­”æ¡ˆæ˜¯ html è€Œéžæ˜¯ body ï¼Œè¿™é‡Œå°±ä¸å†åŽ»ç»™ä¾‹å­è®ºè¯äº†ã€‚ é‚£IE7å’Œä¹‹å‰çš„æµè§ˆå™¨å³è¾¹ä¼šä¸€ç›´å­˜åœ¨ä¸€æ¡æ»šåŠ¨æ¡ï¼Œå³ä½¿æ²¡æœ‰æ»šåŠ¨ã€‚IE8å¼€å§‹ï¼Œè¿˜æœ‰å…¶ä»–çš„æµè§ˆå™¨å´ä¸æ˜¯ï¼Œé‚£é€ æˆè¿™ä¸€åˆ‡çš„æºå¤´æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹æµè§ˆå™¨é»˜è®¤æ ·å¼ã€‚ IE7æµè§ˆå™¨é»˜è®¤ï¼š html { overflow-y: scroll; } IE8+æµè§ˆå™¨é»˜è®¤ï¼š html { overflow: auto; } overflow-x/overflow-yåªè®¾ç½®ä¸€ä¸ªå¦‚æžœ overflow-x å’Œ overflow-y å€¼ä¸åŒï¼Œä¸”å…¶ä¸­ä¸€ä¸ªå€¼æ˜¾å¼è®¾ç½®ä¸º visible æˆ–æœªè®¾ç½®è€Œé»˜è®¤ä¸º visible ï¼Œè€Œå¦å¤–ä¸€ä¸ªå€¼æ˜¯éž visible çš„å€¼ï¼Œåˆ™ visible å€¼ä¼šè¢«é‡ç½®ä¸º auto ã€‚ æŒ‰å¸¸ç†æ¥è¯´ï¼Œæˆ‘åªç»™ overflow-x è®¾ç½®äº† auto ï¼Œé‚£åº”è¯¥åªç”Ÿæˆæ¨ªå‘æ»šåŠ¨æ¡ã€‚ä½†æ°æ°æ˜¯å› ä¸ºä¸Šé¢æŒ‡å‡ºçš„ç‰¹æ€§ï¼Œ .wrap å…ƒç´ çš„ overflow-y ä¹Ÿç”± visible å˜ä¸ºäº† auto ã€‚ padding-bottomçš„ç¼ºå¤±çŽ°è±¡Chrome æ”¯æŒï¼Œå…¶ä»–æµè§ˆå™¨ä¸æ”¯æŒ padding-bottom ã€‚ åœ¨ä¸åŒæµè§ˆå™¨æ‰“å¼€æˆ‘çš„åšå®¢æŸ¥çœ‹å³å¯ã€‚ æ‰€ä»¥ä»¥åŽæƒ³æ·»åŠ è¿™ç§æ•ˆæžœæˆ–è€…è®¡ç®—æ»šåŠ¨é«˜åº¦çš„æ—¶å€™è¦æ³¨æ„å„ä¸ªæµè§ˆå™¨çš„å…¼å®¹æ€§ã€‚ JSè®¡ç®—é¡µé¢æ»šåŠ¨é«˜åº¦ Chrome æµè§ˆå™¨ï¼š document.body.scrollTop å…¶ä»–æµè§ˆå™¨ï¼š document.documentElement.scrollTop æ‰€ä»¥å¦‚æžœæƒ³è¦èŽ·å–é¡µé¢æ»šåŠ¨é«˜åº¦ï¼ŒæŽ¨èè¿™æ ·å†™ï¼š var st = document.body.scrollTop || document.documentElement.scrollTop æ°´å¹³å±…ä¸­è·³åŠ¨é—®é¢˜æˆ‘ä»¬æ˜¯ä¸æ˜¯é‡åˆ°è¿‡è¿™ä¹ˆä¸€ç§é—®é¢˜ï¼Œæœ¬æ¥é¡µé¢é«˜åº¦ä¸è¶…è¿‡å±é«˜ï¼Œé¡µé¢æ˜¯æ²¡æœ‰æ»šåŠ¨çš„ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªå±•å¼€çš„åŠŸèƒ½ï¼ŒæŠŠé¡µé¢æ’‘å¼€äº†ï¼Œæ»šåŠ¨æ¡å°±å‡ºæ¥äº†ã€‚å‡è®¾é¡µé¢æœ€å¤–é¢çš„åŒ…è£¹å…ƒç´ æ˜¯ .container å…ƒç´ ï¼Œå®ƒå®šå®½ä¸”æ°´å¹³å±…ä¸­ã€‚åœ¨æ»šåŠ¨æ¡å‡ºçŽ°çš„è¿™ä¸€åˆ¹é‚£ï¼Œå®ƒä¸€å®šä¼šè¢«æŒ¤ï¼Œå‘å·¦åç§»ã€‚å› ä¸ºæ˜¯ä¸€ä¸‹å­åç§»è¿‡åŽ»çš„ï¼Œä¼šæœ‰é¡µé¢è·³åŠ¨çš„æ„Ÿè§‰ã€‚ è§£å†³æ–¹æ³•æœ‰ä¸¤ä¸ªï¼š html { overflow-y: scroll; } è¿™æ ·å­åˆå›žåˆ°äº†IE7å¹´ä»£äº†ï¼Œå¾ˆä¸æŽ¨è .container { padding-left: calc(100vw - 100%); } è¿™æ ·å­å°±ä¸ä¼šå‡ºçŽ°åç§»è·³åŠ¨äº†ï¼Œä½†æ˜¯æ­¤æ—¶å°±ç®—ä¸ä¸Šå±…ä¸­äº†ã€‚ è‡ªå®šä¹‰æ»šåŠ¨æ¡æ ·å¼è¿™é‡Œç»™å‡ºçš„æ˜¯ webkit å†…æ ¸çš„æµè§ˆå™¨å®šä¹‰æ–¹å¼ï¼ŒIEçš„å¤ªä¸‘å°±ä¸ä»‹ç»äº†ã€‚ 123456::-webkit-scrollbar /*æ•´ä½“éƒ¨åˆ†*/::-webkit-scrollbar-button /*ä¸¤ç«¯æŒ‰é’®*/::-webkit-scrollbar-track /*å¤–å±‚è½¨é“*/::-webkit-scrollbar-track-piece /*å†…å±‚è½¨é“*/::-webkit-scrollbar-thumb /*æ»šåŠ¨æ»‘å—*/::-webkit-scrollbar-corner /*è¾¹è§’*/ å®žé™…å¼€å‘å¸¸ç”¨çš„å°±ä¸‹é¢å‡ ä¸ªï¼š 123456789101112::-webkit-scrollbar &#123; /*æ»šåŠ¨æ¡å®½é«˜*/ width: 8px; height: 8px;&#125;::-webkit-scrollbar-thumb &#123; /*æ»šåŠ¨æ»‘å—*/ background-color: rgba(0,0,0,.3); border-radius: 6px;&#125;::-webkit-scrollbar-track &#123; /*è½¨é“èƒŒæ™¯*/ background-color: #ddd; border-radius: 6px;&#125; absolute æº¢å‡º æˆ‘å‹’ä¸ªæ“¦ï¼Œä¸æ˜¯å·²ç»è®¾ç½®äº† overflow: hidden äº†å—ï¼Œæ€Žä¹ˆè¿˜èƒ½å‡ºåŽ»ï¼Ÿç»å¯¹å®šä½è¦ä¸Šå¤©äº†ã€‚ã€‚ã€‚ å…ˆæ‰¾ä¸€ä¸‹ç›¸å…³çš„å®˜æ–¹è§£é‡Šï¼š ç»å¯¹å®šä½å…ƒç´ ä¸æ€»æ˜¯è¢«çˆ¶çº§ overflow å±žæ€§è£å‰ªï¼Œå°¤å…¶å½“ overflow åœ¨ç»å¯¹å®šä½å…ƒç´ åŠå…¶åŒ…å«å—ä¹‹é—´çš„æ—¶å€™ã€‚ ã€åŒ…å«å—ã€‘ï¼šæ­¤å¤„çš„åŒ…å«å—æŒ‡ position ä¸ä¸º static çš„å…ƒç´  å“¦ï¼ŒåŽŸæ¥æ˜¯è¿™æ ·ï¼Œ overflow ç¡®å®žåœ¨ç»å¯¹å®šä½å…ƒç´ åŠå…¶åŒ…å«å—ï¼ˆæ ¹å…ƒç´ ï¼‰ä¹‹é—´ï¼Œæ‰€ä»¥åŽ‹æ ¹ç®¡ä¸ä½ä»–ã€‚ æœ‰é—®é¢˜å°±å¾—è§£å†³é—®é¢˜å•Šï¼ä¸‹é¢æä¾›ä¸¤ç§æ–¹æ³•æ¥è§£å†³è¿™ç§é—®é¢˜ã€‚ è§£å†³æ–¹æ³• overflow å…ƒç´ è‡ªèº«ä¸ºåŒ…å«å— overflow å…ƒç´ å’Œç»å¯¹å®šä½å…ƒç´  ä¸­é—´çš„å…ƒç´ ä¸ºåŒ…å«å— è®¾ç½®éž static çš„ position å³å¯ã€‚ å®žé™…æ¡ˆä¾‹ä¸‹é¢æ˜¯å‰ä¸¤å¤©leaderè¦æˆ‘ä»¬è§£å†³çš„ä¸€ä¸ªæ¡ˆä¾‹çš„ç®€åŒ–ç‰ˆã€‚çœŸå®žæ¡ˆä¾‹ä¸­ï¼Œæ»šåŠ¨çª—ä¸­æ˜¯ä¸€ä¸ªè¡¨æ ¼ï¼Œæ¯ä¸€è¡Œä¸­éƒ½æœ‰ä¸€ä¸ªå¾…æç¤ºå­—æ®µï¼Œä½†æ˜¯leaderå¸Œæœ›èƒ½å¤Ÿè®©å‡ºçŽ°çš„æç¤ºæ–‡æœ¬æ‚¬æµ®åœ¨æ»šåŠ¨çª—ä¹‹ä¸Šã€‚ åæ­£æˆ‘åˆ°çŽ°åœ¨æ²¡æ‰¾åˆ°å®žçŽ°çš„å¯èƒ½æ€§ï¼Œå› ä¸ºå¦‚æžœåŽ»é™¤ relative ï¼Œ ç»å¯¹å®šä½å…ƒç´ å°†ä¼šè·‘åˆ°æ»šåŠ¨çª—å¤–è¾¹åŽ»ï¼Œä¸åŽ»é™¤ relative ï¼Œå°±ä¸€å®šä¼šè¢«é™åˆ¶åœ¨é‡Œé¢ã€‚æ˜‚ï¼Œå°±æ˜¯æ— è§£å–½ï¼ é…åˆ overflow æ‰èƒ½å®žçŽ°çš„æ•ˆæžœresize æ‹‰ä¼¸ å¿…é¡»é…åˆéž visible çš„ resize æ‰èƒ½å®žçŽ°ã€‚ æ–‡å­—æº¢å‡ºä»¥ â€˜â€¦â€™ æ˜¾ç¤º ä¹‹å‰è®²è§£ BFC çš„æ—¶å€™ï¼Œè¯¦ç»†åˆ†æžäº†å®ƒçš„å„é¡¹ç‰¹æ€§ï¼Œ overflow æ°æ°èƒ½å¤Ÿè§¦å‘å®ƒï¼Œæ‰€ä»¥å¦‚æžœè®°ä¸å¤ªæ¸…å°±èµ¶ç´§å›žåŽ»ç¿»ç¿»çœ‹æ˜‚ã€‚ ä»Šå¤©è¿˜æ‰¾åˆ°äº†ä¸€ç§æ¯”è¾ƒå¥½çš„å†™åšå®¢çš„æ–¹æ³•ï¼Œä¸€è¾¹å­¦ä¹ çš„æ—¶å€™ä¸€è¾¹åœ¨æ–°å»ºæ–‡ä»¶ä¸­å†™ä¸‹æ¥ï¼Œå†™åšå®¢çš„æ—¶å€™ä¸€æ˜¯æ–¹ä¾¿æ•´ç†æ€è·¯ï¼Œè€Œæ˜¯çœåŽ»äº†ä¸€äº›é‡å¤åŠ³åŠ¨åŠ›ï¼Œé€Ÿåº¦ä¸ŠåŽ»äº†å¥½å¤šã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[é‡æ‹¾CSSè§„èŒƒä¹‹z-index]]></title>
      <url>%2F2016%2F09%2F13%2Frelearn_z-index%2F</url>
      <content type="text"><![CDATA[Whatâ€™s z-indexz-index ä¼šä¸ºå½“å‰çš„ç›’åˆ›å»ºå±‚å ä¸Šä¸‹æ–‡ï¼Œä¹Ÿä¼šæŒ‡å®šè¯¥ç›’åœ¨çˆ¶çº§å±‚å ä¸Šä¸‹æ–‡ä¸­çš„å±‚å ç­‰çº§ã€‚ What the fuckï¼ æ€Žä¹ˆè¶Šè¯´è¶Šä¹±ï¼ä»€ä¹ˆæ˜¯å±‚å ä¸Šä¸‹æ–‡ï¼Ÿä»€ä¹ˆæ˜¯å±‚å ç­‰çº§ï¼Ÿ ä¸€ä¸ªé¡µé¢æˆ‘ä»¬å¹³æ—¶çœ‹åˆ°çš„æ˜¯å¹³é¢çš„ï¼Œæˆ‘ä»¬æ„Ÿè§‰å®ƒå°±æ˜¯ä¸€ä¸ªæ°´å¹³é¢ï¼ˆäºŒç»´ï¼‰çš„ä¸œè¥¿ã€‚ä½†æ˜¯ä¸ºä»€ä¹ˆå…ƒç´ äº’ç›¸ä¹‹é—´è¦†ç›–ï¼Œè¿™å°±è¯´æ˜Žï¼Œå®ƒä»¬åœ¨åž‚ç›´æ–¹å‘ä¸Šæ˜¯æœ‰é¡ºåºçš„ã€‚ä¸€ä¸ªç›’åˆ›å»ºäº†å±‚å ä¸Šä¸‹æ–‡ï¼Œå°±æ˜¯ç»™å®ƒè‡ªå·±åˆ’äº†ä¸€ç‰‡è‡ªæ²»åŒºï¼Œä¸‹é¢çš„ç›’æ— è®ºæ˜¯æŽ’èµ„è®ºè¾ˆï¼ŒæŠ‘æˆ–æ˜¯åˆ›å»ºäº†å±‚å ä¸Šä¸‹æ–‡ï¼Œéƒ½åªèƒ½åœ¨è¿™ç‰‡åŒºé‡Œé¢å¾…ç€ã€‚ å®šä½ï¼ˆposition ä¸ä¸º staticï¼‰çš„ç›’å’Œflexç›’çš„å­å…ƒç´ éƒ½ä¼šæœ‰ä¸€ä¸ªå±‚å ç­‰çº§ï¼Œè¿™ä¸ªå±‚å ç­‰çº§å°±æ˜¯ z-index å€¼ï¼Œé»˜è®¤å€¼ auto æˆ‘ä»¬å¯ä»¥ç†è§£ä¸º 0 ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆå…¶ä»–çš„æ²¡æœ‰å±‚å ç­‰çº§ï¼Œå› ä¸º z-index å¯¹å®ƒä»¬æ— ä½œç”¨ã€‚å±‚å ç­‰çº§å°±æ˜¯ç”¨æ¥æŽ’èµ„è®ºè¾ˆçš„ï¼Œç­‰çº§é«˜çš„åœ¨ä¸Šé¢ï¼Œç­‰çº§ä½Žçš„åœ¨ä¸‹é¢ã€‚ä½†æ˜¯ï¼ŒåŒä¸€çˆ¶çº§å±‚å ä¸Šä¸‹æ–‡çš„å±‚å ç­‰çº§æ‰æœ‰æ„ä¹‰ã€‚ å±‚å ç­‰çº§åªéœ€è¦ç†è§£å°±å¥½ï¼ŒçœŸæ­£çš„é‡ç‚¹æ˜¯å±‚å é¡ºåºã€‚ å±‚å é¡ºåº é¡µé¢ä¸­æ‰€æœ‰å…ƒç´ éƒ½è„±ç¦»ä¸å¼€è¿™å¼ ä¸ƒé˜¶å›¾ï¼Œæœ‰äº†å®ƒæˆ‘ä»¬å¯ä»¥çŸ¥é“æ‰€æœ‰å…ƒç´ åœ¨zè½´ä¸Šçš„å…ˆåŽé¡ºåºã€‚å›¾ä¸­è¶Šæ˜¯é å‰çš„å…ƒç´ ï¼Œå®ƒç¦»æˆ‘ä»¬çš„çœ¼ç›è¶Šè¿‘ï¼Œè¦†ç›–å…¶ä»–å…ƒç´ çš„èƒ½åŠ›å°±è¶Šå¼ºã€‚ä¸ƒé˜¶å±‚å å›¾ç¤ºä¸­çš„å±‚å é¡ºåºæŒ‡çš„æ˜¯åŒä¸€å±‚å ä¸Šä¸‹æ–‡ä¸­çš„å…ƒç´ çš„å±‚å é¡ºåºã€‚ å½“ç„¶ï¼Œè¿™é‡Œè¿˜æœ‰ä¸¤ç‚¹éœ€è¦è¡¥å……ä¸€ä¸‹ï¼š z-indexè¶Šå¤§ï¼Œè¶Šé å‰ï¼Œè¿™å°±æ˜¯ç”¨å±‚å ç­‰çº§æ¥æŽ’èµ„è®ºè¾ˆçš„ã€‚ å±‚å é¡ºåºã€å±‚å ç­‰çº§ï¼ˆå¦‚æžœæœ‰çš„è¯ï¼‰ç›¸åŒçš„ä¸¤ä¸ªå…ƒç´ ï¼ŒåŽé¢çš„ä¼šè¦†ç›–å‰é¢çš„ã€‚ ä¸Šé¢ä»¥åŠåŽé¢è¦è®²çš„ â€œé å‰â€ å°±æ˜¯zè½´ä¸Šè¶Šé«˜ï¼Œå±‚å é¡ºåºä¹Ÿè¶Šé«˜ã€‚ æžæ˜“æ··æ·†æ˜“é”™ç‚¹å­å±‚å ä¸Šä¸‹æ–‡æ— æ³•æ¯”çˆ¶å±‚å ä¸Šä¸‹æ–‡ä½Žæˆ‘ä»¬æœ‰æ—¶å€™ä¼šå¸Œæœ›è®©å­å…ƒç´ å±…äºŽçˆ¶å…ƒç´ ä¸‹æ–¹ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šç«‹å³æƒ³åˆ°ç»™å­å…ƒç´ è®¾ç½®ä¸€ä¸ªæ¯”çˆ¶å…ƒç´ æ›´ä½Žçš„z-indexï¼Œç»“æžœè‚¯å®šå¾—ä¸åˆ°æˆ‘ä»¬å¸Œæœ›çš„æ•ˆæžœã€‚ å›žé¡¾ä¸€ä¸‹å±‚å ä¸ƒé˜¶å›¾ï¼Œä¼šå‘çŽ°ï¼Œçˆ¶å±‚å ä¸Šä¸‹æ–‡çš„ background å¤„äºŽç¬¬ä¸€é˜¶ï¼Œè€Œå­å±‚å ä¸Šä¸‹æ–‡ z-index ä¸ºè´Ÿï¼Œå¤„åœ¨ç¬¬äºŒé˜¶ï¼Œå­å±‚å ä¸Šä¸‹æ–‡çš„å±‚å é¡ºåºåœ¨çˆ¶å±‚å ä¸Šä¸‹æ–‡ä¹‹ä¸Šï¼ï¼ï¼å®ƒä»¬æ˜¯çˆ¶å­å±‚å å…³ç³»ï¼Œä¸æ˜¯å…„å¼Ÿå±‚å ä¸Šä¸‹æ–‡ï¼Œæ‰€ä»¥ä¸èƒ½é€šè¿‡ z-index æ¥æ¯”è¾ƒå®ƒä»¬çš„å±‚å ç­‰çº§ã€‚ é‚£å¦‚ä½•æ‰èƒ½è®©å­å…ƒç´ åœ¨çˆ¶å…ƒç´ ä¹‹ä¸‹å‘¢ï¼Ÿè®©çˆ¶å…ƒç´ ä¸äº§ç”Ÿå±‚å ä¸Šä¸‹æ–‡ï¼Œå¹¶ä¸”è®©å­å…ƒç´  z-index ä¸ºè´Ÿå°±å¯ä»¥äº†ã€‚ å±‚å ä¸Šä¸‹æ–‡ä¸å…³å¿ƒçˆ¶å­å…ƒç´ å…³ç³»ï¼Œå®ƒåªå…³å¿ƒçˆ¶å­å±‚å ä¸Šä¸‹æ–‡ã€‚ ä¸åŒä¸Šä¸‹æ–‡ä¸­çš„å…ƒç´ çš„æ¯”è¾ƒä¸å–å†³äºŽè‡ªèº«ä¸Šé¢é‚£å¥è¯å¯èƒ½çœ‹ç€æ‹—å£ä¸å¥½ç†è§£ï¼Œé‚£æˆ‘ä»¬çœ‹ä¸€ä¸‹ä¸‹é¢çš„ä¾‹å­è¾…åŠ©ç†è§£ä¸€ä¸‹ã€‚ æˆ‘ä»¬å¯ä»¥çœ‹åˆ° .inner1 å…ƒç´ çš„ z-index è®¾ç½®åˆ°äº† 9999 ï¼Œ .inner2 å…ƒç´ çš„ z-index è®¾ç½®åˆ°äº† 0 ï¼Œä½†æ˜¯åŽè€…å°±æ˜¯è¦†ç›–äº†å‰è€…ï¼Œä¸ºä»€ä¹ˆå‘¢ï¼Ÿä¸ºä»€ä¹ˆå‘¢ï¼Ÿ æˆ‘ä»¬å‰é¢è¯´äº†ï¼Œå…ƒç´ å±‚å é¡ºåºåªèƒ½å¤Ÿåœ¨è‡ªèº«æ‰€å¤„çš„å±‚å ä¸Šä¸‹æ–‡ä¸­æ¯”è¾ƒï¼Œé‚£å’Œå…¶ä»–ä¸Šä¸‹æ–‡ä¸­çš„å…ƒç´ æ€Žä¹ˆæ¯”è¾ƒå‘¢ï¼Ÿæ‹¼çˆ¹!!! è¿™ç¡®å®žæ˜¯ä¸€ä¸ªå¾ˆæœ‰æ„æ€çš„è¯ï¼Œæˆ‘æ¥è§£é‡Šä¸€ä¸‹ï¼Œå°±æ˜¯è¯´ï¼Œå¤„äºŽåŒä¸€å±‚å ä¸Šä¸‹æ–‡çš„ A,B ä¸¤ä¸ªå…ƒç´ ï¼Œå®ƒä»¬éƒ½åˆ›å»ºäº†å„è‡ªçš„å±‚å ä¸Šä¸‹æ–‡ï¼Œå¦‚æžœ A å±‚å ç­‰çº§é«˜äºŽ B ï¼Œé‚£ä¹ˆ A ä¸‹é¢çš„æ‰€æœ‰å…ƒç´ åœ¨zè½´ä¸Šé«˜äºŽ B ä¸‹é¢çš„æ‰€æœ‰å…ƒç´ ã€‚ z-index:auto;ä¸Žz-index:0;çš„å¼‚åŒæˆ‘ä»¬ä¸‹é¢ä¼šä»‹ç»å“ªäº›å…ƒç´ ä¼šåˆ›å»ºå±‚å ä¸Šä¸‹æ–‡ï¼Œä½†æ˜¯ä¸ä»£è¡¨èƒ½å¤Ÿåˆ›å»ºå±‚å ä¸Šä¸‹æ–‡çš„å…ƒç´ å°±å¯ä»¥æ˜¾å¼åœ°è®¾ç½® z-index ã€‚è¿™äº›å…ƒç´ ä¸­ä¸èƒ½è®¾ç½® z-index çš„ï¼Œä»–ä»¬æœ€åŽçš„è¡¨çŽ°å…¶å®žå°±æ˜¯ z-index:auto; ã€‚ é‚£ z-index:auto; å’Œ z-index:0; çš„ç›¸åŒä¹‹å¤„åœ¨äºŽï¼Œè®¡ç®—å±‚å ç­‰çº§çš„æ—¶å€™æŒ‡å®šä¸º auto çš„ index å®žé™…è®¡ç®—å€¼å°±æ˜¯ 0 ã€‚ä¸åŒä¹‹å¤„åœ¨äºŽï¼Œ z-index:auto; ä¸èƒ½åˆ›å»ºå±‚å ä¸Šä¸‹æ–‡ï¼Œä½†æ˜¯ z-index:0; å´å¯ä»¥ã€‚ position:relative; å…ƒç´ é»˜è®¤ z-index:auto; ï¼Œæ ¹æ®æˆ‘ä»¬ä¹‹å‰è®ºè¯å‡ºæ¥çš„ï¼Œå­å±‚å ä¸Šä¸‹æ–‡æ— æ³•æ¯”çˆ¶å±‚å ä¸Šä¸‹æ–‡ä½Žã€‚ä¸Šé¢çš„ä¾‹å­è¡¨æ˜Žï¼Œ z-index:auto; å¹¶ä¸èƒ½åˆ›å»ºå±‚å ä¸Šä¸‹æ–‡ã€‚ä½†æ˜¯æœ‰ä¸ªä¾‹å¤–ï¼Œ position:fixed; å…ƒç´ å¯ä»¥åˆ›å»ºã€‚ å“ªäº›å…ƒç´ å¯ä»¥åˆ›å»ºå±‚å ä¸Šä¸‹æ–‡æˆ‘ä»¬åœ¨è¿™é‡Œå‘¢ï¼ŒæŠŠå®ƒä»¬åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯ CSS2.1 ä¸­å®šä¹‰çš„å¯ä»¥åˆ›å»ºçš„ï¼Œç¬¬äºŒéƒ¨åˆ†æ˜¯ CSS3 ä¸­æ–°å¢žçš„ã€‚ CSS2.1 ä¸­è§„å®šçš„ æ ¹å…ƒç´  HTML z-index ä¸ä¸º auto çš„å®šä½å…ƒç´ â€”â€”å®žé™…æƒ…å†µæœ‰å‡ºå…¥ï¼Œz-index:auto;ä¸Žz-index:0;çš„å¼‚åŒ ä¸€èŠ‚å·²ç»è®²äº† CSS3ä¸­æ–°å¢žçš„ z-index å€¼ä¸ä¸º auto çš„ flex é¡¹(çˆ¶å…ƒç´  display:flex|inline-flex) å…ƒç´ çš„ opacity å€¼ä¸æ˜¯ 1 å…ƒç´ çš„ transform å€¼ä¸æ˜¯ none å…ƒç´  mix-blend-mode å€¼ä¸æ˜¯ normal å…ƒç´ çš„ filter å€¼ä¸æ˜¯ none å…ƒç´ çš„ isolation å€¼æ˜¯ isolate will-change æŒ‡å®šçš„å±žæ€§å€¼ä¸ºä¸Šé¢ä»»æ„ä¸€ä¸ª å…ƒç´ çš„ -webkit-overflow-scrolling è®¾ä¸º touch è¿™é‡Œé™¤äº† flex é¡¹ï¼Œå…¶ä»–çš„éƒ½ä¸èƒ½è®¾ç½® z-index ï¼Œå®žé™…è¡¨çŽ°å°±æ˜¯ z-index:0;ã€‚ z-index å¹³æ—¶çœŸæ˜¯è¢«æˆ‘ä»¬æ»¥ç”¨äº†ï¼Œæœ‰æ—¶å€™ä¸ºäº†åšä¸€ä¸ªå¼¹å‡ºå±‚æ•ˆæžœï¼Œå°±éšä¾¿è®¾ç½®ä¸€ä¸ª z-index:9999; ï¼Œè¿™æ˜¯ä¸€ä¸ªåä¹ æƒ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å°½å¯èƒ½çš„åˆ©ç”¨å±‚å é¡ºåºè§„åˆ™æ¥æ›´è§„èŒƒåœ°å®žçŽ°æ•ˆæžœã€‚ å°å°çš„ä¸€ä¸ªå±žæ€§ç‰µæ‰¯äº†è¿™ä¹ˆå¤šå†…å®¹ï¼Œæ·±å…¥ç†è§£CSSï¼Œä¸‹èŠ‚æ›´ç²¾å½©ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[é‡æ‹¾CSSè§„èŒƒä¹‹BFC & IFC]]></title>
      <url>%2F2016%2F09%2F06%2Frelearn_bfc_ifc%2F</url>
      <content type="text"><![CDATA[BFCã€IFCçš„æ¦‚å¿µé‡è¦å—ï¼Ÿä¸é‡è¦ï¼Œæ²¡æœ‰å®ƒä»¬æˆ‘ä»¬ä¹Ÿèƒ½å†™å‡ºç¬¦åˆè¦æ±‚ç”šè‡³å¾ˆå¥½çš„é¡µé¢ã€‚é‡è¦ï¼Œæ·±å…¥äº†äº†è§£äº†CSSè¿™é—¨è¯­è¨€çš„æ ¸å¿ƒï¼Œä½ çš„CSSæ‰å¯èƒ½ä¼šæœ‰åˆ›é€ æ€§ï¼Œä½ æ‰èƒ½å‘æ˜Žå‡ºä½ è‡ªå·±çš„å¥‡æ·«æŠ€å·§ï¼Œè€Œä¸æ˜¯é‡åˆ°æ–°çš„æƒ…å¢ƒå°±åŽ»ç™¾åº¦ï¼Œgoogleã€‚ åœ¨çœ‹è¿™ç¯‡æ–‡ç« ä¹‹å‰ï¼Œå…ˆå¾—äº†è§£ä¸€äº›æ— èŠçš„åŸºæœ¬æ¦‚å¿µï¼Œé‡æ‹¾CSSè§„èŒƒä¹‹ä»Žç›’ç±»åž‹è°ˆèµ·ï¼Œå½“ç„¶ï¼Œæˆ‘å·²ç»å°½å¯èƒ½è®©å®ƒæœ‰è¶£äº†ã€‚ FCFCï¼ˆFormating Contextï¼Œæ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼‰ æ˜¯ä¸€ä¸ªå¸ƒå±€çš„çŽ¯å¢ƒï¼Œå®ƒé‡Œé¢çš„ç›’å­éœ€è¦éµå¾ªFCè¿™å¥—ä½“ç³»çš„è§„åˆ™ï¼Œ CSS2.1 ä¸­å®šä¹‰äº† BFCï¼ˆBlock Formating Contextï¼Œå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼‰ å’Œ IFCï¼ˆInline Formating Contextï¼Œå†…è”æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼‰ï¼Œ BFC è®²çš„æ˜¯å—çº§ç›’å­çš„å¸ƒå±€è§„åˆ™ï¼Œ IFC è®²çš„æ˜¯å†…è”çº§ç›’å­çš„å¸ƒå±€è§„åˆ™ã€‚ BFCè„±ç¦»ç‰¹æ€§è®²å®šä¹‰éƒ½æ˜¯æµæ°“ï¼ï¼ï¼å…‰çœ‹ä¸ªå®šä¹‰ä¸å¥½ä½¿ï¼Œèµ¶ç´§æ¥æ‹ä¸€æ‹ BFC çš„å®¶è§„å§ã€‚ 1. æµ®åŠ¨ï¼Œç»å¯¹å®šä½å…ƒç´ ï¼Œéžå—ç›’çš„å—å®¹å™¨ï¼ˆä¾‹å¦‚ï¼Œinline-blocksï¼Œtable-cellså’Œtable-captionsï¼‰å’Œâ€™overflowâ€™ä¸ä¸ºâ€™visibleâ€™çš„å—ç›’ä¼šä¸ºå®ƒä»¬çš„å†…å®¹å»ºç«‹ä¸€ä¸ªæ–°çš„å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ã€‚ è¿™é‡Œåªè¯´æ˜Žäº†ä¸€ç‚¹ï¼š å¦‚ä½•è§¦å‘BFCï¼ï¼ˆå¾ˆé‡è¦å•Šï¼Œå¤šç»ƒå¤šè®°å¿†ï¼Œä¸€å®šè¦ç†Ÿç¨”äºŽå¿ƒï¼‰ 2. åœ¨ä¸€ä¸ªå—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ä¸­ï¼Œä»ŽåŒ…å«å—çš„é¡¶éƒ¨å¼€å§‹ï¼Œç›’åœ¨ç«–ç›´æ–¹å‘ä¸€ä¸ªæŽ¥ä¸€ä¸ªåœ°æ”¾ç½®ã€‚ä¸¤ä¸ªå…„å¼Ÿç›’ä¹‹é—´çš„ç«–ç›´è·ç¦»ç”±â€™marginâ€™å±žæ€§å†³å®šã€‚åŒä¸€ä¸ªå—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ä¸­çš„ç›¸é‚»å—çº§ç›’ä¹‹é—´çš„ç«–ç›´marginä¼šåˆå¹¶ã€‚ å…³äºŽ margin åˆå¹¶çš„é—®é¢˜ï¼Œæˆ‘åœ¨è¿™ç¯‡æ–‡ç« é‡Œé¢å·²ç»æè¿°çš„å¾ˆè¯¦ç»†äº†ï¼šé‡æ‹¾CSSè§„èŒƒä¹‹margin é€è¿‡ä¸‹é¢çš„DEMOæ¥çœ‹çœ‹å¦‚ä½•é˜»æ­¢ margin åˆå¹¶ï¼š margin ä¸€æ–‡ä¸­ marginåˆå¹¶è§„åˆ™ ä¸­å†™åˆ°äº†è¿™ä¹ˆä¸€å¥è¯ï¼Œæ–°å»ºäº†å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡çš„å…ƒç´ ä¸ä¼šä¸Žå®ƒçš„å­å…ƒç´ çš„ margin åˆå¹¶ï¼Œæ‰€ä»¥ .wrap å…ƒç´ å°±ä¸ä¼šåˆå¹¶ .first å…ƒç´ çš„ bottom margin äº†ï¼Œä¹Ÿå°±æ— æ³•ä¸Ž .second å…ƒç´ å‘ç”Ÿ margin åˆå¹¶äº†ã€‚ è€Œä¸”æˆ‘ä»¬å¯ä»¥å‘çŽ°ï¼Œ BFC å°±æ˜¯ä¸€ä¸ªå¯†é—­çš„å®¹å™¨ ï¼Œ BFC é‡Œé¢çš„å…ƒç´ æ— æ³•å¯¹å¤–ç•Œå…ƒç´ åœ¨å¸ƒå±€ä¸Šäº§ç”Ÿç›´æŽ¥çš„å½±å“ã€‚ï¼ˆä¸ºä»€ä¹ˆæˆ‘è¦ç”¨â€˜ç›´æŽ¥â€™å‘¢ï¼Œå› ä¸ºå®ƒå®Œå…¨å¯ä»¥æ’‘å¼€ BFC å…ƒç´ ï¼Œæ¥â€˜æŒªåŠ¨â€™å¤–ç•Œå…ƒç´ çš„ä½ç½®ï¼‰ é‚£æˆ‘ä»¬å†è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼Œ äº§ç”Ÿäº†æ–°çš„ BFC çš„ç›’ä¼šä¸Žå®ƒçš„å…„å¼Ÿç›’äº§ç”Ÿ marginåˆå¹¶ å—ï¼Ÿ å½“ç„¶æ˜¯ä¼šçš„ã€‚ 3. åœ¨ä¸€ä¸ªå—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ä¸­ï¼Œæ¯ä¸ªç›’çš„leftå¤–è¾¹æŒ¨ç€åŒ…å«å—çš„leftè¾¹ï¼ˆå¯¹äºŽä»Žå³å‘å·¦çš„æ ¼å¼åŒ–ï¼Œrightè¾¹æŒ¨ç€ï¼‰ã€‚å³ä½¿å­˜åœ¨æµ®åŠ¨ï¼ˆå°½ç®¡ä¸€ä¸ªç›’çš„è¡Œç›’å¯èƒ½ä¼šå› ä¸ºæµ®åŠ¨æ”¶ç¼©ï¼‰ï¼Œè¿™ä¹Ÿæˆç«‹ã€‚é™¤éžè¯¥ç›’å»ºç«‹äº†ä¸€ä¸ªæ–°çš„å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼ˆè¿™ç§æƒ…å†µä¸‹ï¼Œè¯¥ç›’è‡ªèº«å¯èƒ½ä¼šå› ä¸ºæµ®åŠ¨å˜çª„ï¼‰ è¿™é‡Œä¸»è¦æ¶‰åŠåˆ°çš„å°±æ˜¯å¤šæ è‡ªé€‚åº”å¸ƒå±€çš„åº”ç”¨äº†ã€‚ å¦‚æžœè¦æŽ§åˆ¶ä¸¤è€…ä¹‹é—´çš„é—´è·ï¼Œæœ€å¥½å¯¹ .left å…ƒç´ ä½¿ç”¨ margin-right ã€‚å› ä¸ºå¦‚æžœå¯¹ .center å…ƒç´ ä½¿ç”¨ margin-left çš„è¯ï¼Œé¦–å…ˆ margin-left å€¼å¿…é¡»è¦è¶…è¿‡ .left å…ƒç´ çš„å®½åº¦å€¼ï¼Œå¦åˆ™æ— æ³•ä½“çŽ°ä½œç”¨ï¼›å†è€…å¯¹ .center å…ƒç´ è®¾ç½® margin-left äº†ï¼Œä¸å°±åˆå›žåˆ°äº†æµä½“è‡ªé€‚åº”å¸ƒå±€äº†å—ï¼ 4. åœ¨è®¡ç®—ç”Ÿæˆäº† BFC çš„å…ƒç´ çš„é«˜åº¦æ—¶ï¼Œå…¶æµ®åŠ¨å­å…ƒç´ åº”è¯¥å‚ä¸Žè®¡ç®—ã€‚ å‡ å¹´å‰æˆ‘æŠ€æœ¯å¾ˆå·®çš„æ—¶å€™æ€»åœ¨ç–‘æƒ‘ï¼Œfloatå…ƒç´ æ²¡æ³•æ’‘å¼€çˆ¶å…ƒç´ é«˜åº¦ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆç»™çˆ¶å…ƒç´ å¢žåŠ è®¾ç½®ä¸ä¸º â€˜noneâ€™ çš„ â€˜overflowâ€™ å€¼å°±å¯ä»¥äº†ï¼ŒçŽ°åœ¨æ€»ç®—æ˜¯è§£å¼€è°œé¢˜äº†ã€‚ã€‚ã€‚ IFCä¸Šä¸€ç¯‡æ–‡ç« ä¸­å·²ç»æåˆ°äº†å¾ˆå¤š IFC ç›¸å…³çš„çŸ¥è¯†ï¼Œè¿™æ¬¡å†è¡¥å……ä¸€ç‚¹ã€‚ IFC ä¸­çš„ç›’å­ä¸Ž BFC ä¸­çš„ä¸åŒçš„æ˜¯ï¼Œå®ƒä»¬å¯ä»¥æ°´å¹³ä¾æ¬¡æ”¾ç½®ã€‚ IFCä¸­çš„è¡Œç›’çš„å®½åº¦æ˜¯åŒ…å«å—çš„å®½åº¦å‡åŽ» float å…ƒç´ ï¼ˆå¦‚æžœæœ‰çš„è¯ï¼‰çš„å®½åº¦ï¼Œè¡Œç›’é«˜åº¦æ˜¯æœ€é«˜çš„ç›’çš„topä¸Žæœ€ä½Žçš„ç›’çš„bottomä¹‹é—´çš„è·ç¦»ã€‚ å†…è”ç›’çš„é«˜åº¦æ˜¯ç”±line-heightå†³å®šçš„ï¼Œè€Œå¯æ›¿æ¢å…ƒç´ ï¼Œinline-blockï¼Œinline-table å…ƒç´ çš„é«˜åº¦åˆ™æ˜¯ç”±å®ƒä»¬çš„ margin ç›’é«˜åº¦å†³å®šçš„ã€‚ å…³äºŽè¡Œé«˜çš„è®¡ç®—åŽé¢ä¼šæœ‰è¾ƒå¤§ç¯‡å¹…çš„æ–‡ç« æ¥ä»‹ç»ï¼Œæ•¬è¯·æœŸå¾…ï¼ â€˜displayâ€™ï¼Œâ€™positionâ€™ä¸Žâ€™floatâ€™ä¹‹é—´çš„å…³ç³»å¦‚æžœâ€™positionâ€™å€¼ä¸ºâ€™absoluteâ€™æˆ–è€…â€™fixedâ€™ï¼Œæˆ–è€…â€™floatâ€™å€¼ä¸ä¸ºâ€™noneâ€™ï¼Œæˆ–è€…è¯¥å…ƒç´ æ˜¯æ ¹å…ƒç´ ï¼Œé‚£ä¹ˆdisplayå°±æ ¹æ®ä¸‹è¡¨æ¥è®¾ç½®ã€‚ åŒæ—¶è®¾ç½®â€™absoluteâ€™æˆ–è€…â€™fixedâ€™ã€éž â€˜noneâ€™ çš„ floatï¼Œfloat ä¼šè¢«è¦†ç›–ä¸º â€˜noneâ€™ã€‚ æŒ‡å®šå€¼ è®¡ç®—å€¼ inline-table table inline, table-row-group, table-column, table-column-group, table-header-group, table-footer-group, table-row, table-cell, table-caption, inline-block block å…¶å®ƒ ä¸ŽæŒ‡å®šå€¼ç›¸åŒ]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[é‡æ‹¾CSSè§„èŒƒä¹‹ä»Žç›’ç±»åž‹è°ˆèµ·]]></title>
      <url>%2F2016%2F09%2F02%2Frelearn_box_type%2F</url>
      <content type="text"><![CDATA[ä»Šå¤©è¦å†™çš„ä¸æ˜¯CSSæ ‡å‡†ç›’æ¨¡åž‹å’ŒIEç›’æ¨¡åž‹ï¼Œé‚£ä¸ªçƒ‚å¤§è¡—äº†ã€‚ä»Šå¤©è¦æ·±å…¥æŽ¢è®¨çš„æ˜¯CSSåŽ»æŽ§åˆ¶é¡µé¢å¸ƒå±€èƒŒåŽçš„é‚£ä¸€å¥—è§„åˆ™ï¼Œé¡µé¢å°±æ˜¯ç”±å¾ˆå¤šä¸ªå„å¼å„æ ·çš„ç›’ç»„æˆçš„ï¼Œé‚£æˆ‘ä»¬å°±èŠè¿™ä¸ªã€‚è¿™ä¸ªæ˜¯å¯¹åŽé¢çš„BFCä»¥åŠå®šä½æ¨¡å¼çš„ä¸€ä¸ªé“ºåž«ï¼ŒåŸºç¡€å¾ˆé‡è¦ï¼ï¼ï¼ æœ¯è¯­æ™®åŠ ç›’ï¼š æ¯ä¸ªå…ƒç´ éƒ½ä¼šç”Ÿæˆä¸€ä¸ªç›’ï¼Œç”¨æ¥å®¹çº³åŽä»£ï¼ˆç”Ÿæˆçš„ç›’ï¼‰å’Œè‡ªå·±ç”Ÿæˆçš„å†…å®¹(æ¯”å¦‚è¯´ä¸€æ®µæ–‡å­—)ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠä¸€ä¸ªé¡µé¢çœ‹åšæ˜¯ç”±ä¸€ä¸ªä¸ªçš„ç›’å­å †ç Œè€Œæˆçš„ï¼Œåªæ˜¯è¿™äº›ç›’å­ä¹Ÿåˆ†ç§ç±»ï¼Œå°±åƒè¿™ä¸ªç¤¾ä¼šåœ¨è§†è§‰ä¸Šç”±ç”·äººå’Œå¥³äººæž„æˆã€‚å—çº§å…ƒç´ ï¼š display ä¸º block/table/list-item çš„å…ƒç´ ã€‚å—çº§ç›’ï¼š å—çº§å…ƒç´ ç”Ÿæˆçš„ç›’å—å®¹å™¨ç›’ï¼š å—çº§ç›’åŒæ—¶ä¹Ÿæ˜¯å—å®¹å™¨ç›’ï¼Œé™¤äº†è¡¨æ ¼ç›’ä¸Žå¯æ›¿æ¢å…ƒç´ ã€‚é¡¾åæ€ä¹‰ï¼Œå—å®¹å™¨ç›’å°±æ˜¯å®ƒè¦å®¹çº³åŽä»£å’Œå®ƒè‡ªèº«çš„å†…å®¹ã€‚è¿™é‡Œé¢æˆ‘å‘çŽ°äº†ä¸€ä¸ªå¾ˆæœ‰è¶£çš„äº‹å„¿ï¼Œå¯æ›¿æ¢å…ƒç´ ï¼Œå®ƒä»¬éƒ½æ˜¯é€šè¿‡ value/src ä¹‹ç±»çš„å±žæ€§æ¥æŽ§åˆ¶å†…å®¹æ˜¾ç¤ºï¼Œå¯èƒ½æ­£æ˜¯å› ä¸ºå®ƒä»¬ æ— æ³•æ·»åŠ åŽä»£å…ƒç´ ï¼ˆæˆ–è€…å¿…é¡»æ·»åŠ ç‰¹å®šå­å…ƒç´ ï¼‰ çš„ç‰¹æ€§æ‰€ä»¥æ‰ä¸ç®—æ˜¯å—å®¹å™¨ç›’çš„ã€‚å†…è”çº§å…ƒç´ ï¼š display ä¸º inline/inline-block/inline-table çš„å…ƒç´ ã€‚å†…è”çº§ç›’ï¼š å†…è”çº§å…ƒç´ ç”Ÿæˆçš„ç›’ã€‚ä½†æ˜¯åªæœ‰ inline å…ƒç´ ç”Ÿæˆçš„ç›’æ‰å«åšå†…è”ç›’ï¼Œå®ƒåŒºåˆ«äºŽ inline-block å…ƒç´ çš„å†…è”çº§å—ç›’ã€‚è¡Œç›’ï¼š å†…è”æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ä¸­ï¼ŒåŒ…å«æ¥è‡ªåŒä¸€è¡Œçš„ç›’çš„çŸ©å½¢åŒºåŸŸå«åšè¡Œç›’å¯æ›¿æ¢å…ƒç´ ï¼š æµè§ˆå™¨æ ¹æ®å…ƒç´ çš„æ ‡ç­¾å’Œå®ƒçš„å±žæ€§æ¥å†³å®šå…ƒç´ çš„å…·ä½“æ˜¾ç¤ºå†…å®¹ã€‚æ¯”å¦‚ &lt;img&gt; &lt;input&gt; &lt;textarea&gt; &lt;select&gt; &lt;object&gt;ã€‚ å†…è”å…ƒç´ çš„ä¸€ä¸ªå°ç‰¹æ€§è¿™é‡Œå•ç‹¬æŠŠå†…è”å…ƒç´ ç»™æ‹¿å‡ºæ¥äº†ï¼Œå†…è”å…ƒç´ å¿…é¡»è¦åŒºåˆ«äºŽå†…è”çº§å…ƒç´ ï¼Œå†…è”å…ƒç´ åªæ˜¯æŒ‡ diaplay ä¸º inline çš„å…ƒç´ ã€‚ margin-top,margin-bottom å¯¹å†…è”å…ƒç´ æ— æ•ˆã€‚padding-top,padding-bottom å¯¹å†…è”å…ƒç´ æœ‰æ•ˆï¼Œä½†å®ƒä»¬ä¸èƒ½å¯¹å¸ƒå±€äº§ç”Ÿä»»ä½•å½±å“ã€‚ ä¸Šé¢ç¬¬ä¸€å¥è¯æ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œç¬¬äºŒå¥è¯å¯èƒ½éœ€è¦é€šè¿‡ä¾‹å­è¾…åŠ©ç†è§£ã€‚ ä¸Šå›¾ä¸­ padding-top å’Œ padding-bottom ä¼šå½±å“åˆ°å—çº§å…ƒç´  content åŒºåŸŸä½ç½®ï¼Œä¼šè®©å—çº§å…ƒç´ çš„ç©ºé—´çœŸæ­£æ„ä¹‰ä¸Šçš„å˜å¤§ï¼Œè¿›è€Œå½±å“å…¶ä»–å…ƒç´ çš„ä½ç½®ã€‚ä½†æ˜¯å†çœ‹å†…è”å…ƒç´ è¿™è¾¹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºæ¥ padding ç¡®å®žå­˜åœ¨ï¼Œä½†æ˜¯å®ƒæ²¡æœ‰èµ·åˆ°ä»»ä½•å½±å“ï¼Œæ²¡æœ‰èƒ½å¤Ÿè®©å†…è”å…ƒç´ å æ®çš„ç©ºé—´å˜å¤§ï¼Œå¸ƒå±€ä¸Šæ²¡æœ‰å¯¹å…ƒç´ è‡ªèº«èµ·åˆ°ä»»ä½•å½±å“ï¼Œæ›´åˆ«æå¯¹å…¶ä»–å…ƒç´ äº§ç”Ÿå½±å“äº†ã€‚å¯èƒ½å”¯ä¸€çš„ä½œç”¨å°±æ˜¯è®¾ç½® background çš„æ—¶å€™ï¼Œ padding èƒ½èµ·åˆ°ä½œç”¨ã€‚ åŒ¿åç›’CSSä¸ºäº†æ–¹ä¾¿å¸ƒå±€ï¼Œå®ƒè§„å®šï¼šä¸€ä¸ªå—å®¹å™¨ç›’è¦ä¹ˆåªåŒ…å«å—çº§ç›’ï¼Œè¦ä¹ˆåªåŒ…å«å†…è”çº§ç›’ã€‚ åŒ¿åå—ç›’æˆ‘ä»¬æ¥çœ‹çœ‹CSSä¼šå¦‚ä½•å¯¹å¾…è¿™æ®µä»£ç ï¼š 12345&lt;div&gt; &lt;span&gt;æˆ‘æ˜¯spanå†…çš„æ–‡å­—&lt;/span&gt; &lt;p&gt;æˆ‘æ˜¯på†…çš„æ–‡å­—&lt;/p&gt; æˆ‘æ˜¯æ²¡æœ‰ä»»ä½•æ ‡ç­¾åŒ…å«çš„æ–‡å­—&lt;/div&gt; å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ div ï¼Œæˆ‘æ˜¯ä¸€ä¸ªå—å®¹å™¨ç›’ï¼Œæˆ‘å‘çŽ°æˆ‘çš„å„¿å­ p ç”Ÿæˆäº†å—çº§ç›’ï¼Œé‚£ä¹ˆæˆ‘å…¶ä»–çš„å„¿å­ä¹Ÿå¿…é¡»éƒ½æ˜¯å—çº§ç›’ã€‚sorryï¼Œ span é¾Ÿå„¿å­ï¼Œéº»çƒ¦ä½ å˜ä¸ªèº«ï¼Œå˜æˆå—çº§ç›’ã€‚å§æ§½ï¼Œâ€™æˆ‘æ˜¯æ²¡æœ‰ä»»ä½•æ ‡ç­¾åŒ…å«çš„æ–‡å­—â€™ è¿™æ®µæ–‡æœ¬ä¸å¤ªå¥½å¤„ç†å•Šï¼Œä»–åˆä¸æ˜¯æˆ‘å„¿å­ï¼Œä¸å¥½ç›´æŽ¥å‘½ä»¤ä»–ã€‚ å¹¸å¥½è€å­çµæœºä¸€åŠ¨ï¼Œè¦ä¸æˆ‘å¹²è„†è®¤ä»–åšä¸ªå¹²å„¿å­ã€‚ divï¼šâ€œæ–‡æœ¬å°å­©å„¿ï¼Œä½ æ„¿æ„åšæˆ‘çš„å¹²å„¿å­å—ï¼Ÿâ€ æ–‡æœ¬ï¼šâ€œæˆ‘æ„¿æ„ï¼Œçˆ¸çˆ¸ï¼â€ divï¼šâ€œçœŸæ˜¯ä¸ªå¥½å­©å­ã€‚ä½†æ˜¯å‘¢ï¼Œä»Šå¤©è¿™æƒ…å†µï¼Œä½ ä»¬éƒ½å¿…é¡»è¦æœ‰ä¸€ä¸ªå—çº§ç›’ï¼Œä½ å…¶ä»–çš„å“¥å“¥ä»¬è‡ªå·±ä¼šç”Ÿäº§ï¼Œçœ‹ä½ å°å­å•¥ä¹Ÿä¸ä¼šï¼Œçˆ¸çˆ¸å°±é€ä½ ä¸€ä¸ªå§ï¼Œä¸è¿‡è¿™ä¸ªç›’å­æ— åæ— åˆ†ï¼Œæˆ‘ä»¬å°±å«å®ƒåŒ¿åå—ç›’â€ å‡†å¤‡å·¥ä½œéƒ½åšå¥½äº†ï¼Œå†æ¥çœ‹çœ‹ä»–ä»¬å®¶çš„å®¶è°±å§ï¼ æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œä¸Šé¢ span ä¹Ÿå˜æˆå—çº§ç›’äº†ï¼Œé‚£æˆ‘ä»¬æ˜¯ä¸æ˜¯åƒå¯¹å¾…å—çº§å…ƒç´ ä¸€æ ·ç»™å®ƒè®¾ç½®å®½é«˜å‘¢ï¼Ÿå½“ç„¶ä¸èƒ½ï¼ï¼ï¼æ‰€ä»¥è¯´ï¼Œä¸Šé¢çš„å›¾ç‰‡æ˜¯é”™è¯¯çš„ï¼ï¼ï¼ å…¶å®žå‘¢ï¼Œ span è¿™å°å­ä½œå¼Šäº†ï¼Œå®ƒæ˜Žæ˜Žåªæ˜¯çŒ´å­æ´¾æ¥çš„é€—é€¼ï¼Œå½“ç„¶ä¸èƒ½åƒçŒ´å­ä¸€æ ·å˜èº«ï¼Œé‚£å±‚å—çº§ç›’ï¼ˆblock boxï¼‰æ˜¯å®ƒè€çˆ¸å‘æ”¾çš„ä½œæˆ˜ç‰©èµ„â€”â€”åŒ¿åå—ç›’ã€‚æ‰€ä»¥å‘¢ï¼ŒçœŸå®žçš„æƒ…å†µæ˜¯ï¼šå®ƒè‡ªå·±æœ¬èº«åªèƒ½äº§ç”Ÿå†…è”ç›’ï¼Œç„¶åŽåœ¨å®ƒå¤–é¢è¿˜ä¼šåŒ…è£¹ç€ä¸€ä¸ªåŒ¿åå—ç›’ã€‚ é‚£æˆ‘ä»¬æ¥çœ‹ä¸€çœ‹æ­£ç¡®çš„å®¶è°±ï¼š æ­£æ˜¯å› ä¸ºåŒ¿åç›’çš„å­˜åœ¨ï¼Œ span å’Œé‚£æ®µå°æ–‡æœ¬ä¹Ÿèƒ½å¤Ÿåƒå—çº§å…ƒç´ ä¸€æ ·ï¼Œå•ç‹¬å æ®ä¸€æ•´è¡Œã€‚ é‚£å†æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå‡ ä¸ªå†…è”å…ƒç´ åœ¨ä¸€èµ·ï¼Œå®ƒä»¬æ˜Žæ˜Žæ˜¯åŒä¸€è¡ŒæŽ’åˆ—å•Šï¼Œå¹¶æ²¡æœ‰åƒå—çº§å…ƒç´ ä¸€æ ·æ¢è¡Œæ˜¾ç¤ºã€‚å…¶å®žå‘¢ï¼Œå¤šä¸ªå†…è”å…ƒç´ åœ¨ä¸€èµ·ï¼ŒåŒ¿åå—ç›’ä¼šæŠŠç›¸é‚»çš„å†…è”ç›’â€œæ‰“åŒ…â€ï¼Œä¸€èµ·åŒ…è£¹èµ·æ¥ã€‚ åŒ¿åå†…è”ç›’ä»»ä½•è¢«ç›´æŽ¥åŒ…å«åœ¨ä¸€ä¸ªå—å®¹å™¨å…ƒç´ ä¸­ï¼ˆä¸åœ¨ä¸€ä¸ªå†…è”å…ƒç´ é‡Œé¢ï¼‰çš„æ–‡æœ¬ï¼Œå¿…é¡»è§†ä¸ºä¸€ä¸ªåŒ¿åå†…è”å…ƒç´ ã€‚ å†æ¥çœ‹ä¸€æ®µä»£ç ï¼š 1234&lt;p&gt; &lt;span&gt;æˆ‘æ˜¯spanä¸­çš„æ–‡å­—æˆ‘æ˜¯spanä¸­çš„æ–‡å­—æˆ‘æ˜¯spanä¸­çš„æ–‡å­—&lt;/span&gt; æˆ‘æ˜¯æ²¡æœ‰ä»»ä½•æ ‡ç­¾åŒ…å«çš„æ–‡å­—&lt;p&gt; å¤§å®¶å¥½ï¼Œæˆ‘æ˜¯ p å…ƒç´ ï¼Œæˆ‘ä»Šå¤©çœ‹äº†çœ‹æˆ‘çš„å„¿å­ä»¬ï¼Œä¸å®¹æ˜“å•Šï¼Œä¸€ä¸ªå—çº§ç›’ä¹Ÿæœ¨æœ‰æ˜‚ï¼ŒæŒ‰ç…§CSSå½“å¹´å®šä¸‹çš„è§„çŸ©ï¼Œè¿™æ ·çš„æƒ…å†µä¸‹ï¼Œæœ¬çŽ‹å¿…é¡»å»ºç«‹å†…è”æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ï¼ˆIFCï¼‰æ¥å®‰ç½®è¿™ç¾¤å‚»å­©å­ã€‚ span å¥½è¯´å•Šï¼Œè‡ªå·±æœ¬èº«å°±ç”Ÿæˆäº†å†…è”çº§ç›’ï¼Œéº»çƒ¦çš„å°±æ˜¯è¿™ä¸ªæ²¡æœ‰ä»»ä½•æ ‡ç­¾åŒ…å›´çš„æ–‡æœ¬äº†ã€‚å’±ä»¬è¿˜ç”¨è€æ–¹æ³•è¡Œä¸è¡Œ(âŠ™vâŠ™) pï¼šâ€œæ–‡æœ¬å°å­©å„¿ï¼Œä½ æ„¿æ„åšæˆ‘çš„å¹²å„¿å­å—ï¼Ÿâ€ æ–‡æœ¬ï¼šâ€œæˆ‘æ„¿æ„ï¼Œçˆ¸çˆ¸ï¼â€ pï¼šâ€œçœŸæ˜¯ä¸ªå¥½å­©å­ã€‚ä½†æ˜¯å‘¢ï¼Œä»Šå¤©è¿™æƒ…å†µï¼Œä½ ä»¬éƒ½å¿…é¡»è¦æœ‰ä¸€ä¸ªå†…è”çº§ç›’ï¼Œä½ å…¶ä»–çš„å“¥å“¥ä»¬è‡ªå·±ä¼šç”Ÿäº§ï¼Œçœ‹ä½ å°å­å•¥ä¹Ÿä¸ä¼šï¼Œçˆ¸çˆ¸å°±é€ä½ ä¸€ä¸ªå§ï¼Œä¸è¿‡è¿™ä¸ªç›’å­æ— åæ— åˆ†ï¼Œæˆ‘ä»¬å°±å«å®ƒåŒ¿åå†…è”ç›’â€ é—²è¯ä¸å¤šè¯´ï¼Œçœ‹å®¶è°±ï¼š æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¦‚æžœä¸€ä¸ªè¡Œç›’æ— æ³•å®¹çº³ä¸‹æŸä¸ªå†…è”ç›’ï¼Œè¿™ä¸ªå†…è”ç›’å°±ä¼šåˆ†å‰²å¼€æ¥æ”¾åœ¨å¤šä¸ªè¡Œç›’ä¸­ã€‚æ³¨æ„ä¸€ä¸‹åœ¨æ¢è¡Œï¼ˆåˆ†å‰²ï¼‰çš„åœ°æ–¹ï¼Œæ˜¯æ²¡æœ‰ç«–ç›´çº¿çš„ï¼Œè¡¨ç¤ºå†…è”ç›’æœªç»“æŸï¼Œè€Œä¸” margin,padding å€¼åœ¨è¿™é‡Œæ˜¯ä¸ä¼šä½“çŽ°å‡ºæ¥çš„ï¼Œ margin-left,margin-right,padding-left,padding-right å€¼åªå­˜åœ¨äºŽå†…è”ç›’çš„å¼€å§‹å’Œç»“æŸçš„åœ°æ–¹ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[é‡æ‹¾CSSè§„èŒƒä¹‹margin]]></title>
      <url>%2F2016%2F07%2F30%2Frelearn_margin%2F</url>
      <content type="text"><![CDATA[å¥½ä¹…æ²¡å†™åšå®¢äº†ï¼Œç”šæ˜¯æƒ­æ„§å•Šï¼Œmdè¯­æ³•éƒ½å¿«å¿˜äº†ã€‚æœ€è¿‘ä¸€ç›´åœ¨å¿™ç€å·©å›ºåŸºç¡€ï¼Œå®žåœ¨æ˜¯åŽŒå€¦é‚£ç§ä¼¼æ‡‚éžæ‡‚çš„æ„Ÿè§‰ã€‚æœ‰çš„æ—¶å€™bugå‡ºæ¥äº†ï¼Œæ‹¿åˆ«äººçš„ä»£ç å¯èƒ½ä¸€ä¸‹å­å°±è§£å†³äº†ï¼Œå¯æ˜¯çŸ¥è¯†é¢å¤ªé›¶ç¢ŽåŒ–ã€‚è¿™ç¯‡æ–‡ç« ä¸ä¼šæ¶‰åŠmarginåŸºæœ¬å±žæ€§ï¼Œå› ä¸ºè¿™äº›ç½‘ä¸Šéƒ½æœ‰ã€‚æœ¬æ–‡å†…å®¹é‡ä¸ä¼šç‰¹åˆ«å¤§ï¼Œä½†æ˜¯é‡Œé¢çš„çŸ¥è¯†ç‚¹å¾ˆå¤šäººåœ¨å®žé™…å¼€å‘ä¸­å´ä¼šæ··æ·†ã€‚ marginæœ‰æ•ˆæ€§ marginå¯¹ display:table; ç³»åˆ—ï¼ˆè¿™å…¶ä¸­ä¸åŒ…å« table-captionï¼Œ table å’Œ inline-tableï¼‰ ä»¥å¤–çš„æ‰€æœ‰å…ƒç´ æœ‰æ•ˆ margin-top å’Œ margin-bottom å¯¹ä¸å¯æ›¿æ¢çš„å†…è”å…ƒç´ æ— æ•ˆ marginç™¾åˆ†æ¯”å€¼ç™¾åˆ†æ¯”æ ¹æ®ç”Ÿæˆç›’çš„åŒ…å«å—çš„widthæ¥è®¡ç®—ã€‚ æˆ‘ä»¬æ¥çœ‹çœ‹å…³äºŽåŒ…å«å—çš„å‡ ç§æƒ…å†µï¼š å¦‚æžœè¯¥å…ƒç´ çš„positionæ˜¯ relative æˆ–è€… staticï¼ŒåŒ…å«å—ç”±å…¶æœ€è¿‘çš„å—å®¹å™¨ç¥–å…ˆç›’çš„contentè¾¹å½¢æˆ å¦‚æžœå…ƒç´ å…·æœ‰ position: fixedï¼ŒåŒ…å«å—ç”±è¿žç»­åª’ä½“çš„è§†å£æˆ–è€…åˆ†é¡µåª’ä½“çš„é¡µåŒºå»ºç«‹ å¦‚æžœå…ƒç´ å…·æœ‰ position: absoluteï¼ŒåŒ…å«å—ç”±æœ€è¿‘çš„ positionä¸º absoluteï¼Œrelativeæˆ–è€… fixed çš„ç¥–å…ˆå»ºç«‹ï¼ŒæŒ‰ç…§å¦‚ä¸‹æ–¹å¼ï¼š å¦‚æžœè¯¥ç¥–å…ˆæ˜¯ä¸€ä¸ªå†…è”å…ƒç´ ï¼ŒåŒ…å«å—å°±æ˜¯çŽ¯ç»•ç€ä¸ºè¯¥å…ƒç´ ç”Ÿæˆçš„ç¬¬ä¸€ä¸ªå’Œæœ€åŽä¸€ä¸ªå†…è”ç›’çš„ padding box çš„è¾¹ç•Œæ¡†ã€‚ å¦åˆ™ï¼ŒåŒ…å«å—ç”±è¯¥ç¥–å…ˆçš„ padding è¾¹å½¢æˆ margin autoæŽ¢è®¨æˆ‘ä»¬æ˜¯å¦æœ‰æƒ³è¿‡ä¸€ä¸ªæœ‰å›ºå®šå®½åº¦çš„divå…ƒç´ è®¾ç½®äº† margin: auto; ä¸ºä»€ä¹ˆå¯ä»¥æ°´å¹³å±…ä¸­æ˜¾ç¤ºï¼Ÿä¸ºä»€ä¹ˆæœ‰å›ºå®šé«˜åº¦å´æ— æ³•åž‚ç›´å±…ä¸­æ˜¾ç¤ºï¼Ÿ why can æ°´å¹³å±…ä¸­å¸¸è§„æµä¸­çš„å—çº§ä¸å¯æ›¿æ¢å…ƒç´ çš„è§„åˆ™ä¸­åŒ…å«è¿™æ ·ä¸¤ä¸ªè§„åˆ™ï¼š â€˜margin-leftâ€™ + â€˜border-left-widthâ€™ + â€˜padding-leftâ€™ + â€˜widthâ€™ + â€˜padding-rightâ€™ + â€˜border-right-widthâ€™ + â€˜margin-rightâ€™ = åŒ…å«å—çš„å®½åº¦ å¦‚æžœâ€™margin-leftâ€™å’Œâ€™margin-rightâ€™éƒ½æ˜¯â€™autoâ€™ï¼Œé‚£ä¹ˆå®ƒä»¬çš„åº”ç”¨å€¼ç›¸ç­‰ã€‚ ä¸¾ä¸ªæ —å­ï¼Œå‡è®¾ div è®¾ç½®äº†å›ºå®šå®½åº¦, padding å’Œ border ä¸ºé›¶ï¼Œå½“æˆ‘ä»¬è®¾ç½® margin: auto; æ—¶ï¼Œæµè§ˆå™¨ä¼šè®¾ç½® margin-left ç­‰äºŽ margin-rightï¼Œå¹¶ä¸”è§£æ–¹ç¨‹ç»„æ±‚å‡ºæ­£ç¡®çš„margin-left å’Œ margin-right å€¼ã€‚ åªè¦å¸¸è§„æµä¸­çš„divæœ‰å›ºå®šå®½åº¦ï¼Œå¹¶ä¸” padding å’Œ border å·¦å³ä¸¤è¾¹çš„æ•°å€¼å¤§å°ä¸€æ ·ï¼Œè®¾ç½®äº† margin: 0 auto; å°±èƒ½è®©å…¶æ°´å¹³å±…ä¸­æ˜¾ç¤ºã€‚ why canâ€™t åž‚ç›´å±…ä¸­CSS2.1è§„èŒƒæ–‡æ¡£10.6.3èŠ‚æŒ‡å‡ºï¼š â€˜overflowâ€™ è®¡ç®—å€¼ä¸º â€˜visibleâ€™ æ—¶å¸¸è§„æµä¸­çš„å—çº§ä¸å¯æ›¿æ¢å…ƒç´  å¦‚æžœâ€™margin-topâ€™æˆ–è€…â€™margin-bottomâ€™ä¸ºâ€™autoâ€™ï¼Œå…¶åº”ç”¨å€¼ä¸º 0ã€‚ æ‰€ä»¥è¯´ï¼Œç®¡ä½ æœ‰æ²¡æœ‰è®¾å®šé«˜åº¦ï¼Œä½ éƒ½ä¼šæŠŠä½ çš„ margin ä¸Šä¸‹å€¼è®¾ç½®ä¸º 0ã€‚ä¹Ÿå°±æ˜¯åž‚ç›´æ–¹å‘ä¸Š div åŽŸåœ°ä¸åŠ¨ï¼ What else can æ°´å¹³/åž‚ç›´å±…ä¸­ by â€˜margin: autoâ€™é™¤äº†æœ¬èŠ‚çš„ç¬¬ä¸€ç§æƒ…å†µå¤–ï¼Œè¿˜æœ‰ä¸€ç§æƒ…å†µï¼Œé‚£å°±æ˜¯ ç»å¯¹å®šä½å…ƒç´  ã€‚ å®ƒä¸ä»…èƒ½å¤Ÿæ°´å¹³å±…ä¸­ï¼ŒåŒæ ·èƒ½å¤Ÿåž‚ç›´å±…ä¸­ã€‚ ä¸Šé¢ top/bottom/left/right æˆ‘éƒ½è®¾ç½®çš„ 0 ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥è®¾ç½®æˆéžé›¶å…ƒç´ ï¼Œåªéœ€è¦è®©æ•°å€¼ä¸¤ä¸¤å¯¹ç§°å°±è¡Œäº†ï¼Œä½†æ˜¯è¿™æ ·ä¸å¤Ÿå®‰å…¨ã€‚ä¸¾ä¸ªæ —å­ï¼Œæœ‰äººä½œæ­»ï¼Œtop/bottom çš„å€¼æ”¾å¾—å¤ªå¤§äº†ï¼Œtop + bottom + height + border + padding è¶…è¿‡äº† åŒ…å«å—çš„é«˜åº¦ï¼Œé‚£å’‹åŠžå‘¢ï¼Ÿï¼Ÿï¼Ÿ margin ä¸å°±è¦å˜æˆè´Ÿå€¼äº†å—ï¼Ÿï¼Ÿï¼Ÿ ä¸ä¼šçš„ï¼Œè¿™æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šå¿½ç•¥ bottom å€¼ï¼Œ margin-top/margin-bottom ç½® 0ï¼Œæ ¹æ®æ–¹ç¨‹å¼é‡æ–°è®¡ç®—åˆé€‚çš„ bottom å€¼ï¼Œè€Œæˆ‘ä»¬é‡Œé¢çš„ div å°±ä¸ä¼šåž‚ç›´å±…ä¸­äº†ï¼Œå®ƒä¼šæ ¹æ® top æ¥å®šä½ã€‚ æ‰€ä»¥ä¹ˆï¼Œèƒ½ä¸ä½œæ­»å°±ä¸è¦ä½œæ­»äº†ï¼Œä¸Šé¢çš„ä»£ç ç¤ºä¾‹åˆæ–¹ä¾¿åˆå®‰å…¨ã€‚ marginåˆå¹¶marginåˆå¹¶ä¹Ÿå¯ä»¥å«åšå¤–è¾¹è·å åŠ ï¼Œè¿™æ˜¯ä¸€ä¸ªç®€å•çš„æ¦‚å¿µï¼ŒæŒ‡çš„å°±æ˜¯ä¸¤ä¸ªæˆ–è€…å¤šä¸ªç›’çš„ç›¸é‚»çš„marginå¯èƒ½ä¼šåˆå¹¶åœ¨ä¸€èµ·ã€‚å¦‚æžœè¿˜ä¸èƒ½ç†è§£çš„è¯ï¼Œæˆ‘ä»¬ç”¨å›¾ç¤ºæ¥ç†è§£ä¸€ä¸‹ã€‚ å½“ä¸€ä¸ªå…ƒç´ å‡ºçŽ°åœ¨å¦ä¸€ä¸ªå…ƒç´ ä¸Šé¢æ—¶ï¼Œç¬¬ä¸€ä¸ªå…ƒç´ çš„åº•å¤–è¾¹è·ä¸Žç¬¬äºŒä¸ªå…ƒç´ çš„é¡¶å¤–è¾¹è·å‘ç”Ÿå åŠ ã€‚ å½“ä¸€ä¸ªå…ƒç´ åŒ…å«åœ¨å¦ä¸€ä¸ªå…ƒç´ ä¸­æ—¶ï¼Œå®ƒä»¬çš„é¡¶å¤–è¾¹è·æˆ–è€…åº•å¤–è¾¹è·ä¹Ÿä¼šå‘ç”Ÿå åŠ ã€‚ ç”šè‡³å¤–è¾¹è·è¿˜èƒ½ä¸Žè‡ªèº«è¿›è¡Œå åŠ ã€‚å¦‚æžœä¸€ä¸ªç©ºå…ƒç´ ï¼Œä¸Šä¸‹æ–¹å‘æœ‰å¤–è¾¹è·ï¼Œä½†æ²¡æœ‰è¾¹æ¡†å’Œå†…è¾¹è·ï¼Œè¿™æ—¶å€™ï¼Œä¸Šä¸‹å¤–è¾¹è·å°±ä¼šç›¸é‡ï¼Œè‡ªç„¶è€Œç„¶çš„å åŠ äº†ã€‚ å¦‚æžœè¿™ä¸ªå¤–è¾¹è·åˆé‡åˆ°äº†å…¶ä»–å…ƒç´ çš„å¤–è¾¹è·ï¼ˆmarginç›¸é‚»ï¼‰ï¼Œå®ƒä»¬è¿˜èƒ½ç»§ç»­å åŠ ã€‚ O__O â€œâ€¦çœ‹æ¥marginçš„ä¸–ç•Œé‡Œä¹Ÿä¼šæœ‰å°ä¸‰å°å››çš„å­˜åœ¨ã€‚ é‚£æˆ‘ä»¬æœ‰æ²¡æœ‰æƒ³è¿‡ CSS å·¥ä½œç»„ä¸ºä»€ä¹ˆä¼šè®¾ç«‹è¿™ä¹ˆä¸€ä¸ª bug èˆ¬çš„å­˜åœ¨ï¼è¿™æ˜¯ä¸ºäº†æœåŠ¡æ®µè½å…ƒç´  p å•Šã€‚ æˆ‘ä»¬å¸¸è§çš„æ®µè½ä¸Žå…¶ä»–å…ƒç´ éƒ½ä¼šæœ‰é—´è·ï¼Œè¿™æ˜¯å› ä¸ºï¼Œç”¨æˆ·ä»£ç†ç»™ä»–ä»¬è®¾ç½®äº†é»˜è®¤marginå€¼ã€‚å¯é‚£ä¸ºä»€ä¹ˆä¸¤ä¸ªæ®µè½ç›¸é‡ï¼Œé—´è·å´æ²¡æœ‰æ‹‰å¤§å‘¢ï¼Ÿè¿™å°±æ˜¯ç”¨åˆ°äº†æˆ‘ä»¬ä¸Šé¢æ‰€è¯´çš„å‰åŽä¸¤ä¸ªdivï¼Œå®ƒä»¬çš„åº•å¤–è¾¹è·å’Œé¡¶å¤–è¾¹è·å åŠ åœ¨ä¸€èµ·äº†ï¼Œå…±äº«ä¸€ä¸ªå¤–è¾¹è·ï¼Œè‡ªç„¶å°±ä¸ä¼šæ‹‰å¤§äº†ã€‚ ä¸æ˜¯æ‰€æœ‰ç›¸é‚»çš„marginç›¸é‚»éƒ½å¯ä»¥åˆå¹¶ï¼ï¼ï¼ marginåˆå¹¶è§„åˆ™ æ°´å¹³æ–¹å‘çš„ margin ä¸ä¼šåˆå¹¶ ä¸€ä¸ªæµ®åŠ¨çš„ç›’ä¸Žä»»ä½•å…¶å®ƒç›’ä¹‹é—´çš„ margin ä¸ä¼šåˆå¹¶ï¼ˆç”šè‡³ä¸€ä¸ªæµ®åŠ¨ç›’ä¸Žå®ƒçš„æµå†…å­çº§ä¹‹é—´ä¹Ÿä¸ä¼šï¼‰ å»ºç«‹äº†æ–°çš„å—æ ¼å¼åŒ–ä¸Šä¸‹æ–‡çš„å…ƒç´ ï¼ˆä¾‹å¦‚ï¼Œæµ®åŠ¨ç›’ä¸Ž â€˜overflowâ€™ ä¸ä¸º â€˜visibleâ€™ çš„å…ƒç´ ï¼‰çš„ margin ä¸ä¼šä¸Žå®ƒä»¬çš„æµå†…å­çº§åˆå¹¶ ç»å¯¹å®šä½çš„ç›’çš„ margin ä¸ä¼šåˆå¹¶ï¼ˆç”šè‡³ä¸Žå®ƒä»¬çš„æµå†…å­çº§ä¹Ÿä¸ä¼šï¼‰ å†…è”ç›’çš„ margin ä¸ä¼šåˆå¹¶ï¼ˆç”šè‡³ä¸Žå®ƒä»¬çš„æµå†…å­çº§ä¹Ÿä¸ä¼šï¼‰ ä¸€ä¸ªæµå†…å—çº§å…ƒç´ çš„ bottom margin æ€»ä¼šä¸Žå®ƒçš„ä¸‹ä¸€ä¸ªæµå†…å—çº§å…„å¼Ÿçš„ top margin åˆå¹¶ï¼Œé™¤éžå…„å¼Ÿæœ‰ç©ºéš™ ä¸€ä¸ªæµå†…å—çº§å…ƒç´ çš„ top margin ä¼šä¸Žå®ƒçš„ç¬¬ä¸€ä¸ªæµå†…å—çº§å­çº§çš„ top margin åˆå¹¶ï¼Œå¦‚æžœè¯¥å…ƒç´ æ²¡æœ‰ top border ï¼Œæ²¡æœ‰ top padding å¹¶ä¸”è¯¥å­çº§æ²¡æœ‰ç©ºéš™ ä¸€ä¸ª â€˜heightâ€™ ä¸º â€˜autoâ€™ å¹¶ä¸” â€˜min-heightâ€™ ä¸º 0 çš„æµå†…å—çº§ç›’çš„ bottom margin ä¼šä¸Žå®ƒçš„æœ€åŽä¸€ä¸ªæµå†…å—çº§å­çº§çš„ bottom margin åˆå¹¶ï¼Œå¦‚æžœè¯¥ç›’æ²¡æœ‰ bottom padding å¹¶ä¸”æ²¡æœ‰ bottom border ç›’è‡ªèº«çš„ margin ä¹Ÿä¼šåˆå¹¶ï¼Œå¦‚æžœ â€˜min-heightâ€™ å±žæ€§ä¸º 0 ï¼Œå¹¶ä¸”æ—¢æ²¡æœ‰ top æˆ–è€… bottom border ,ä¹Ÿæ²¡æœ‰ top æˆ–è€… bottom padding ï¼Œå¹¶ä¸”å…¶ â€˜heightâ€™ ä¸º 0 æˆ–è€… â€˜autoâ€™ å½“ä¸¤ä¸ªæˆ–è€…æ›´å¤šçš„ margin åˆå¹¶æ—¶ï¼Œäº§ç”Ÿçš„ margin å®½åº¦ä¸ºåˆå¹¶ margin å®½åº¦ä¸­çš„æœ€å¤§å€¼ã€‚è‡³äºŽè´Ÿ margin ï¼Œå°±ä»Žæ­£ç›¸é‚» margin çš„æœ€å¤§å€¼ä¸­å‡åŽ»è´Ÿç›¸é‚» margin çš„ç»å¯¹å€¼çš„æœ€å¤§å€¼ã€‚å¦‚æžœæ²¡æœ‰æ­£ margin ï¼Œå°±ç”¨ 0 å‡åŽ»ç›¸é‚» margin çš„ç»å¯¹å€¼çš„æœ€å¤§å€¼ã€‚ marginå¸¸è§bugIE6åŒè¾¹è·bugåœºæ™¯ï¼š å½“ç»™çˆ¶å…ƒç´ å†…ç¬¬ä¸€ä¸ªæµ®åŠ¨å…ƒç´ è®¾ç½® margin-left æˆ– margin-right æ—¶ margin åŠ å€ã€‚è§£å†³åŠžæ³•ï¼šç»™ç¬¬ä¸€ä¸ªæµ®åŠ¨å…ƒç´ è®¾ç½®å±žæ€§ display:inline; IE6ä¸­3pxåç§»bugåœºæ™¯ï¼š å½“ä¸€ä¸ªéžæµ®åŠ¨å…ƒç´ ä¸Žä¸€ä¸ªæµ®åŠ¨å…ƒç´ ç›¸é‚»æ—¶ï¼Œä»–ä»¬ä¹‹é—´ä¼šå¤šå‡º 3px çš„é—´éš”ã€‚å¦‚æžœéžæµ®åŠ¨å…ƒç´ æ²¡æœ‰è®¾ç½®é«˜åº¦ï¼Œå°†ä½¿éžæµ®åŠ¨å…ƒç´ ä¸­çš„å†…å®¹ä¸Žå…¶å¤šå‡º 3px é—´éš”ï¼Œå¦‚æžœè®¾ç½®äº†é«˜åº¦ï¼Œåˆ™æ˜¯ div ä¹‹é—´å¤šå‡ºäº† 3px é—´éš”ã€‚è§£å†³æ–¹æ³•ï¼š è®¾ç½®éžæµ®åŠ¨å…ƒç´  float:left; ä¸€èµ·æµ®åŠ¨ï¼›æˆ–è€…ä¸ºå³è¾¹å…ƒç´ æ·»åŠ  IE6 Hackâ€”â€”ä¸ºéžæµ®åŠ¨å…ƒç´ è®¾ç½®é«˜åº¦ _min-height:1%;ã€‚è¿™æ—¶æ–‡æœ¬3pxåç§»ä¼šæ¶ˆå¤±ï¼Œä½†æ—¶å€™å‡ºçŽ°å…ƒç´ ç›’åç§»ï¼Œåªéœ€è¦å†ä¸ºæµ®åŠ¨å…ƒç´ è®¾ç½® _margin-right:-3px;å°±å¯ä»¥äº†]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Javascriptæ·±å…¥æµ…å‡ºä¹‹this]]></title>
      <url>%2F2016%2F06%2F14%2Fdeeply_understand_this%2F</url>
      <content type="text"><![CDATA[è¿™ç¯‡æ–‡ç« å…¶å®žå‡ å¤©å‰å°±æƒ³å†™äº†ï¼Œä½†æ˜¯è¿‘æ—¥åˆçœ‹åˆ°äº† this çš„å¾ˆå¤šç”¨æ³•ï¼Œè¯¸å¦‚ç¡¬ç»‘å®šã€è½¯ç»‘å®šï¼Œéƒ½æ²¡ç”¨åˆ°è¿‡ã€‚æ‰€ä»¥ä¸ç¦æ„Ÿæ…¨ï¼Œå­¦æ— æ­¢å¢ƒå•Šã€‚ this æ ¹æ®æƒ…å¢ƒä¸åŒï¼ŒæŒ‡å‘æ€§å·®å¼‚å¾ˆå¤§ï¼Œæ‰€ä»¥ä»Šå¤©å°±æ˜¯è¿›è¡Œä¸€ä¸ªç®€å•çš„æ¢³ç†ï¼Œå¹¶ä¸”å¯¹å…¶è¿›è¡Œä¸€äº›åŽŸç†æ€§çš„åˆ†æžã€‚ å‰è¨€å…³äºŽthisçš„è¯¯è§£æœ‰å¾ˆå¤šï¼Œæœ‰äººè®¤ä¸º this æŒ‡å‘å‡½æ•°è‡ªèº«ï¼Œæœ‰äººè®¤ä¸º this æŒ‡å‘å‡½æ•°ä¸Šä¸€çº§ï¼Œè¯¸å¦‚æ­¤ç±»çš„å¤ªå¤šäº†,ç”šè‡³å°±è¿žã€Šé«˜ç¨‹ã€‹ä¸­å¯¹å…¶éƒ½æœ‰ä¸€ä¸ªä¸å¤ªä¸¥è°¨çš„æè¿°ï¼š åœ¨å…¨å±€å‡½æ•°ä¸­ï¼Œ this ç­‰äºŽ window ï¼Œè€Œå½“å‡½æ•°è¢«ä½œä¸ºæŸä¸ªå¯¹è±¡çš„æ–¹æ³•è°ƒç”¨æ—¶ï¼Œthis ç­‰äºŽé‚£ä¸ªå¯¹è±¡ã€‚ ä»Šå¤©æˆ‘ä»¬å°±æ¥æŽ¢è®¨ä¸€ä¸‹thisçš„æ­£ç¡®æ‰“å¼€æ–¹å¼ã€‚ Whatâ€™s thiså‰ä¸€ç¯‡æ–‡ç« ä¸­æåˆ°è¿‡ï¼Œ this æ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¸€ä¸ªå±žæ€§ï¼Œå®ƒä¸æ˜¯ä¸€ä¸ªå˜é‡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½å¯¹å…¶è¿›è¡Œèµ‹å€¼æ“ä½œï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼›åŒæ—¶ this å±žæ€§æ˜¯åœ¨å‡½æ•°è°ƒç”¨æ—¶æ‰ç¡®ç«‹çš„ï¼Œå®ƒä¸Žå‡½æ•°å¦‚ä½•å®šä¹‰æ²¡æœ‰ä»»ä½•å…³ç³»ï¼Œå®ƒåªèƒ½å†³å®šäºŽå®ƒçš„è°ƒç”¨æ–¹å¼ã€‚ é‚£ä»Šå¤©çš„é‡ç‚¹å°±æ˜¯è®¨è®ºå‡ ç§è°ƒç”¨æ–¹å¼äº†ï¼Ÿå½“ç„¶ä¸æ˜¯ï¼Œé‡ç‚¹å°±æ˜¯äº†è§£ä¸€ä¸‹ this æ˜¯å¦‚ä½•æ¥å¯»æ‰¾æŒ‡å‘å¯¹è±¡çš„ï¼Œè¿™é‡Œå°±è¦å¼•å‡ºæˆ‘ä»¬çš„ å¼•ç”¨ç±»åž‹ äº†ã€‚ å¼•ç”¨ç±»åž‹å¼•ç”¨ç±»åž‹æœ‰ä¸¤ç§æƒ…å†µï¼šæ ‡è¯†ç¬¦å’Œå±žæ€§è®¿é—®å™¨ã€‚åœ¨å¤„ç†å¼•ç”¨ç±»åž‹çš„æ—¶å€™ï¼Œä¼šè¿”å›žä¸€ä¸ªå¼•ç”¨ç±»åž‹å€¼ï¼Œæˆ‘ä»¬ç”¨ä¼ªä»£ç æ¥è¡¨ç¤ºä¸€ä¸‹ï¼š 12345678var reference = &#123; // æ‹¥æœ‰è¿™ä¸ªå±žæ€§çš„å¯¹è±¡ base: &lt;base Object&gt;, // å¼•ç”¨å referenceName: &lt;reference name&gt;, // ä¸¥æ ¼æ¨¡å¼æ ‡è®°ï¼ˆbooleanï¼‰ åŽé¢çœç•¥è¿™ä¸ªå±žæ€§ï¼ˆä¸å¤ªç”¨å¾—åˆ°ï¼‰ strictReference: &lt;strict flag&gt;&#125; ä¸¾ä¸ªæ —å­ï¼š 1234var obj = &#123; bar: function () &#123;&#125;&#125;;function foo() &#123;&#125; åœ¨è°ƒç”¨çš„ä¸­é—´ç»“æžœä¸­ï¼Œè¿”å›žäº†å¦‚ä¸‹çš„å¼•ç”¨ç±»åž‹çš„å€¼ï¼š 12345678var barReference = &#123; base: obj referenceName: bar&#125;;var fooReference = &#123; base: global, referenceName: foo&#125;; åˆ°äº†è¿™é‡Œï¼Œå‡†å¤‡å·¥ä½œå·²ç»åšå¥½äº†ï¼Œä¸‹é¢å°±æ˜¯ thiså…³è”è§„åˆ™ ç²‰å¢¨ç™»åœºäº†ã€‚ åœ¨ä¸€ä¸ªå‡½æ•°ä¸Šä¸‹æ–‡ä¸­ï¼Œå…ˆåˆ¤æ–­è°ƒç”¨æ‹¬å· () çš„å·¦è¾¹æ˜¯å¦ä¸ºå¼•ç”¨ç±»åž‹ï¼Œ å¦‚æžœä¸æ˜¯åˆ™å°† this è®¾ç½®ä¸º undefined ï¼Œ å¦‚æžœæ˜¯ï¼Œå†åˆ¤æ–­å¼•ç”¨ç±»åž‹æ˜¯å¦ä¸ºå±žæ€§å¼•ç”¨ï¼Œå¦‚æžœä¸æ˜¯åˆ™å°† this è®¾ç½®ä¸º undefined ï¼Œå¦‚æžœæ˜¯ï¼Œåˆ™å°† this è®¾ä¸ºå¼•ç”¨ç±»åž‹å€¼çš„ base å¯¹è±¡ã€‚å¦‚æžœ this çš„å€¼ä¸º undefined ï¼Œå…¶å€¼ä¼šè¢«éšå¼è½¬æ¢ä¸ºå…¨å±€å¯¹è±¡ï¼›è€Œå¦‚æžœåœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œundefined ä¸å¯ä»¥è¢«éšå¼çš„è½¬æ¢ ã€‚ ä¸‹é¢æˆ‘ä»¬å°±è¦é€šè¿‡å…·ä½“çš„å‡ ä¸ªæƒ…æ™¯æ¥çœ‹ä¸€ä¸‹å…³è”è§„åˆ™æ˜¯å¦‚ä½•å…·ä½“è¿ä½œçš„ã€‚ ç‹¬ç«‹å‡½æ•°è°ƒç”¨ç‹¬ç«‹å‡½æ•°çš„è°ƒç”¨æˆ‘è¿™é‡Œå°†å®ƒåˆ†ä¸ºç‹¬ç«‹å…¨å±€å‡½æ•°è°ƒç”¨å’Œç‹¬ç«‹å†…éƒ¨å‡½æ•°è°ƒç”¨ï¼Œä»€ä¹ˆå«åšç‹¬ç«‹å‘¢ï¼Œå°±æ˜¯ç›´æŽ¥è°ƒç”¨ï¼Œä¸æ˜¾å¼ä¾æ‰˜å¯¹è±¡ã€‚ ç‹¬ç«‹å…¨å±€å‡½æ•°è°ƒç”¨å…ˆçœ‹çœ‹ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼š 1234function foo() &#123; console.log(this);&#125;foo(); // window (globalå¯¹è±¡æ— æ³•ç›´æŽ¥è®¿é—®) è®©æˆ‘ä»¬æ¥åˆ†æžä¸€ä¸‹ä¸Šé¢çš„ä»£ç äº§ç”Ÿäº†ä»€ä¹ˆå¼•ç”¨ç±»åž‹å€¼ï¼š 1234var fooReference = &#123; base: global, referenceName: foo&#125;; å¦‚æžœåœ¨éžä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œ this ä¼šæŒ‡å‘å…¨å±€å¯¹è±¡ï¼ˆ global å¯¹è±¡æ— æ³•ç›´æŽ¥è®¿é—®ï¼Œä½†æ˜¯ global çš„ window å±žæ€§å¼•ç”¨äº† global ï¼Œæ‰€ä»¥ä¸Šé¢ä¼šè¾“å‡º window ï¼‰ã€‚ä½†æ˜¯åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œ this å€¼å°†è¢«è®¾ä¸º undefined ã€‚ 123456function foo() &#123; "use strict"; console.log(this);&#125;foo(); // undefined ä¸¥æ ¼æ¨¡å¼ä¸Žå‡½æ•°è°ƒç”¨ä½ç½®æ— å…³ï¼Œåªä¸Žå‡½æ•°å®šä¹‰æœ‰å…³ã€‚å½“ç„¶ï¼Œå¦‚æžœä½ æ˜¯å…¨å±€ä½¿ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œå°±ä¸å¿…è€ƒè™‘å®ƒäº†ã€‚ 123456789function foo() &#123; console.log(this);&#125;(function()&#123; "use strict"; foo(); // window&#125;); ç‹¬ç«‹å†…éƒ¨å‡½æ•°è°ƒç”¨å†…éƒ¨å‡½æ•°å°±å’Œå…¨å±€å‡½æ•°è™½ç„¶åå­—å¾ˆè¿‘ä¼¼ï¼Œä½†ä»–ä»¬å´æœ‰æœ¬è´¨ä¸Šçš„åŒºåˆ«ã€‚å“ˆå“ˆï¼Œè¿™é‡Œå°±ä¸å–å…³å­äº†ï¼Œå…ˆæ¥çœ‹ä»£ç ï¼š 123456789function foo() &#123; function bar() &#123; console.log(this); &#125; bar();&#125;foo(); // window è¿™é‡Œå‘¢ï¼Œ foo() å†… bar() æœ€ç»ˆè¾“å‡º window ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼ï¼ï¼ æ˜¯è¿™æ ·çš„ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¸Šé¢ä»£ç äº§ç”Ÿçš„å¼•ç”¨ç±»åž‹çš„å€¼ï¼š 1234var barReference = &#123; base: AO(fooReference), referenceName: bar&#125;; è¿™é‡Œçš„ base è¢«ç»‘å®šäº† foo å‡½æ•°æ´»åŠ¨å¯¹è±¡ï¼Œå¯æ˜¯å‡½æ•°è°ƒç”¨å¹¶ä¸æ˜¯å±žæ€§è°ƒç”¨ï¼Œæ‰€ä»¥æ ¹æ®ä¸Šé¢çš„è§„åˆ™ï¼Œ this è¢«èµ‹å€¼ä¸º undefined ï¼Œå¹¶éšå¼åœ°è½¬æ¢ä¸ºå…¨å±€å¯¹è±¡ã€‚ å…³äºŽå¼•ç”¨ç±»åž‹çš„baseå¯¹è±¡ä»¥åŠå±žæ€§åæ˜¯æ€Žä¹ˆå¯»æ‰¾çš„ï¼Œä»¥åŠä»€ä¹ˆæ—¶å€™å¯»æ‰¾çš„ï¼Œå°†åœ¨ä½œç”¨åŸŸé‚£ä¸€ç¯‡æ–‡ç« ä¸­è¿›è¡Œä»‹ç»ã€‚ æ–¹æ³•è°ƒç”¨æˆ‘ä»¬æ‹¿ä¸ªæ —å­è¾¹åƒè¾¹èŠï¼š 1234567var obj = &#123; foo: function() &#123; console.log(this); &#125;&#125;;obj.foo(); // obj å®ƒäº§ç”Ÿçš„å¼•ç”¨ç±»åž‹çš„å€¼ï¼š 1234var fooReference = &#123; base: obj, referenceName: foo&#125;; å°±è¿‘åŽŸåˆ™å¯¹è±¡å±žæ€§å¼•ç”¨é“¾ä¸­åªæœ‰æœ€åŽä¸€å±‚ï¼ˆæœ€é è¿‘è°ƒç”¨å‡½æ•°ï¼‰ä¼šå½±å“è°ƒç”¨ä½ç½®ã€‚ä¸¾ä¾‹æ¥è¯´ï¼š 123456789101112function foo() &#123; console.log(this.a);&#125;var obj2 = &#123; a: 42, foo: foo &#125;;var obj1 = &#123; a: 2, obj2: obj2 &#125;;obj1.obj2.foo(); // 42 ç»‘å®šä¸¢å¤±æœ‰ä¸€ç§æƒ…å†µæˆ‘ä»¬éœ€è¦è€ƒè™‘ä¸€ä¸‹ï¼Œå°±æ˜¯è¿›è¡Œä¼ å€¼çš„æ—¶å€™ï¼› 12345678var obj = &#123; foo: function() &#123; console.log(this); &#125;&#125;var bar = obj.foo;bar(); // window æˆ‘ä»¬å¯ä»¥çœ‹åˆ° bar() è¾“å‡ºçš„å€¼å˜äº†ï¼Œå› ä¸ºåœ¨è¿›è¡Œè°ƒç”¨çš„æ—¶å€™, bar ç”Ÿæˆäº†ä¸€ä¸ªæ–°çš„å¼•ç”¨ç±»åž‹å€¼ï¼š 1234var barReference = &#123; base: global, referenceName: bar&#125;; éš¾é“è¿™å°±æ²¡äº†å—ï¼Ÿå½“ç„¶ä¸ï¼æˆ‘ä»¬å¼•å‡ºè¿™ä¸ªæ¦‚å¿µï¼Œå¿…é¡»å¾—æœ‰æ³¨æ„äº‹é¡¹å•Šï¼ å½“æˆ‘ä»¬æŠŠå¯¹è±¡å±žæ€§å‡½æ•°å¼•ç”¨ä¼ é€’ç»™å‡½æ•°æˆ–è€…æ˜¯å†…ç½®å‡½æ•°å½“åšå‚æ•°æ—¶ï¼Œå›žæƒ³ä¸€ä¸‹æˆ‘ä»¬ä¹‹å‰æåˆ°è¿‡çš„ï¼Œå®ƒä»¬ä¼šå‘ç”Ÿä¸€ä¸ªéšå¼çš„èµ‹å€¼ä¼ é€’ï¼Œæ‰€ä»¥ï¼Œè¿™ä¸ªæ—¶å€™å°±ä¼šå‘ç”Ÿç»‘å®šä¸¢å¤±ã€‚ 123456789101112function bar(m) &#123; // è¿™é‡Œå‘ç”Ÿäº†ä¸€ä¸ªéšå¼çš„èµ‹å€¼ï¼Œm = obj.foo; m();&#125;var obj = &#123; foo: function() &#123; console.log(this); &#125;&#125;bar(obj.foo); // window callã€applyè°ƒç”¨ .call() ã€ .apply() è°ƒç”¨æ¯”è¾ƒç±»ä¼¼ï¼Œå®ƒä»¬çš„ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯ä¼ é€’ç»™ this çš„å€¼ï¼Œä¸åŒçš„æ˜¯ï¼Œ .call() åŽé¢çš„å‚æ•°å¯ä»¥æ˜¯ä»»æ„å€¼ï¼Œ .apply()ç¬¬äºŒä¸ªå‚æ•°ä¸ºä¼ å…¥å€¼ç»„æˆçš„æ•°ç»„ï¼ˆåªæœ‰ä¸¤ä¸ªå‚æ•°ï¼‰ã€‚ è€æ¿ï¼Œå†æ¥ä¸€ä¸ªæ —å­ï¼š 12345678function foo() &#123; console.log(this.a);&#125;var obj = &#123; a:2&#125;;foo.call(obj); // 2 é€šè¿‡ foo.call(...) ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨ foo() æ—¶å°† this å¼ºåˆ¶ç»‘å®šåˆ° obj ä¸Šã€‚ bindè°ƒç”¨ .bind() æ˜¯ECMAScript5ä¸­åœ¨å‡½æ•°åŽŸåž‹ä¸Šæ·»åŠ çš„æ–¹æ³•ï¼Œå®ƒå°†å‚æ•°ä¼ é€’ç»™thisï¼Œå¹¶è¿”å›žæ–°çš„ç¡¬ç¼–ç ï¼ˆå‡½æ•°å†…éƒ¨æ˜¾å¼ç»‘å®šthisï¼‰å‡½æ•°ã€‚ 12345678910function foo() &#123; console.log(this.a);&#125;var obj = &#123; a: 1&#125;var bar = foo.bind(obj);bar(); // 1 APIè°ƒç”¨ç¬¬ä¸‰æ–¹åº“ä»¥åŠè®¸å¤šjavascriptä¸­å†…ç½®å‡½æ•°ï¼Œä¼šæä¾›ä¸€ä¸ªå¯é€‰å‚æ•°ï¼Œæˆä¸ºâ€œä¸Šä¸‹æ–‡â€ï¼Œç¡®ä¿ä½ çš„å›žè°ƒå‡½æ•°ä½¿ç”¨æŒ‡å®šçš„ this ã€‚ For exampleï¼š 123456789function foo(el) &#123; console.log(el, this.id);&#125;var obj = &#123; id: "awesome"&#125;;// è°ƒç”¨foo(..)æ—¶æŠŠthisç»‘å®šåˆ°obj[1, 2, 3].forEach(foo, obj);// 1 awesome 2 awesome 3 awesome æž„é€ å‡½æ•°å¤§å®¶éƒ½åœ¨è¯´ä½œä¸ºæž„é€ å™¨è°ƒç”¨çš„å‡½æ•°ä¸­çš„ this éƒ½è¢«è®¾ç½®ä¸ºäº†æ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œè½»é£˜é£˜çš„ä¸€å¥è¯ï¼Œæˆ‘ä¹Ÿèƒ½è®°ä½ï¼Œå¯æ˜¯ç©¶å…¶åŽŸç†å‘¢ï¼Ÿ æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ECMA5ä¸­å¯¹newè¿‡ç¨‹çš„è§£é‡Šå§ï¼šï¼ˆä¸»è¦æ˜¯ECMA6æ•´çš„å¤ªå¤æ‚äº†ï¼‰ Let ref be the result of evaluating MemberExpression. Let constructor be GetValue(ref). Let argList be the result of evaluating Arguments, producing an internal list of argument values. If Type(constructor) is not Object, throw a TypeError exception. If constructor does not implement the [[Construct]] internal method, throw a TypeError exception. Return the result of calling the [[Construct]] internal method on constructor, providing the list argList as the argument values. è¿™æ˜¯é’ˆå¯¹æœ‰å‚æž„é€ å‡½æ•°çš„ï¼Œå¦‚æžœæ˜¯æ— å‚æž„é€ å‡½æ•°ï¼Œåˆ™çœåŽ»ç¬¬ä¸‰æ­¥ã€‚å…¶å¤§æ¦‚æ„æ€æ˜¯ â€˜ new â€˜ åŽé¢å¿…é¡»è·Ÿä¸€ä¸ªå¯¹è±¡å¹¶ä¸”è¯¥å¯¹è±¡å¿…é¡»æœ‰ä¸€ä¸ªåä¸º â€˜ [[Construct]] â€˜ çš„å†…éƒ¨æ–¹æ³•ï¼Œå¦åˆ™æŠ›å‡ºå¼‚å¸¸ã€‚å¦‚æžœä»¥ä¸Šæ¡ä»¶éƒ½æˆç«‹ï¼Œå°±æ‰§è¡Œ â€˜ [[Construct]] â€˜ æ–¹æ³•ã€‚ æˆ‘ä»¬å†æ¥çœ‹çœ‹ [[Construct]] å†…éƒ¨æ–¹æ³•æ˜¯å¦‚ä½•å®žçŽ°çš„ï¼š Let obj be a newly created native ECMAScript object. // æ–°å»ºåŽŸç”Ÿ js å¯¹è±¡ obj Set all the internal methods of obj as specified in 8.12. // æŠŠ obj çš„å†…ç½®æ–¹æ³•éƒ½è®¾ç½®å¥½ï¼Œå®ƒä»¬éƒ½åœ¨8.12ä¸­ç½—åˆ—å‡ºæ¥äº† Set the [[Class]] internal property of obj to â€œObjectâ€. //æŠŠ obj çš„ [[Class]] å†…éƒ¨å±žæ€§è®¾ç½®ä¸º â€˜objectâ€™ Set the [[Extensible]] internal property of obj to true. // è®¾ç½® [[Extensible]] ä¸º true Let proto be the value of calling the [[Get]] internal property of F with argument â€œprototypeâ€. // è°ƒç”¨ [[get]] æ–¹æ³•å¾—åˆ°æž„é€ å‡½æ•° F çš„ prototype çš„å€¼,èµ‹ç»™ proto If Type(proto) is Object, set the [[Prototype]] internal property of obj to proto. // å¦‚æžœ proto æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå°† obj çš„ [[Prototype]] è®¾ç½®ä¸ºproto If Type(proto) is not Object, set the [[Prototype]] internal property of obj to the standard built-in Object prototype object as described in 15.2.4. // å¦‚æžœ proto ä¸æ˜¯å¯¹è±¡ï¼Œåˆ™å°† [[Prototype]] è®¾ç½®ä¸ºæ ‡å‡†å†…ç½® Object å¯¹è±¡çš„ prototype å¯¹è±¡ã€‚ Let result be the result of calling the [[Call]] internal property of F, providing obj as the this value and providing the argument list passed into [[Construct]] as args. // è°ƒç”¨æž„é€ å‡½æ•° F çš„å†…éƒ¨ [[Call]] æ–¹æ³•å¹¶èµ‹å€¼ç»™ result ï¼Œè°ƒç”¨æ—¶æä¾› obj ä½œä¸º this çš„å€¼ï¼Œå°†ä¼ å…¥å‚æ•°ä½œä¸ºå…¥å£å‚æ•° If Type(result) is Object then return result. // å¦‚æžœ result æ˜¯å¯¹è±¡ï¼Œåˆ™è¿”å›ž result ã€‚ Return obj. // result ä¸æ˜¯å¯¹è±¡åˆ™è¿”å›ž obj ã€‚ é—´æŽ¥å¼•ç”¨å½“æˆ‘ä»¬è¿›è¡Œä¸€äº›è¯¸å¦‚èµ‹å€¼ã€ || ã€ &amp;&amp; ä¹‹ç±»çš„æ“ä½œæ—¶ï¼Œä¼šä¸ç»æ„åœ°åˆ›å»ºä¸€ä¸ªâ€œå‡½æ•°å¼•ç”¨â€ã€‚ 1234567var obj = &#123; foo: function () &#123; console.log(this); &#125;&#125;;(obj.foo = obj.foo)(); // window è¿™é‡Œè¾“å‡ºwindowçš„åŽŸå› å°±æ˜¯å› ä¸º (obj.foo = obj.foo) ä¸­å­˜åœ¨ = ï¼Œ å®ƒä½¿å¾—èµ‹å€¼å‰å®ƒå³è¾¹çš„ obj.foo è°ƒç”¨äº† getValue æ–¹æ³•ï¼Œ getValue æ–¹æ³•è¿”å›žäº† function çš„å¼•ç”¨ï¼Œæ‰€ä»¥è¿™é‡Œå°±ç­‰äºŽç‹¬ç«‹å‡½æ•°è°ƒç”¨äº†ã€‚ ç®­å¤´å‡½æ•°ECMAScript6ä¸­æ–°æ·»äº†ä¸€ç§ç®­å¤´å‡½æ•°ï¼Œå®ƒæ— æ³•ä¸Žä¸Šé¢å››ç§æƒ…å†µæ··ç”¨ï¼Œå®ƒçš„ this å–å†³äºŽå¤–å±‚å‡½æ•°è°ƒç”¨æ—¶ç»‘å®šçš„ this ï¼Œè€Œä¸”å®ƒä¸€æ—¦è¢«ç»‘å®šæ— æ³•æ›´æ”¹ã€‚ 12345678910111213141516function foo() &#123; return (a) =&gt; &#123; console.log(this); &#125;&#125;var obj1 = &#123; a: 1&#125;;var obj2 = &#123; a: 2&#125;;var bar = foo.bind(obj1);var baz = bar.call(obj2);baz(); // 1 ä¸æ˜¯ 2ï¼Œå› ä¸ºä¸€æ—¦ç»‘å®šåˆ™æ— æ³•æ›´æ”¹ this è¿™ä¸€ç¯‡çœŸçš„å†™äº†æœ‰ä¸€å¤©äº†ï¼Œæœ‰äº†å¾ˆå¤šæ„Ÿæƒ³ï¼Œå¾ˆå¤šè‡ªå·±ä»¥ä¸ºä¼šäº†çš„ä¸œè¥¿å…¶å®žæ ¹æœ¬å°±æ²¡æœ‰æ‡‚ï¼Œå› ä¸ºå†™ç€å†™ç€å°±ä¼šå‘çŽ°è‡ªå·±æœ‰å¾ˆå¤šç‰¹åˆ«ç»†èŠ‚æ€§çš„ä¸œè¥¿ä¸å€¼å¾—æŽ¨æ•²ï¼Œç”šè‡³ä¼šæœ‰å†²çªï¼Œç„¶åŽå†é€¼ç€è‡ªå·±åŽ»æ‰¾èµ„æ–™ï¼Œçœ‹ECMAè§„èŒƒï¼Œè¿™ä¸¤å¤©æé«˜äº†å¾ˆå¤šå§ã€‚è¿™æ˜¯ä¸ªå¥½äº‹ä¹Ÿä¸æ˜¯ä¸ªå¥½äº‹ï¼Œä¸‹æ¬¡åº”å½“åœ¨å†™åšæ–‡ä¹‹å‰å°±æ•´ä¸ªåœ°æ¢³ç†éï¼Œè¿™æ ·å­çŸ¥è¯†æ‰èƒ½æ›´ç³»ç»Ÿçš„æ¶ˆåŒ–ï¼Œä¸è‡³äºŽæ˜¾å¾—å†™åšå®¢ä»…ä»…æ˜¯æ¥å‘çŽ°è‡ªå·±çš„ä¸è¶³ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Javascriptæ·±å…¥æµ…å‡ºä¹‹æ‰§è¡Œä¸Šä¸‹æ–‡]]></title>
      <url>%2F2016%2F06%2F09%2Fdeeply_understand_execution_contexts%2F</url>
      <content type="text"><![CDATA[å½“æŸä¸ªå‡½æ•°è¢«è°ƒç”¨æ—¶ï¼Œä¼šåˆ›å»ºä¸€ä¸ªæ‰§è¡ŒçŽ¯å¢ƒï¼ˆexecution contextï¼‰åŠç›¸åº”çš„ä½œç”¨åŸŸé“¾ã€‚ç„¶åŽï¼Œä½¿ç”¨argumentså’Œå…¶ä»–å‘½åå‚æ•°çš„å€¼æ¥åˆå§‹åŒ–å‡½æ•°çš„æ´»åŠ¨å¯¹è±¡ï¼ˆactivation objectï¼‰ã€‚ å¦‚æžœä½ åˆšçœ‹ã€Šé«˜ç¨‹ã€‹ï¼Œçœ‹åˆ°è¿™å¥è¯ä¼°è®¡ä¼šä¼¼æ˜¯è€Œéžçš„ç†è§£ã€‚å…¶å®žæˆ‘å½“æ—¶ä¹Ÿæ˜¯ï¼Œç›´åˆ°æœ€è¿‘æ’¸ç¬¬äºŒéï¼Œä¹Ÿæ˜¯å¶ç„¶çœ‹åˆ°å¤§å”çš„ç³»åˆ—æ–‡ç« ï¼Œæœ‰å¿ƒç ”ç©¶äº†ä¸‹ï¼ŒåŠ ä¸Šè‡ªå·±çš„ç†è§£ï¼Œä¿ƒæˆäº†è¿™å‡ ç¯‡åšæ–‡ã€‚ä»Šå¤©æˆ‘ä»¬å…ˆæ¥èŠèŠæ‰§è¡Œä¸Šä¸‹æ–‡ä¸Žæ´»åŠ¨å¯¹è±¡ã€‚ æ‰§è¡Œä¸Šä¸‹æ–‡æ‰§è¡Œä¸Šä¸‹æ–‡å¯èƒ½ä¸å¤ªå®¹æ˜“ç†è§£ï¼Œå…¶å®žå®ƒå°±æ˜¯ä¸Šé¢å†™åˆ°çš„æ‰§è¡ŒçŽ¯å¢ƒï¼Œä»£ç å°±æ˜¯åœ¨ç›¸å¯¹åº”çš„æ‰§è¡ŒçŽ¯å¢ƒä¸­è¿è¡Œçš„ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è¿™æ ·ç†è§£ï¼Œæ¯å½“è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼Œå°±ä¼šç›¸åº”åœ°ä¸ºè¿™ä¸ªå‡½æ•°åˆ’å‡ºä¸€å—åœ°ï¼Œè¯¥å‡½æ•°æ‰€æœ‰çš„ä»£ç æ´»åŠ¨éƒ½è¢«é™åˆ¶åœ¨è¿™å—åœ°ä¸Šã€‚ å¥½ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥å¼•å‡ºä¸¤ä¸ªé—®é¢˜ï¼šè¿™å—åœ°æ˜¯ä»€ä¹ˆï¼Ÿåªæœ‰å‡½æ•°è°ƒç”¨æ‰èƒ½åˆ›å»ºECå—ï¼Ÿ è¿™å—åœ°æ˜¯ä»€ä¹ˆï¼Ÿå½“ç„¶å°±æ˜¯å†…å­˜äº†ã€‚æ— è®ºæ˜¯jsè¿˜æ˜¯å…¶ä»–ä»£ç ï¼Œä»£ç çš„è¿è¡Œæ‰€éœ€ç©ºé—´éƒ½æ˜¯ç”±å†…å­˜æ¥åˆ†é…çš„ã€‚å†…å­˜åˆ†å †(heap)å’Œæ ˆ(stack)ï¼Œåœ¨è¿™é‡Œï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡ç»„æˆäº† æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆ æ¥è°ƒæŽ§ä»£ç çš„è¿›è¡Œï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡æ ˆçš„é¡¶ç«¯å°±æ˜¯æ­£åœ¨ä½¿ç”¨çš„ä¸Šä¸‹æ–‡ã€‚æˆ‘ä»¬æ¥ç”¨å›¾ç¤ºçœ‹ä¸€ä¸‹ï¼š 123456789101112var a = 1, b = 2;function foo() &#123; a = 3; bar(); alert(a + b);&#125;function bar() &#123; b = 3;&#125;foo(); å½“ç¨‹åºç»“æŸæ—¶ï¼Œå…¨å±€ä¸Šä¸‹æ–‡å‡ºæ ˆå¹¶é”€æ¯ã€‚ ç›¸ä¿¡å¤§å®¶ä¹Ÿæ³¨æ„åˆ°äº†ä¸Šé¢å‡ºçŽ°äº†å¾ˆå¤šæ¬¡çš„ å…¨å±€ä¸Šä¸‹æ–‡ ï¼Œå®ƒå¯ä»¥å¾ˆå¥½çš„å›žç­”æˆ‘ä»¬çš„ç¬¬äºŒä¸ªé—®é¢˜ï¼šä¸æ˜¯! é‚£ä¹ˆï¼Œé—®é¢˜å°±æ¥äº†ã€‚ã€‚ã€‚ ä»€ä¹ˆä»£ç å¯ä»¥åˆ›å»ºECï¼Ÿ å…¨å±€ä»£ç  å‡½æ•°ä»£ç  Evalä»£ç  å…¨å±€ä»£ç å…¨å±€ä»£ç å°±æ˜¯ &lt;script&gt; æ ‡ç­¾ä¸­çš„ï¼Œæˆ–è€…æ˜¯é€šè¿‡å¤–éƒ¨åŠ è½½çš„jsæ–‡ä»¶ä¸­çš„ä»£ç ï¼Œå®ƒä¸åŒ…å«ä»»ä½•å‡½æ•°ä½“å†…çš„ä»£ç ã€‚å…¨å±€ä»£ç åˆ›å»ºçš„ECå°±æ˜¯æˆ‘ä»¬ä¸Šæ–‡ä¸­æ‰€æçš„å…¨å±€ä¸Šä¸‹æ–‡ï¼Œå®ƒæ˜¯ç¨‹åºåˆšå¼€å§‹ï¼Œä»£ç å°šæœªæ‰§è¡Œæ—¶å°±äº§ç”Ÿçš„ä¸Šä¸‹æ–‡ï¼Œå®ƒæ°¸è¿œå¤„åœ¨æ‰§è¡Œä¸Šä¸‹æ–‡æ ˆçš„åº•éƒ¨ã€‚ å‡½æ•°ä»£ç  function å‡½æ•°ä¸­çš„ä»£ç æ®µå°±æ˜¯å‡½æ•°ä»£ç ï¼Œå®ƒä¹Ÿä¸åŒ…æ‹¬å†…éƒ¨å‡½æ•°ä»£ç ã€‚ å‡½æ•°å¦‚æžœé€’å½’è°ƒç”¨è‡ªèº«ï¼Œæ¯è°ƒç”¨ä¸€æ¬¡éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚å¦‚æžœå‡½æ•°ä½“å†…æœ‰ return ï¼Œæ‰§è¡Œåˆ°å®ƒçš„æ—¶å€™ä¼šç«‹åˆ»é€€å‡ºå½“å‰æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ Evalä»£ç Evalä»£ç å’Œå‡½æ•°ä»£ç ç±»ä¼¼ï¼Œæ‰§è¡Œåˆ°å®ƒçš„æ—¶å€™ä¹Ÿä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚ä½†ä¸åŒçš„æ˜¯ï¼Œå®ƒæœ‰ä¸€ä¸ªè°ƒç”¨ä¸Šä¸‹æ–‡ï¼ˆcalling contextï¼‰ï¼ŒåŒæ ·ä¼šåŽ‹å…¥ECStackã€‚evalå‡½æ•°ä¸­å¦‚æžœè¿›è¡Œå˜é‡ã€å‡½æ•°å£°æ˜Žï¼Œå°†ä¼šä½“çŽ°åˆ°è°ƒç”¨ä¸Šä¸‹æ–‡ä¸­ã€‚ ä¸è¿‡evalä¼šä½¿é˜…è¯»æ€§ã€å®‰å…¨æ€§ã€æ€§èƒ½ä¸‹é™ï¼Œä¸å»ºè®®å¤§å®¶ä½¿ç”¨ã€‚ å˜é‡å¯¹è±¡ä»£ç æ‰§è¡Œçš„æ—¶å€™è®¿é—®çš„å˜é‡éƒ½æ˜¯ä»Žå˜é‡å¯¹è±¡ä¸­å–åˆ°çš„ã€‚ å˜é‡å¯¹è±¡ï¼ˆVariable Objectï¼‰å…¶å®žæ˜¯æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¸€ä¸ªå±žæ€§ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡è¿˜æœ‰ this å’Œ ä½œç”¨åŸŸ å±žæ€§ã€‚å®ƒä»¬ä»‹ç»èµ·æ¥ç¯‡å¹…å¾ˆå¤§ï¼Œæ‰€ä»¥æˆ‘æŠŠå®ƒæ”¾åˆ°äº†åŽé¢çš„æ–‡ç« ã€‚ å˜é‡å¯¹è±¡åˆ†ä¸ºä¸¤ç±»ï¼š1.å…¨å±€ä¸Šä¸‹æ–‡å˜é‡å¯¹è±¡2.å‡½æ•°ä¸Šä¸‹æ–‡å˜é‡å¯¹è±¡ å…¨å±€ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡å¯¹è±¡å…¨å±€ä¸Šä¸‹æ–‡å˜é‡å¯¹è±¡å°±æ˜¯å…¨å±€å¯¹è±¡ã€‚ å…¨å±€å¯¹è±¡æœ¬èº«åŒ…å«å¾ˆå¤šå±žæ€§å¦‚Mathã€Stringã€Dateã€parseIntç­‰ç­‰ï¼Œå¤§å®¶ä¸å¦¨ç”¨ console.log(this) åœ¨æŽ§åˆ¶å°ä¸­æŸ¥çœ‹ä¸€ä¸‹ï¼Œè¿˜æœ‰ï¼Œåœ¨å…¨å±€ä½œç”¨åŸŸä¸­å£°æ˜Žçš„å˜é‡å’Œå‡½æ•°ä¹Ÿä¼šæˆä¸ºå®ƒçš„å±žæ€§ã€‚ å½“è®¿é—®å…¨å±€å¯¹è±¡çš„å±žæ€§æ—¶é€šå¸¸ä¼šå¿½ç•¥æŽ‰å‰ç¼€ï¼Œè¿™æ˜¯å› ä¸ºå…¨å±€å¯¹è±¡æ˜¯ä¸èƒ½é€šè¿‡åç§°ç›´æŽ¥è®¿é—®çš„ã€‚ä¸è¿‡æˆ‘ä»¬ä¾ç„¶å¯ä»¥é€šè¿‡å…¨å±€ä¸Šä¸‹æ–‡çš„thisæ¥è®¿é—®å…¨å±€å¯¹è±¡ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥é€’å½’å¼•ç”¨è‡ªèº«ã€‚ä¾‹å¦‚ï¼ŒDOMä¸­çš„windowã€‚ å‡½æ•°ä¸Šä¸‹æ–‡ä¸­çš„å˜é‡å¯¹è±¡å‡½æ•°ä¸Šä¸‹æ–‡ä¸­å­˜åœ¨çš„æ˜¯æ´»åŠ¨å¯¹è±¡ï¼Œå®ƒå¯ä»¥å½“åšå˜é‡å¯¹è±¡ä½¿ç”¨ï¼Œå…¶ä¸­åŒ…å«å˜é‡ã€å‡½æ•°å£°æ˜Žã€å½¢å‚ã€argumentsã€‚ æˆ‘ä»¬æ¥é…åˆä¸€ä¸ªä¾‹å­çœ‹ä¸€ä¸‹ï¼š 12345678var a = 10; function foo(b) &#123; var c = 20; c += b;&#125;;foo(30) å¯¹åº”çš„å˜é‡å¯¹è±¡æ˜¯ï¼š 123456789101112// å…¨å±€ä¸Šä¸‹æ–‡çš„å˜é‡å¯¹è±¡ï¼ˆä¸åŒ…å«è‡ªå¸¦å±žæ€§ï¼‰VO(globalContext) = &#123; a: 10, foo: &lt;reference to function&gt;&#125;VO(foo functionContext) = &#123; // argumentså…¶å®žæ˜¯ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡ï¼Œå¯ä»¥é€šè¿‡ä¸‹æ ‡æ¥è®¿é—®å®žå‚ï¼Œå®ƒåŒæ—¶åŒ…å«calleeã€lengthã€properties-indexesä¸‰ä¸ªå±žæ€§ arguments: &lt;ArgO&gt; b: 30, // å½¢å‚ c: 20 // å˜é‡&#125; æˆ‘ä»¬æƒ³ä¸€ä¸ªé—®é¢˜ï¼Œå˜é‡å¯¹è±¡æ˜¯åˆå§‹åŒ–æ—¶å°±æ˜¯è¿™æ ·å—ï¼Ÿå…¶å®žä¸æ˜¯è¿™æ ·ï¼Œæ‰§è¡Œä¸Šä¸‹æ–‡ä¸­çš„ä»£ç åˆ†ä¸¤ä¸ªé˜¶æ®µï¼Œä¸åŒé˜¶æ®µå€¼ä¸åŒï¼Œè¿™ä¹Ÿæ˜¯jsçš„å¾ˆé‡è¦çš„ä¸€ä¸ªç‰¹æ€§ã€‚ æ‰§è¡Œä¸Šä¸‹æ–‡çš„ä¸¤ä¸ªé˜¶æ®µæˆ‘ä»¬é€è¿‡è¿™æ®µä»£ç åœ¨ä¸åŒæ—¶æœŸçš„å˜é‡å¯¹è±¡çœ‹ä¸€ä¸‹ã€‚ 12345678function test(a, b) &#123; var c = 10; function d() &#123;&#125; var e = function _e() &#123;&#125;; (function x() &#123;&#125;);&#125; test(10); // call è¿›å…¥æ‰§è¡Œä¸Šä¸‹æ–‡è¿™ä¸ªé˜¶æ®µå¤„äºŽä»£ç æ‰§è¡Œä¹‹å‰ï¼Œæ­¤æ—¶æ‰§è¡Œä¸Šä¸‹æ–‡çš„VOå·²ç»åŒ…å«å‡½æ•°å£°æ˜Žã€å½¢å‚ã€å˜é‡ã€argumentsã€‚å…¶å®žè¿™ä¸ªé˜¶æ®µå°±æ˜¯å£°æ˜Žæå‡çš„é˜¶æ®µã€‚ æ­¤æ—¶AOå¯¹è±¡æ•°æ®ä¸ºï¼š ç±»åž‹ èµ‹å€¼ä¸Žå¦ å˜é‡ undefined å‡½æ•°å£°æ˜Ž å¯¹å‡½æ•°çš„å¼•ç”¨ å½¢å‚ èµ‹å€¼ arguments èµ‹å€¼ å»ºè®®å¤§å®¶é…åˆ Javascriptæ·±å…¥æµ…å‡ºä¹‹å£°æ˜Žä¸Žæå‡ ä¸­çš„ æå‡è§„åˆ™ ä¸€èµ·çœ‹çœ‹ã€‚ å¯¹åº”å˜é‡å¯¹è±¡ï¼š 12345678// æ´»åŠ¨å¯¹è±¡AO(test) = &#123; a: 10, b: undefined, c: undefined, d: &lt;reference to FunctionDeclaration "d"&gt; e: undefined&#125;; ä»£ç æ‰§è¡Œæ­¤æ—¶AOå¯¹è±¡æ•°æ®ä¸ºï¼š ç±»åž‹ èµ‹å€¼ä¸Žå¦ å˜é‡ èµ‹å€¼ å‡½æ•°å£°æ˜Ž å¯¹å‡½æ•°çš„å¼•ç”¨ å½¢å‚ èµ‹å€¼ arguments èµ‹å€¼ åœ¨è¿™ä¸ªé˜¶æ®µä¸­ï¼ŒAOè¢«æ”¹æˆäº† 12AO['c'] = 10;AO['e'] = &lt;reference to FunctionExpression "_e"&gt;; åˆ°äº†è¿™é‡Œï¼Œç›¸ä¿¡å¤§å®¶éƒ½å¯¹å‡½æ•°è°ƒç”¨é˜¶æ®µæœ‰ä¸ªå¾ˆå¤šæœ¬è´¨çš„ç†è§£ï¼Œé…åˆæœ¬æ–‡ä¹Ÿå¯ä»¥æ›´å¥½åœ°ç†è§£å£°æ˜Žæå‡ï¼Œä¹Ÿä¸ºåŽé¢ç†è§£é—­åŒ…æ‰“å¥½åŸºç¡€ã€‚]]></content>
    </entry>

    
    <entry>
      <title><![CDATA[Javascriptæ·±å…¥æµ…å‡ºä¹‹å£°æ˜Žä¸Žæå‡]]></title>
      <url>%2F2016%2F06%2F07%2Fdeeply_understand_statement_promotion%2F</url>
      <content type="text"><![CDATA[var å£°æ˜Žäº†ä¸€ä¸ªå˜é‡ï¼ŒåŒæ—¶å¯ä»¥åˆå§‹åŒ–è¯¥å˜é‡ã€‚ 1var name1 [= value1 [, varname2 [, varname3 ... [, varnameN]]]]; å• var æ¨¡å¼åœ¨å‡½æ•°çš„é¡¶éƒ¨ä½¿ç”¨ä¸€ä¸ªå•ç‹¬çš„ var è¯­å¥æ˜¯éžå¸¸æŽ¨èçš„ä¸€ç§æ¨¡å¼ï¼Œå®ƒæœ‰å¦‚ä¸‹ä¸€äº›å¥½å¤„ï¼š åœ¨åŒä¸€ä¸ªä½ç½®å¯ä»¥æŸ¥æ‰¾åˆ°å‡½æ•°æ‰€éœ€çš„æ‰€æœ‰å˜é‡ é¿å…å½“åœ¨å˜é‡å£°æ˜Žä¹‹å‰ä½¿ç”¨è¿™ä¸ªå˜é‡æ—¶äº§ç”Ÿçš„é€»è¾‘é”™è¯¯ æé†’ä½ ä¸è¦å¿˜è®°å£°æ˜Žå˜é‡ï¼Œé¡ºä¾¿å‡å°‘æ½œåœ¨çš„å…¨å±€å˜é‡ ä»£ç é‡æ›´å°‘ï¼ˆè¾“å…¥æ›´å°‘ä¸”æ›´æ˜“åšä»£ç ä¼˜åŒ–ï¼‰ å• var æ¨¡å¼çœ‹èµ·æ¥åƒè¿™æ ·ï¼š 123456789function func() &#123; var a = 1, b = 2, sum = a + b, myobject = &#123;&#125;, i, j; // function body...&#125; å• var è¡ç”Ÿçš„è¯¯åŒº123456function test() &#123; var param1 = param2 = 2;&#125;test();console.log(param1); // Uncaught ReferenceErrorconsole.log(param2); // 2 å¯èƒ½æœ‰äººå°±ä¼šç–‘æƒ‘ï¼Œä¸ºä»€ä¹ˆè¿™é‡Œçš„ param1 æ˜¯å±€éƒ¨å˜é‡ï¼Œè€Œ param2 å´æ˜¯å…¨å±€å˜é‡å‘¢ï¼Ÿ = è¿ç®—ä»Žå³å‘å·¦åˆå¹¶ï¼Œä¸Šä¸€æ®µä»£ç å…¶å®žæ˜¯è¿™æ ·è¿è¡Œçš„ï¼š 12345function test() &#123; var param1; param2 = 2; // å…¨å±€å˜é‡ ï¼ˆä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šæŠ›å‡ºé”™è¯¯ï¼‰ param1 = param2; // å±€éƒ¨å˜é‡&#125; æœªå£°æ˜Žå˜é‡ ç»™ä¸€ä¸ªéžå£°æ˜Žå˜é‡èµ‹å€¼ä¼šéšå¼åˆ›å»ºä¸€ä¸ªå…¨å±€å˜é‡ï¼ˆå…¨å±€objectçš„ä¸€ä¸ªå±žæ€§ï¼‰ã€‚ è¿™å¥è¯å¤§å®¶åº”è¯¥éƒ½å¾ˆç†Ÿæ‚‰ï¼Œå³ä¾¿ä½ æ˜¯åˆšå…¥é—¨çš„æ–°æ‰‹ï¼›ä½†ä¹Ÿæœ‰äººä¸å®Œå…¨èµžåŒè¿™å¥è¯ï¼Œä»–ä»¬æ„Ÿè§‰å®ƒä¸ç¬¦åˆECMAScriptçš„åŸºæœ¬å˜é‡çš„å®šä¹‰ï¼Œå®ƒåªç®—æ˜¯å…¨å±€å±žæ€§ï¼›é‚£æˆ‘ä»¬å°±æ¥ç»†ç»†æŽ¢è®¨ä¸€ä¸‹å£°æ˜Žå˜é‡ä¸Žæœªå£°æ˜Žå˜é‡çš„åŒºåˆ«ï¼š å£°æ˜Žå˜é‡çš„ä½œç”¨åŸŸé™åˆ¶åœ¨å…¶å£°æ˜Žä½ç½®çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè€Œéžå£°æ˜Žå˜é‡æ€»æ˜¯å…¨å±€çš„ã€‚ å£°æ˜Žå˜é‡åœ¨ä»»ä½•ä»£ç æ‰§è¡Œå‰åˆ›å»ºï¼Œè€Œéžå£°æ˜Žå˜é‡åªæœ‰åœ¨æ‰§è¡Œèµ‹å€¼æ“ä½œçš„æ—¶å€™æ‰ä¼šè¢«åˆ›å»ºã€‚ 12345console.log(a); // Uncaught ReferenceErrorconsole.log(b); // 2 a = 1;var b = 2; å£°æ˜Žå˜é‡æ˜¯å®ƒæ‰€åœ¨ä¸Šä¸‹æ–‡çŽ¯å¢ƒçš„ä¸å¯é…ç½®å±žæ€§ï¼ˆnon-configurable propertyï¼‰ï¼Œéžå£°æ˜Žå˜é‡æ˜¯å¯é…ç½®çš„ï¼ˆä¾‹å¦‚éžå£°æ˜Žå˜é‡å¯ä»¥è¢«åˆ é™¤ï¼‰ã€‚ 1234567var a =1;b = 1;console.log(delete a); // falseconsole.log(delete b); // trueconsole.log(this.a); // 1console.log(this.b); // Uncaught ReferenceError æ‰€ä»¥ï¼Œä½¿ç”¨æœªç»å£°æ˜Žçš„å˜é‡ä¼šå¸¦æ¥å¾ˆå¤šæ½œåœ¨çš„ä»£ç å±é™©ï¼Œä¹Ÿå»ºè®®å¤§å®¶å°½é‡ä¸è¦ä½¿ç”¨ï¼›è€Œä¸”ä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šæŠ›å‡ºé”™è¯¯ã€‚ æå‡å…ˆçœ‹ä¸€æ®µä»£ç ï¼š 123a = 2;var a;console.log(a); å¾ˆå¤šäººå¯èƒ½è®¤ä¸ºè¿™æ®µä»£ç è¾“å‡ºçš„æ˜¯ undefined ï¼›å› ä¸ºå¼€å§‹ a è¢«åˆå§‹åŒ–ä¸º2ï¼ŒæŽ¥ç€åˆè¢«é‡æ–°å£°æ˜Žå¹¶è¢«é»˜è®¤èµ‹å€¼ä¸º undefined ã€‚ å†çœ‹ä¸‹ä¸€æ®µä»£ç ï¼š 12console.log(a);var a = 2; è¿™æ®µä»£ç å¯èƒ½åˆä¼šæœ‰äººè®¤ä¸ºå®ƒè¦æŠ¥é”™äº†ï¼Œå› ä¸ºåœ¨æ‰§è¡Œ console.log å‰ a å°šæœªå£°æ˜Žã€‚ å…¶å®žåˆšæ‰ä¸¤æ®µä»£ç ä¼šåˆ†åˆ«è¾“å‡º 2 å’Œ undefined ï¼Œé‚£åˆæ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ åœ¨å¼•æ“Žè§£é‡Šä»£ç ä¹‹å‰ï¼Œç¼–è¯‘å™¨ä¼šé¢„å…ˆå¯¹å…¶è¿›è¡Œç¼–è¯‘ï¼Œç¼–è¯‘å·¥ä½œçš„å…¶ä¸­ä¸€å—å°±æ˜¯å°†æ‰€æœ‰çš„å£°æ˜Žé¢„å…ˆè¿›è¡Œå¤„ç†ã€‚ å½“ä½ çœ‹åˆ° var a = 2 æ—¶ï¼Œä½ ä»¥ä¸ºç›´æŽ¥å°±æ˜¯å°† 2 èµ‹å€¼ç»™ a ï¼Œå…¶å®žå®ƒä¼šåˆ†æˆä¸¤ä¸ªé˜¶æ®µè¿›è¡Œï¼Œç¬¬ä¸€é˜¶æ®µå°±æ˜¯è¿›è¡Œ var a ç¼–è¯‘ï¼ˆåœ¨å½“å‰ä½œç”¨åŸŸä»£ç æ‰§è¡Œå‰ï¼‰ï¼› ç¬¬äºŒé˜¶æ®µå°±æ˜¯æ‰§è¡Œ a = 2ï¼ˆç­‰å¾…jsæ‰§è¡Œåˆ°ä»£ç æ‰€åœ¨è¡Œï¼‰ï¼› æ‰€ä»¥ç¬¬ä¸€æ®µä»£ç çœŸå®žçš„æ‰§è¡Œé¡ºåºæ˜¯è¿™æ ·çš„ï¼š 123var a;a = 2;console.log(a); ç¬¬ä¸€é˜¶æ®µå°±æ˜¯ç¼–è¯‘ï¼Œç¬¬äºŒé˜¶æ®µæ˜¯æ‰§è¡Œï¼›è¿™å°±æ˜¯ å˜é‡æå‡ã€‚ç±»ä¼¼åœ°ï¼Œç¬¬äºŒæ®µæ˜¯è¿™æ ·å¤„ç†çš„ï¼š 123var a;console.log(a);a = 2; æå‡è§„åˆ™æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ä¼šè¿›è¡Œæå‡çš„éƒ½æœ‰å“ªäº›ï¼Œç¨åŽå†è¿›è¡Œè§£é‡Šï¼š å‡½æ•°å£°æ˜Žï¼Œå‡½æ•°å£°æ˜Žä¼˜å…ˆçº§æœ€é«˜ï¼Œå¿½ç•¥é‡å¤çš„å˜é‡å’Œå½¢å‚å£°æ˜Ž å½¢å‚ï¼Œæ¯”å˜é‡å£°æ˜Žä¼˜å…ˆï¼Œå¿½ç•¥é‡å¤çš„å˜é‡å£°æ˜Ž å˜é‡å£°æ˜Ž â€» æå‡åªä¼šåœ¨å…¶è‡ªèº«æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­è¿›è¡Œã€‚ä»€ä¹ˆï¼Ÿä¸çŸ¥é“æ‰§è¡Œä¸Šä¸‹æ–‡ï¼Ÿä¸‹ç¯‡æ–‡ç« ä¼šä»‹ç»ï¼ å½¢å‚12345function foo(a) &#123; console.log(a);&#125;foo(2); // 2 ä¸Šé¢ foo åœ¨æ‰§è¡Œæ—¶ï¼Œä¼šå…ˆè¿›è¡Œ éšå¼çš„å£°æ˜Žèµ‹å€¼ æ“ä½œ var a = 2 ï¼Œç„¶åŽåœ¨æ‰§è¡Œå‡½æ•°ä¸­çš„ä»£ç æ®µï¼›æ€Žä¹ˆè¯æ˜Žå‘¢ï¼Ÿæˆ‘ä»¬æ¥æ”¹ä¸€ä¸‹ä¸Šé¢çš„ä»£ç ï¼š 1234567function foo(a) &#123; a = 3; console.log(a);&#125;foo(2); // 3console.log(a); // Uncaught ReferenceError å¦‚æžœå®ƒæ²¡æœ‰è¿™ä¸ªéšå¼çš„å£°æ˜Žï¼Œè¿™é‡Œçš„ a åº”è¯¥æ˜¯å…¨å±€å˜é‡ï¼ˆå±žæ€§ï¼‰ï¼Œå‡½æ•°ä½“å¤–å°±å¯ä»¥è®¿é—®åˆ°ã€‚ å› ä¸ºå®ƒçš„è¿™ä¸€ç‰¹æ€§,æˆ‘ä¹‹å‰ä¸€ç›´ä»¥ä¸ºå½¢å‚å’Œå˜é‡ä¸€æ¨¡ä¸€æ ·ï¼Œåªå£°æ˜Žä¸èµ‹å€¼ï¼ˆå…¶å®žé»˜è®¤èµ‹å€¼undefinedï¼‰ï¼Œåªä¸è¿‡æ‰§è¡Œæ—¶å®ƒçš„ä»£ç åœ¨å‡½æ•°ä½“æ‰€æœ‰ä»£ç ä¹‹ä¸Šï¼ŒåŽæ¥å‘çŽ°å…¶å®žä¸ç„¶ã€‚ å½¢å‚å£°æ˜Žçš„åŒæ—¶ä¼šæŽ¥å—å®žå‚çš„èµ‹å€¼ï¼Œå¦‚æžœæ²¡æœ‰å¯¹åº”å®žå‚ï¼Œèµ‹å€¼ä¸ºundefined ã€‚ 123456function foo(a) &#123; console.log(a); function a() &#123;&#125;; &#125;foo(2); // function a() &#123;&#125; å¦‚æžœæŒ‰ç…§æˆ‘åŽŸå…ˆçš„ç†è§£ï¼Œä¸Šé¢è¿™æ®µä»£ç ï¼Œåœ¨æ‰€æœ‰å£°æ˜Žæå‡ä¹‹åŽï¼Œæ‰§è¡Œ console.log(a); ä¹‹å‰ä¼šæœ‰ä¸€ä¸ª a = 2 çš„èµ‹å€¼ï¼Œæœ€åŽè¾“å‡ºçš„å°±ä¸ä¼šæ˜¯ function è€Œæ˜¯ 2 ã€‚æ‰€ä»¥å¾ˆæ˜Žæ˜¾ï¼Œå½¢å‚å£°æ˜Žçš„åŒæ—¶å°±å·²ç»æŽ¥æ”¶äº†å®žå‚çš„èµ‹å€¼ï¼Œä½†ä¼˜å…ˆçº§ä¸é«˜è¢«å‡½æ•°å£°æ˜Žè¦†ç›–äº†ã€‚ å‡½æ•°å£°æ˜Žæ³¨æ„æˆ‘ä»¬è¿™é‡Œå†™çš„æ˜¯ å‡½æ•°å£°æ˜Ž ï¼Œä¸åŒ…å« å‡½æ•°è¡¨è¾¾å¼ ã€‚ 12foo();function foo() &#123;&#125; è¿™ä¸€æ®µä»£ç å¯ä»¥æ­£å¸¸æ‰§è¡Œï¼Œå› ä¸º foo å‡½æ•°çš„å£°æ˜Žå·²ç»è¢«æå‡äº†ã€‚ 1234foo(); // Uncaught ReferenceErrora(); // Uncaught TypeErrorvar a = function foo() &#123;&#125;;foo(); // Uncaught ReferenceError ä¸Šé¢è¿™æ®µä»£ç å¯ä»¥çœ‹å‡ºæ¥å‡½æ•°è¡¨è¾¾å¼ä¸ä¼šè®©å‡½æ•°å¾—åˆ°æå‡ã€‚è€Œ a() ä¸ºä»€ä¹ˆä¼šæç¤ºUncaught TypeErrorå‘¢ï¼Œå› ä¸ºä¸Šé¢ä»£ç å®žé™…æ˜¯è¿™æ ·å¤„ç†çš„ï¼š 12345var a;foo();a();a = function foo() &#123;&#125;;foo(); // Uncaught ReferenceError æ‰§è¡Œåˆ° a() çš„æ—¶å€™ a è¿˜åªæ˜¯è¢«é»˜è®¤èµ‹å€¼ä¸º undefined ï¼Œå¹¶ä¸åŒ…å«å¯¹å‡½æ•°çš„å¼•ç”¨ã€‚è¿˜è¦æåˆ°çš„ä¸€ç‚¹å°±æ˜¯ï¼Œå‡½æ•° foo åªèƒ½åœ¨å…¶è‡ªèº«ä½œç”¨åŸŸå†…è¢«å‘çŽ°ã€‚ å‡½æ•°å£°æ˜Žæ¯”å˜é‡å£°æ˜Žä¼˜å…ˆï¼Œå¿½ç•¥é‡å¤çš„å˜é‡å£°æ˜Ž 123456console.log(a); // function a() &#123;&#125; var a = 2;function a() &#123;&#125; console.log(a); // 2 ä¸Šé¢ç¬¬ä¸€ä¸ª console.log(a); ä¼šè¾“å‡º function a() {} æ˜¯å› ä¸ºå‡½æ•°å£°æ˜Žä¼˜å…ˆï¼Œå¹¶ä¸”å¿½ç•¥äº†åŽé¢åŒåå˜é‡çš„å£°æ˜Žã€‚ç¬¬äºŒä¸ª console.log(a); è¾“å‡º 2 æ˜¯å› ä¸ºæ‰§è¡Œä»£ç æ—¶ä¸ä¼šå¿½ç•¥åˆå§‹åŒ–æ“ä½œã€‚ä»£ç çš„å®žé™…å¤„ç†æƒ…å†µæ˜¯ï¼š 12345678function a() &#123;&#125;// var a; è¢«å¿½ç•¥äº† console.log(a); // function a() &#123;&#125;a = 2;console.log(a); // 2 å¦‚æžœæ˜¯åŒåå‡½æ•°çš„å£°æ˜Žåˆ™ä¼šå¯¹å…¶è¿›è¡Œè¦†ç›–ï¼Œæ‰€ä»¥jsæ²¡æœ‰å‡½æ•°é‡è½½ã€‚ ç»ƒä¹ 123456var y = 1, x = y = typeof x;console.log(x);æ±‚ä¸Šé¢ä»£ç æ®µè¾“å‡ºå€¼; ç­”æ¡ˆ1234567var y; // undefinedvar x; // undefinedy = 1;y = undefined;x = undefined;console.log(x); // undefined]]></content>
    </entry>

    
  
  
</search>
